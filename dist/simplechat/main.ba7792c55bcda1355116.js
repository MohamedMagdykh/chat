(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return a}));var r=n("mAIw"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(h){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"6Uf2":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return Tn}));var r,i=n("zIRd"),o=n("mAIw"),s=n("qOnz"),a=n("q/0M"),u=n("/6Yf"),c=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(s.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(s.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),l=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(s.i)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),h=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new c(e)}}catch(n){}return new l},f=h("localStorage"),d=h("sessionStorage"),p=new a.b("@firebase/database"),g=(r=1,function(){return r++}),y=function(t){var e=Object(s.F)(t),n=new s.d;n.update(e);var r=n.digest();return s.g.encodeByteArray(r)},m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=m.apply(null,i):n+="object"==typeof i?Object(s.G)(i):i,n+=" "}return n},v=null,_=!0,b=function(t,e){Object(s.e)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(p.logLevel=a.a.VERBOSE,v=p.log.bind(p),e&&d.set("logging_enabled",!0)):"function"==typeof t?v=t:(v=null,d.remove("logging_enabled"))},w=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===v&&!0===d.get("logging_enabled")&&b(!0)),v){var n=m.apply(null,t);v(n)}},C=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];w.apply(void 0,Object(o.f)([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,Object(o.f)(t));p.error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,Object(o.f)(t));throw p.error(n),new Error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,Object(o.f)(t));p.warn(n)},O=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",x="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===I||e===x)return-1;if(e===I||t===x)return 1;var n=G(t),r=G(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},k=function(t,e){return t===e?0:t<e?-1:1},P=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(s.G)(e))},N=function(t){if("object"!=typeof t||null===t)return Object(s.G)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(s.G)(e[i]),r+=":",r+=N(t[e[i]]);return r+"}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function j(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var D,M,F,L,U,V,q,B,H,z,W=function(t){var e,n,r,i,o;Object(s.e)(!O(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(o=0;o<64;o+=8){var l=parseInt(u.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},Q=new RegExp("^-?(0*)\\d{1,10}$"),G=function(t){if(Q.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},K=function(t){try{t()}catch(e){setTimeout((function(){throw T("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},$=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Y=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),X=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(s.E)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(s.E)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(s.E)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),Z="firebaseio.com",J="websocket",tt="long_polling",et=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(s.e)("string"==typeof t,"typeof type must == string"),Object(s.e)("object"==typeof e,"typeof params must == object"),t===J)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==tt)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return j(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),nt=function(t,e){var n=rt(t),r=n.namespace;return"firebase.com"===n.domain&&S(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&T("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new et(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new Y(n.pathString)}},rt=function(t){var e="",n="",r="",i="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.h)(t.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):T("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:s}},it=/[\[\].#$\/\u0000-\u001F\u007F]/,ot=/[\[\].#$\u0000-\u001F\u007F]/,st=10485760,at=function(t){return"string"==typeof t&&0!==t.length&&!it.test(t)},ut=function(t){return"string"==typeof t&&0!==t.length&&!ot.test(t)},ct=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!O(t)||t&&"object"==typeof t&&Object(s.i)(t,".sv")},lt=function(t,e,n,r,i){i&&void 0===n||ht(Object(s.m)(t,e,i),n,r)},ht=function(t,e,n){var r=n instanceof Y?new X(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(O(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>st/3&&Object(s.E)(e)>st)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(j(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!at(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),ht(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ft=function(t,e,n,r,i){if(!i||void 0!==n){var o=Object(s.m)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];j(n,(function(t,e){var n=new Y(t);if(ht(o,e,r.child(n)),".priority"===n.getBack()&&!ct(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!at(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Y.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,a)}},dt=function(t,e,n,r){if(!r||void 0!==n){if(O(n))throw new Error(Object(s.m)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ct(n))throw new Error(Object(s.m)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(s.m)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},gt=function(t,e,n,r){if(!(r&&void 0===n||at(n)))throw new Error(Object(s.m)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},yt=function(t,e,n,r){if(!(r&&void 0===n||ut(n)))throw new Error(Object(s.m)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},mt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),yt(t,e,n,r)},vt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},_t=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!at(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ut(t)}(r))throw new Error(Object(s.m)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},bt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(s.m)(t,e,r)+"must be a boolean.")},wt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(s.H)("OnDisconnect.cancel",0,1,arguments.length),Object(s.I)("OnDisconnect.cancel",1,t,!0);var e=new s.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(s.H)("OnDisconnect.remove",0,1,arguments.length),vt("OnDisconnect.remove",this.path_),Object(s.I)("OnDisconnect.remove",1,t,!0);var e=new s.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(s.H)("OnDisconnect.set",1,2,arguments.length),vt("OnDisconnect.set",this.path_),lt("OnDisconnect.set",1,t,this.path_,!1),Object(s.I)("OnDisconnect.set",2,e,!0);var n=new s.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(s.H)("OnDisconnect.setWithPriority",2,3,arguments.length),vt("OnDisconnect.setWithPriority",this.path_),lt("OnDisconnect.setWithPriority",1,t,this.path_,!1),dt("OnDisconnect.setWithPriority",2,e,!1),Object(s.I)("OnDisconnect.setWithPriority",3,n,!0);var r=new s.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(s.H)("OnDisconnect.update",1,2,arguments.length),vt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ft("OnDisconnect.update",1,t,this.path_,!1),Object(s.I)("OnDisconnect.update",2,e,!0);var i=new s.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Ct=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(s.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Et=(D="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",M=0,F=[],function(t){var e,n=t===M;M=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=D.charAt(t%64),t=Math.floor(t/64);Object(s.e)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===F[e];e--)F[e]=0;F[e]++}else for(e=0;e<12;e++)F[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=D.charAt(F[e]);return Object(s.e)(20===i.length,"nextPushId: Length should be 20."),i}),St=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Tt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new St(I,t),r=new St(I,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return St.MIN},t}(),Ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return L},set:function(t){L=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(s.f)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return St.MIN},e.prototype.maxPost=function(){return new St(x,L)},e.prototype.makePost=function(t,e){return Object(s.e)("string"==typeof t,"KeyIndex indexValue must always be a string."),new St(t,L)},e.prototype.toString=function(){return".key"},e}(Tt),It=new Ot,xt=function(t){return"number"==typeof t?"number:"+W(t):"string:"+t},At=function(t){if(t.isLeafNode()){var e=t.val();Object(s.e)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(s.i)(e,".sv"),"Priority must be a string or number.")}else Object(s.e)(t===U||t.isEmpty(),"priority of unexpected type.");Object(s.e)(t===U||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},kt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(s.e)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),At(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return V},set:function(t){V=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(s.e)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+xt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?W(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(s.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return Object(s.e)(i>=0,"Unknown leaf type: "+n),Object(s.e)(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Pt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return St.MIN},e.prototype.maxPost=function(){return new St(x,new kt("[PRIORITY-POST]",B))},e.prototype.makePost=function(t,e){var n=q(t);return new St(e,new kt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Tt)),Nt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Rt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Dt.EMPTY_NODE,this.right=null!=o?o:Dt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Dt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Dt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),jt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Rt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Dt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Rt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Nt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Nt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Nt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Nt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new jt,t}(),Mt=Math.log(2),Ft=function(){function t(t){this.count=parseInt(Math.log(t+1)/Mt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Lt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Rt(s,o.node,Rt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Rt(s,o.node,Rt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Rt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Rt.BLACK):(a(h,Rt.BLACK),a(h,Rt.RED))}return o}(new Ft(t.length));return new Dt(r||e,o)},Ut={},Vt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(s.e)(Ut&&Pt,"ChildrenNode.ts has not been loaded"),H=H||new t({".priority":Ut},{".priority":Pt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(s.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Dt?e:null},t.prototype.hasIndex=function(t){return Object(s.i)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(s.e)(e!==It,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(St.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?Lt(i,e.getCompare()):Ut;var l=e.toString(),h=Object(o.a)({},this.indexSet_);h[l]=e;var f=Object(o.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(s.B)(this.indexes_,(function(t,i){var o=Object(s.D)(r.indexSet_,i);if(Object(s.e)(o,"Missing index implementation for "+i),t===Ut){if(o.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(St.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Lt(a,o.getCompare())}return Ut}var l=n.get(e.name),h=t;return l&&(h=h.remove(new St(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(s.B)(this.indexes_,(function(t){if(t===Ut)return t;var r=n.get(e.name);return r?t.remove(new St(e.name,r)):t})),this.indexSet_)},t}();function qt(t,e){return A(t.name,e.name)}function Bt(t,e){return A(t,e)}var Ht=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&At(this.priorityNode_),this.children_.isEmpty()&&Object(s.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return z||(z=new t(new Dt(Bt),null,Vt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||z},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?z:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(s.e)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new St(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?z:this.priorityNode_;return new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(s.e)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Pt,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+xt(this.getPriority().val())+":"),this.forEachChild(Pt,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new St(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new St(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new St(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,St.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,St.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===zt?-1:0},t.prototype.withIndex=function(e){if(e===It||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===It||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Pt),r=e.getIterator(Pt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===It?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),zt=new(function(t){function e(){return t.call(this,new Dt(Bt),Ht.EMPTY_NODE,Vt.Default)||this}return Object(o.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Ht.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Ht));function Wt(t,e){if(void 0===e&&(e=null),null===t)return Ht.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(s.e)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new kt(t,Wt(e));if(t instanceof Array){var n=Ht.EMPTY_NODE;return j(t,(function(e,r){if(Object(s.i)(t,e)&&"."!==e.substring(0,1)){var i=Wt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Wt(e))}var r=[],i=!1;if(j(t,(function(t,e){if("."!==t.substring(0,1)){var n=Wt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new St(t,n)))}})),0===r.length)return Ht.EMPTY_NODE;var o=Lt(r,qt,(function(t){return t.name}),Bt);if(i){var a=Lt(r,Pt.getCompare());return new Ht(o,Wt(e),new Vt({".priority":a},{".priority":Pt}))}return new Ht(o,Wt(e),Vt.Default)}Object.defineProperties(St,{MIN:{value:new St(I,Ht.EMPTY_NODE)},MAX:{value:new St(x,zt)}}),Ot.__EMPTY_NODE=Ht.EMPTY_NODE,kt.__childrenNodeConstructor=Ht,U=zt,B=zt,q=Wt;var Qt,Gt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return St.MIN},e.prototype.maxPost=function(){return St.MAX},e.prototype.makePost=function(t,e){var n=Wt(t);return new St(e,n)},e.prototype.toString=function(){return".value"},e}(Tt)),Kt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(s.e)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Wt(t),r=Ht.EMPTY_NODE.updateChild(this.indexPath_,n);return new St(e,r)},e.prototype.maxPost=function(){var t=Ht.EMPTY_NODE.updateChild(this.indexPath_,zt);return new St(x,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Tt),$t=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(s.H)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(s.H)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(s.H)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(s.H)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(s.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),yt("DataSnapshot.child",1,e,!1);var n=new Y(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Pt)},t.prototype.hasChild=function(t){Object(s.H)("DataSnapshot.hasChild",1,1,arguments.length),yt("DataSnapshot.hasChild",1,t,!1);var e=new Y(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(s.H)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(s.H)("DataSnapshot.forEach",1,1,arguments.length),Object(s.I)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Pt))}))},t.prototype.hasChildren=function(){return Object(s.H)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(s.H)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(s.H)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Yt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(s.G)(this.snapshot.exportVal())},t}(),Xt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Zt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Yt("value",this,new $t(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(s.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Xt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Jt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(s.i)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Xt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(s.e)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Yt(t.type,this,new $t(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(s.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),te=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(s.e)(Qt,"Reference.ts has not been loaded"),Qt},set:function(t){Qt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===It){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==I)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==x)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Pt){if(null!=e&&!ct(e)||null!=n&&!ct(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(s.e)(t.getIndex()instanceof Kt||t.getIndex()===Gt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(s.H)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(s.H)("Query.on",2,4,arguments.length),pt("Query.on",1,e,!1),Object(s.I)("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Zt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Jt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(s.H)("Query.off",0,3,arguments.length),pt("Query.off",1,t,!0),Object(s.I)("Query.off",2,e,!0),Object(s.J)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new Zt(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Jt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;Object(s.H)("Query.once",1,4,arguments.length),pt("Query.once",1,e,!1),Object(s.I)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new s.a;c.promise.catch((function(){}));var l=function(t){u&&(u=!1,o.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,(function(t){o.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(Object(s.H)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(s.H)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(s.H)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');yt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Y(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Kt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(s.H)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(It);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(s.H)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Pt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(s.H)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Gt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(s.H)("Query.startAt",0,2,arguments.length),lt("Query.startAt",1,e,this.path,!0),gt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(s.H)("Query.endAt",0,2,arguments.length),lt("Query.endAt",1,e,this.path,!0),gt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(s.H)("Query.equalTo",1,2,arguments.length),lt("Query.equalTo",1,t,this.path,!1),gt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(s.H)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(s.H)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=N(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(s.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(s.I)(t,3,r.cancel,!0),r.context=n,Object(s.J)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(s.m)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),ee=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ne=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),re=function(t,e,n){return t&&"object"==typeof t?(Object(s.e)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?ie(t[".sv"],e,n):"object"==typeof t[".sv"]?oe(t[".sv"],e):void Object(s.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},ie=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(s.e)(!1,"Unexpected server value: "+t)}},oe=function(t,e,n){t.hasOwnProperty("increment")||Object(s.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(s.e)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(s.e)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},se=function(t,e,n,r){return ue(e,new ne(n,t),r)},ae=function(t,e,n){return ue(t,new ee(e),n)};function ue(t,e,n){var r,i=t.getPriority().val(),o=re(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=re(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new kt(a,Wt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new kt(o))),u.forEachChild(Pt,(function(t,i){var o=ue(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var ce,le,he=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Pt,(function(t,e){n.remember(new Y(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new Y(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),fe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),de=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(s.e)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),pe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=fe.ACK_USER_WRITE,this.source=de.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(s.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Y(e));return new t(Y.Empty,n,this.revert)}return Object(s.e)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),ge=function(){function t(t,e){void 0===e&&(ce||(ce=new Dt(k)),e=ce),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return j(e,(function(t,e){n=n.set(new Y(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Y.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new Y(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(Y.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Y.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Y.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(Y.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),ye=function(){function t(t,e){this.source=t,this.path=e,this.type=fe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Y.Empty):new t(this.source,this.path.popFront())},t}(),me=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=fe.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Y.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ve=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=fe.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Y(e));return n.isEmpty()?null:n.value?new me(this.source,Y.Empty,n.value):new t(this.source,Y.Empty,n)}return Object(s.e)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),_e=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),be=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new _e(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new _e(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new _e(Ht.EMPTY_NODE,!1,!1),new _e(Ht.EMPTY_NODE,!1,!1)),t}(),we=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),Ce=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){Object(s.e)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(we.childRemovedChange(e,a)):Object(s.e)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(we.childAddedChange(e,n)):o.trackChildChange(we.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Pt,(function(t,r){e.hasChild(t)||n.trackChildChange(we.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(Pt,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(we.childChangedChange(e,r,i))}else n.trackChildChange(we.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Ht.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ee=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(s.e)(e===we.CHILD_ADDED||e===we.CHILD_CHANGED||e===we.CHILD_REMOVED,"Only child changes supported for tracking"),Object(s.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===we.CHILD_ADDED&&i===we.CHILD_REMOVED)this.changeMap.set(n,we.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===we.CHILD_REMOVED&&i===we.CHILD_ADDED)this.changeMap.delete(n);else if(e===we.CHILD_REMOVED&&i===we.CHILD_CHANGED)this.changeMap.set(n,we.childRemovedChange(n,r.oldSnap));else if(e===we.CHILD_CHANGED&&i===we.CHILD_ADDED)this.changeMap.set(n,we.childAddedChange(n,t.snapshotNode));else{if(e!==we.CHILD_CHANGED||i!==we.CHILD_CHANGED)throw Object(s.f)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,we.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Se=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Te=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new _e(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Oe=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Ie=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(s.e)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(s.e)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,a,u=new Ee;if(n.type===fe.OVERWRITE){var c=n;c.source.fromUser?o=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(s.e)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),o=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===fe.MERGE){var l=n;l.source.fromUser?o=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(s.e)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===fe.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==fe.LISTEN_COMPLETE)throw Object(s.f)("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,o,f),new Oe(o,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(we.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(s.e)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Ht?c:Ht.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){Object(s.e)(1===e.getLength(),"Can't have a priority with additional path components");var d=o.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):o.getNode()}else{var g=e.popFront(),y=void 0;if(o.isCompleteForChild(f)){u=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),u);y=null!=m?o.getNode().getImmediateChild(f).updateChild(g,m):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());a=null!=y?this.filter_.updateChild(o.getNode(),f,y,g,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),d=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,Se,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),g=new Te(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Te(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):Ht.EMPTY_NODE}if(f.equals(d))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:ge.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new Y(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new Y(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=ge.Empty;return a.getNode().forEachChild(It,(function(t,e){u=u.set(new Y(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=ge.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Se,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new Te(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(s.e)(h instanceof Ht,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Ht.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Y.Empty),t.updateEventSnap(c,o,this.filter_.filtersNodes())},t}(),xe=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===we.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(we.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,we.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,we.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,we.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,we.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,we.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(s.f)("Should only compare child_ events.");var n=new St(t.childName,t.snapshotNode),r=new St(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Ae=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Ce(n.getIndex()),i=n.getNodeFilter();this.processor_=new Ie(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Ht.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Ht.EMPTY_NODE,s.getNode(),null),c=new _e(a,o.isFullyInitialized(),r.filtersNodes()),l=new _e(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new be(l,c),this.eventGenerator_=new xe(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(s.e)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===fe.MERGE&&null!==t.source.queryId&&(Object(s.e)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(s.e)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(s.e)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Pt,(function(t,e){n.push(we.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(we.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),ke=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(s.e)(le,"Reference.ts has not been loaded"),le},set:function(t){Object(s.e)(!le,"__referenceConstructor has already been defined"),le=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(s.e)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(o.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Ht?(a=n.calcCompleteEventChildren(r),u=!1):(a=Ht.EMPTY_NODE,u=!1);var c=new be(new _e(a,u,!1),new _e(r,i,!1));s=new Ae(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(o.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=Object(o.e)(f.value,2),g=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(g),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(y){i={error:y}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}else(d=this.views.get(a))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(o.h)(this.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=Object(o.h)(this.views.values()),s=i.next();!s.done;s=i.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(o.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Pe=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new ge(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Y.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new ge(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return j(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,ge.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Y.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Pt,(function(e,n){t.push(new St(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new St(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new ge(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(Object(s.e)(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(e.child(n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}(Y.Empty,this.writeTree_,t)},t.Empty=new t(new ge(null)),t}(),Ne=function(){function t(){this.visibleWrites_=Pe.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Re(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(s.e)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(s.e)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));Object(s.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(o=!0)),a--}return!!i&&(o?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):j(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(Y.Empty)?t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e).apply(n||Ht.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite(Y.Empty)?a.apply(n||Ht.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Ht.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Pt,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Pt,(function(t,e){var r=i.childCompoundWrite(new Y(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(s.e)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(Y.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Y.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Pe.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,u=void 0;if(o.snap)n.contains(a)?(u=Y.relativePath(n,a),r=r.addWrite(u,o.snap)):a.contains(n)&&(u=Y.relativePath(a,n),r=r.addWrite(Y.Empty,o.snap.getChild(u)));else{if(!o.children)throw Object(s.f)("WriteRecord should have .snap or .children");if(n.contains(a))u=Y.relativePath(n,a),r=r.addWrites(u,o.children);else if(a.contains(n))if((u=Y.relativePath(a,n)).isEmpty())r=r.addWrites(Y.Empty,o.children);else{var c=Object(s.D)(o.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite(Y.Empty,l)}}}}}return r},t}(),Re=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),je=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=ge.Empty,this.pendingWriteTree_=new Ne,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new me(de.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=ge.fromObject(e);return this.applyOperationToSyncPoints_(new ve(de.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=ge.Empty;return null!=n.snap?r=r.set(Y.Empty,!0):j(n.children,(function(t,e){r=r.set(new Y(t),e)})),this.applyOperationToSyncPoints_(new pe(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new me(de.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=ge.fromObject(e);return this.applyOperationToSyncPoints_(new ve(de.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ye(de.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Y.relativePath(s,e),c=new me(de.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Y.relativePath(s,e),c=ge.fromObject(n),l=new ve(de.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=Y.relativePath(o,e),u=new ye(de.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=Y.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var a,u=this.syncPointTree_.get(r);u?(o=o||u.hasCompleteView(),i=i||u.getCompleteServerCache(Y.Empty)):(u=new ke,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Ht.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(Y.Empty);n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(s.e)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!c&&!o){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var g=d[p],y=g.getQuery(),m=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),m.hashFn,m.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=Y.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),j(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(s.e)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),j(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Ht.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(s.e)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Y(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(s.e)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Y.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Y.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Y.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Y.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Y.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),De=function(){function t(){this.rootNode_=Ht.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Me=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(s.i)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(s.k)(this.counters_)},t}(),Fe=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Me),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Le=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.a)({},t);return this.last_&&j(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Ue=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Le(t);var n=1e4+2e4*Math.random();$(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;j(e,(function(e,i){i>0&&Object(s.i)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),$(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ve=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new qe(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),qe=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();v&&w("event: "+e.toString()),K(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Be=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(s.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.f)(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(s.e)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),He=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(s.e)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Be),ze=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(s.u)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(s.e)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Be),We=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&K((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Qe="start",Ge="close",Ke=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=C(t),this.stats_=Fe.getCollection(e),this.urlFn=function(t){return e.connectionURL(tt,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new We(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(s.w)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new $e((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,5),i=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Qe)n.id=s,n.password=a;else{if(i!==Ge)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,2),i=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Z)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(s.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(s.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(s.h)(e),r=R(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(s.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(s.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),$e=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(s.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=g(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){w("frame writing exception"),u.stack&&w(u.stack),w(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||w("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(s.w)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){w("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),Ye="";function Xe(t){Ye=t}var Ze=null;"undefined"!=typeof MozWebSocket?Ze=MozWebSocket:"undefined"!=typeof WebSocket&&(Ze=WebSocket);var Je=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=C(this.connId),this.stats_=Fe.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(s.w)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Z)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(J,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if(Object(s.w)()){var r={headers:{"User-Agent":"Firebase/5/"+Ye+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,o=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;o&&(r.proxy={origin:o}),this.mySock=new Ze(this.connURL,[],r)}else this.mySock=new Ze(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ze&&!t.forceDisallow_},t.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(s.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(s.e)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(s.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),tn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Ke,Je]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=Je&&Je.isAvailable(),s=i&&!Je.previouslyFailed();if(e.webSocketOnly&&(i||T("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Je];else{var a=this.transports_=[];try{for(var u=Object(o.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),en=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=C("c:"+this.id+":"),this.transportManager_=new tn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=$((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=P("t",t),n=P("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=P("t",t),n=P("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=P("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&T("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),$((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),nn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),rn=1e3,on=function(t){function e(n,r,i,o,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=C("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingPutCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=rn,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(s.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),He.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&ze.getInstance().on("online",l.onOnline_,l),l}return Object(o.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(s.G)(i)),Object(s.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Object(s.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(s.e)(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(s.i)(t,"w")){var n=Object(s.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();T("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(s.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(s.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(s.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(s.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(s.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(s.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=rn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(s.e)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(t){c?w("getToken() completed but was canceled"):(w("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new en(o,a.repoInfo_,a.applicationId_,n,r,i,(function(t){T(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),u))})).then(null,(function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&T(e),h())}))}},e.prototype.interrupt=function(t){w("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){w("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(s.s)(this.interruptReasons_)&&(this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return N(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Y(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){w("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=Object(o.h)(this.listens.values()),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(s.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Ye.replace(/\./g,"-")]=1,Object(s.u)()?t["framework.cordova"]=1:Object(s.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ze.getInstance().currentlyOnline();return Object(s.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(nn),sn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=C("p:rest:"),i.listens_={},i}return Object(o.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(s.e)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),Object(s.D)(o.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(s.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(s.A)(u.responseText)}catch(e){T("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&T("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()}))},e}(nn),an="repo_interrupt",un=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ve,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new he,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Fe.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new sn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(s.G)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new on(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=Fe.getOrCreateReporter(this.repoInfo_,(function(){return new Ue(t.stats_,t.server_)})),this.transactionsInit_(),this.infoData_=new De,this.infoSyncTree_=new je({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new je({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Y(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Y(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=Object(s.B)(e,(function(t){return Wt(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=Wt(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(s.B)(e,(function(t){return Wt(t)}));o=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=Wt(e);o=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;j(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new Y("/.info/"+t),r=Wt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Wt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=ae(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||T("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(j(e,(function(e,n){i=!1,s[e]=se(t.child(e),Wt(n),r.serverSyncTree_,o)})),i)w("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||T("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),j(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new he;this.onDisconnect_.forEachTree(Y.Empty,(function(r,i){var o=se(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(Y.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new he,this.eventQueue_.raiseEventsForChangedPath(Y.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Wt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Wt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(s.s)(e))return w("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&j(e,(function(e,n){var i=Wt(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(an)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(an)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Le(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);j(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),w.apply(void 0,Object(o.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&K((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new bn(this))},enumerable:!1,configurable:!0}),t}(),cn=function(){function t(e){this.indexedFilter_=new Ce(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new St(e,n))||(n=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ht.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Ht.EMPTY_NODE);var i=this;return e.forEachChild(Pt,(function(t,e){i.matches(new St(t,e))||(r=r.updateImmediateChild(t,Ht.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ln=function(){function t(t){this.rangedFilter_=new cn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new St(e,n))||(n=Ht.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Ht.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Ht.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Ht.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var u=t;Object(s.e)(u.numChildren()===this.limit_,"");var c=new St(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:o(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(we.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(we.childRemovedChange(e,f));var g=u.updateImmediateChild(e,Ht.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(we.childAddedChange(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&o(l,c)>=0?(null!=i&&(i.trackChildChange(we.childRemovedChange(l.name,l.node)),i.trackChildChange(we.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Ht.EMPTY_NODE)):t},t}(),hn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(s.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(s.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(s.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(s.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(s.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Pt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Pt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new Ce(this.getIndex()):this.hasLimit()?new ln(this):new cn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Pt?e=n.PRIORITY_INDEX:this.index_===Gt?e=n.VALUE_INDEX:this.index_===It?e=n.KEY_INDEX:(Object(s.e)(this.index_ instanceof Kt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(s.G)(e),this.startSet_&&(r[n.START_AT]=Object(s.G)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(s.G)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(s.G)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(s.G)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),fn=function(t){function e(e,n){if(!(e instanceof un))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,hn.DEFAULT,!1)||this}return Object(o.c)(e,t),e.prototype.getKey=function(){return Object(s.H)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(s.H)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Y||(null===this.path.getFront()?mt("Reference.child",1,t,!1):yt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(s.H)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(s.H)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(s.H)("Reference.set",1,2,arguments.length),vt("Reference.set",this.path),lt("Reference.set",1,t,this.path,!1),Object(s.I)("Reference.set",2,e,!0);var n=new s.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(s.H)("Reference.update",1,2,arguments.length),vt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ft("Reference.update",1,t,this.path,!1),Object(s.I)("Reference.update",2,e,!0);var i=new s.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(s.H)("Reference.setWithPriority",2,3,arguments.length),vt("Reference.setWithPriority",this.path),lt("Reference.setWithPriority",1,t,this.path,!1),dt("Reference.setWithPriority",2,e,!1),Object(s.I)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new s.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(s.H)("Reference.remove",0,1,arguments.length),vt("Reference.remove",this.path),Object(s.I)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(s.H)("Reference.transaction",1,3,arguments.length),vt("Reference.transaction",this.path),Object(s.I)("Reference.transaction",1,t,!1),Object(s.I)("Reference.transaction",2,e,!0),bt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new s.a;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new Ct(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(s.H)("Reference.setPriority",1,2,arguments.length),vt("Reference.setPriority",this.path),dt("Reference.setPriority",1,t,!1),Object(s.I)("Reference.setPriority",2,e,!0);var n=new s.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(s.H)("Reference.push",0,2,arguments.length),vt("Reference.push",this.path),lt("Reference.push",1,t,this.path,!0),Object(s.I)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Et(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return vt("Reference.onDisconnect",this.path),new wt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(te);te.__referenceConstructor=fn,ke.__referenceConstructor=fn;var dn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),pn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new dn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof Y?e:new Y(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(s.D)(r.node_.children,i)||new dn),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(s.e)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;j(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new Y(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(s.i)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),gn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});un.MAX_TRANSACTION_RETRIES_=25,un.prototype.transactionsInit_=function(){this.transactionQueueTree_=new pn},un.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new fn(this,t);o.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:g(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new $t(a.currentInputSnapshot,new fn(this,a.path),Pt);a.onComplete(null,!1,l)}}else{ht("transaction failed: Data returned ",c,a.path),a.status=gn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&Object(s.i)(c,".priority")?(d=Object(s.D)(c,".priority"),Object(s.e)(ct(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||Ht.EMPTY_NODE).getPriority().val(),d=d;var p=this.generateServerValues(),y=Wt(c,d),m=ae(y,u,p);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(t,m,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_()}},un.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ht.EMPTY_NODE},un.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(s.e)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===gn.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},un.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(s.e)(c.status===gn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=gn.SENT,c.retryCount++;var l=Y.relativePath(t,c.path);o=o.updateChild(l,c.currentOutputSnapshotRaw)}var h=o.val(!0),f=t;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=gn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new fn(n,e[s].path),c=new $t(a,u,Pt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)K(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===gn.SENT_NEEDS_ABORT?gn.NEEDS_ABORT:gn.RUN;else for(T("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=gn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}}),a)},un.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},un.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===gn.RUN})).map((function(t){return t.currentWriteId})),o=0;o<t.length;o++){var a=t[o],u=Y.relativePath(e,a.path),c=!1,l=void 0;if(Object(s.e)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===gn.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===gn.RUN)if(a.retryCount>=un.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[o].update(h.val());if(void 0!==f){ht("transaction failed: Data returned ",f,a.path);var d=Wt(f);"object"==typeof f&&null!=f&&Object(s.i)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,g=this.generateServerValues(),y=ae(d,h,g);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[o].status=gn.COMPLETED,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete))if("nodata"===l){var m=new fn(this,t[o].path),v=new $t(t[o].currentInputSnapshot,m,Pt);n.push(t[o].onComplete.bind(null,null,!1,v))}else n.push(t[o].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)K(n[o]);this.sendReadyTransactions_()}},un.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},un.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},un.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},un.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==gn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},un.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},un.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===gn.SENT_NEEDS_ABORT||(e[o].status===gn.SENT?(Object(s.e)(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=gn.SENT_NEEDS_ABORT,e[o].abortReason="set"):(Object(s.e)(e[o].status===gn.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)K(n[o])}};var yn,mn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(w("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';T(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),vn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),_n=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return yn||(yn=new t),yn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=Object(o.h)(Object.keys(this.repos_)),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=Object(o.h)(Object.keys(this.repos_)),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new et(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new vn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||S("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),w("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=nt(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=nt(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new vn:new mn(t,e);return _t("Invalid Firebase Database URL",1,s),s.path.isEmpty()||S("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(s.D)(this.repos_,t.app.name);e&&Object(s.D)(e,t.key)===t||S("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(s.D)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(s.D)(r,t.toURLString());return i&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new un(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),bn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(o.b)(e,void 0,void 0,(function(){return Object(o.d)(this,(function(t){return this.checkDeleted_("delete"),_n.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof un||S("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new fn(this.repo_,Y.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?S("Cannot call useEmulator() after instance has already been initialized."):_n.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(s.H)("database.ref",0,1,arguments.length),t instanceof fn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(s.H)(e,1,1,arguments.length);var n=nt(t,this.repo_.repoInfo_.nodeAdmin);_t(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||S(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&S("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(s.H)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(s.H)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),wn=Object.freeze({__proto__:null,forceLongPolling:function(){Je.forceDisallow(),Ke.forceAllow()},forceWebSockets:function(){Ke.forceDisallow()},isWebSocketsAvailable:function(){return Je.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Xe(t.version);var a=new u.c("auth-internal",new u.b("database-standalone"));return a.setComponent(new u.a("auth-internal",(function(){return r}),"PRIVATE")),{instance:_n.getInstance().databaseFromApp(e,a,n,s),namespace:i}}}),Cn=on;on.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},on.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var En=Object.freeze({__proto__:null,DataConnection:Cn,RealTimeConnection:en,hijackHash:function(t){var e=on.prototype.put;return on.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){on.prototype.put=e}},ConnectionTarget:et,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){_n.getInstance().forceRestClient(t)}}),Sn=bn.ServerValue;function Tn(e){Xe(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new u.a("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return _n.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:fn,Query:te,Database:bn,DataSnapshot:$t,enableLogging:b,INTERNAL:wn,ServerValue:Sn,TEST_ACCESS:En}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.7.1"),Object(s.w)()&&(t.exports=n)}Tn(i.a)}).call(this,n("3UD+")(t))},mAIw:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return h}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return d}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return S})),n.d(e,"c",(function(){return E})),n.d(e,"d",(function(){return F})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"i",(function(){return N})),n.d(e,"j",(function(){return L})),n.d(e,"k",(function(){return l})),n.d(e,"l",(function(){return h})),n.d(e,"m",(function(){return B})),n.d(e,"n",(function(){return d})),n.d(e,"o",(function(){return P})),n.d(e,"p",(function(){return y})),n.d(e,"q",(function(){return m})),n.d(e,"r",(function(){return _})),n.d(e,"s",(function(){return j})),n.d(e,"t",(function(){return b})),n.d(e,"u",(function(){return p})),n.d(e,"v",(function(){return g})),n.d(e,"w",(function(){return C})),n.d(e,"x",(function(){return v})),n.d(e,"y",(function(){return w})),n.d(e,"z",(function(){return k})),n.d(e,"A",(function(){return I})),n.d(e,"B",(function(){return D})),n.d(e,"C",(function(){return M})),n.d(e,"D",(function(){return R})),n.d(e,"E",(function(){return Q})),n.d(e,"F",(function(){return W})),n.d(e,"G",(function(){return x})),n.d(e,"H",(function(){return q})),n.d(e,"I",(function(){return H})),n.d(e,"J",(function(){return z}));var r=n("mAIw"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _(){return d().indexOf("Electron/")>=0}function b(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function C(){return!1}var E=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return Object(r.c)(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?T(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new E(i,a,r);return u},t}();function T(t,e){return t.replace(O,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var O=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var A=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},k=function(t){var e=A(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},P=function(t){var e=A(t).claims;return"object"==typeof e&&!0===e.admin};function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function j(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function M(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var F=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function L(t,e){var n=new U(t,e);return n.subscribe.bind(n)}var U=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function V(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function B(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(B(t,e,r)+"must be a valid function.")}function z(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(B(t,e,r)+"must be a valid context object.")}var W=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},Q=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},xsWp:function(t,e,n){"use strict";n.r(e),n.d(e,"__PRIVATE_registerFirestore",(function(){return zf}));var r=n("mAIw"),i=n("zIRd"),o=n("q/0M"),s=n("qOnz"),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var c,l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},h=h||{},f=l||self;function d(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function g(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var m="closure_uid_"+(1e9*Math.random()>>>0),v=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:b).apply(null,arguments)}function C(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now;function S(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function T(){this.j=this.j,this.i=this.i}T.prototype.j=!1,T.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++v)}(this)},T.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var O=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},I=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function x(t){return Array.prototype.concat.apply([],arguments)}function A(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function k(t){return/^[\s\xa0]*$/.test(t)}var P,N=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function R(t,e){return-1!=t.indexOf(e)}function j(t,e){return t<e?-1:t>e?1:0}t:{var D=f.navigator;if(D){var M=D.userAgent;if(M){P=M;break t}}P=""}function F(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function L(t){var e={};for(var n in t)e[n]=t[n];return e}var U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<U.length;o++)n=U[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function q(t){return q[" "](t),t}q[" "]=d;var B,H,z=R(P,"Opera"),W=R(P,"Trident")||R(P,"MSIE"),Q=R(P,"Edge"),G=Q||W,K=R(P,"Gecko")&&!(R(P.toLowerCase(),"webkit")&&!R(P,"Edge"))&&!(R(P,"Trident")||R(P,"MSIE"))&&!R(P,"Edge"),$=R(P.toLowerCase(),"webkit")&&!R(P,"Edge");function Y(){var t=f.document;return t?t.documentMode:void 0}t:{var X="",Z=(H=P,K?/rv:([^\);]+)(\)|;)/.exec(H):Q?/Edge\/([\d\.]+)/.exec(H):W?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(H):$?/WebKit\/(\S+)/.exec(H):z?/(?:Version)[ \/]?(\S+)/.exec(H):void 0);if(Z&&(X=Z?Z[1]:""),W){var J=Y();if(null!=J&&J>parseFloat(X)){B=String(J);break t}}B=X}var tt={};function et(t){return function(t,e){var n=tt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=N(String(B)).split("."),r=N(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=j(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||j(0==s[2].length,0==a[2].length)||j(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var nt=f.document&&W&&(Y()||parseInt(B,10))||void 0,rt=!W||9<=Number(nt),it=W&&!et("9"),ot=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{f.addEventListener("test",d,e),f.removeEventListener("test",d,e)}catch(n){}return t}();function st(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function at(t,e){if(st.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(K){t:{try{q(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ut[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}st.prototype.b=function(){this.defaultPrevented=!0},S(at,st);var ut={2:"touch",3:"pen",4:"mouse"};at.prototype.b=function(){at.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,it)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(sr){}};var ct="closure_listenable_"+(1e6*Math.random()|0),lt=0;function ht(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++lt,this.Y=this.Z=!1}function ft(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function dt(t){this.src=t,this.a={},this.b=0}function pt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=O(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ft(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function gt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}dt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=gt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ht(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var yt="closure_lm_"+(1e6*Math.random()|0),mt={};function vt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Ot(r),e&&e[ct]?e.wa(n,r,y(i)?!!i.capture:!!i,o):_t(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)vt(t,e[o],n,r,i);return null}return n=Ot(n),t&&t[ct]?t.va(e,n,y(r)?!!r.capture:!!r,i):_t(t,e,n,!1,r,i)}function _t(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=y(i)?!!i.capture:!!i;if(s&&!rt)return null;var a=St(t);if(a||(t[yt]=a=new dt(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Et,e=rt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ot||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(wt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function bt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ct])pt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(wt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=St(e))?(pt(n,t),0==n.b&&(n.src=null,e[yt]=null)):ft(t)}}}function wt(t){return t in mt?mt[t]:mt[t]="on"+t}function Ct(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&bt(t),n.call(r,e)}function Et(t,e){if(t.Y)return!0;if(!rt){if(!e)t:{e=["window","event"];for(var n=f,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ct(t,e=new at(e,this))}return Ct(t,new at(e,this))}function St(t){return(t=t[yt])instanceof dt?t:null}var Tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ot(t){return"function"==p(t)?t:(t[Tt]||(t[Tt]=function(e){return t.handleEvent(e)}),t[Tt])}function It(){T.call(this),this.c=new dt(this),this.J=this,this.C=null}function xt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&pt(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}S(It,T),It.prototype[ct]=!0,(c=It.prototype).addEventListener=function(t,e,n,r){vt(this,t,e,n,r)},c.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=y(i)?!!i.capture:!!i,r=Ot(r),e&&e[ct]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=gt(s=e.a[n],r,i,o))&&(ft(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=St(e))&&(n=e.a[n.toString()],e=-1,n&&(e=gt(n,r,i,o)),(r=-1<e?n[e]:null)&&bt(r))}(this,t,e,n,r)},c.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new st(t,n);else if(t instanceof st)t.target=t.target||n;else{var i=t;V(t=new st(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=xt(s,r,!0,t)&&i}if(i=xt(s=t.a=n,r,!0,t)&&i,i=xt(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=xt(s=t.a=e[o],r,!1,t)&&i;return i},c.G=function(){if(It.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ft(n[r]);delete e.a[t],e.b--}}this.C=null},c.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},c.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var At=f.JSON.stringify;function kt(){this.b=this.a=null}var Pt,Nt=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new jt}),(function(t){t.reset()}),100);function Rt(){var t=Lt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function jt(){this.next=this.b=this.a=null}function Dt(t){f.setTimeout((function(){throw t}),0)}function Mt(t,e){Pt||function(){var t=f.Promise.resolve(void 0);Pt=function(){t.then(Ut)}}(),Ft||(Pt(),Ft=!0),Lt.add(t,e)}kt.prototype.add=function(t,e){var n=Nt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},jt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},jt.prototype.reset=function(){this.next=this.b=this.a=null};var Ft=!1,Lt=new kt;function Ut(){for(var t;t=Rt();){try{t.a.call(t.b)}catch(n){Dt(n)}var e=Nt;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Ft=!1}function Vt(t,e){It.call(this),this.b=t||1,this.a=e||f,this.f=w(this.Ya,this),this.g=E()}function qt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Bt(t,e,n){if("function"==p(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:f.setTimeout(t,e||0)}function Ht(t){t.a=Bt((function(){t.a=null,t.c&&(t.c=!1,Ht(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}S(Vt,It),(c=Vt.prototype).aa=!1,c.M=null,c.Ya=function(){if(this.aa){var t=E()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(qt(this),this.start()))}},c.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=E())},c.G=function(){Vt.S.G.call(this),qt(this),delete this.a};var zt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ht(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(f.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(T);function Wt(t){T.call(this),this.b=t,this.a={}}S(Wt,T);var Qt=[];function Gt(t,e,n,r){Array.isArray(n)||(n&&(Qt[0]=n.toString()),n=Qt);for(var i=0;i<n.length;i++){var o=vt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Kt(t){F(t.a,(function(t,e){this.a.hasOwnProperty(e)&&bt(t)}),t),t.a={}}function $t(){this.a=!0}function Yt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return At(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Wt.prototype.G=function(){Wt.S.G.call(this),Kt(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$t.prototype.info=function(){};var Xt=null;function Zt(){return Xt=Xt||new It}function Jt(t){st.call(this,"serverreachability",t)}function te(t){var e=Zt();e.dispatchEvent(new Jt(e,t))}function ee(t){st.call(this,"statevent",t)}function ne(t){var e=Zt();e.dispatchEvent(new ee(e,t))}function re(t){st.call(this,"timingevent",t)}function ie(t,e){if("function"!=p(t))throw Error("Fn must not be null and must be a function");return f.setTimeout((function(){t()}),e)}S(Jt,st),S(ee,st),S(re,st);var oe={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},se={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function ae(){}function ue(){}ae.prototype.a=null;var ce,le={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function he(){st.call(this,"d")}function fe(){st.call(this,"c")}function de(){}function pe(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new Wt(this),this.P=ge,this.R=new Vt(t=G?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}S(he,st),S(fe,st),S(de,ae),ce=new de;var ge=45e3,ye={},me={};function ve(t,e,n){t.H=1,t.i=Ve(je(e)),t.j=n,t.I=!0,_e(t,null)}function _e(t,e){t.u=E(),Ce(t),t.l=je(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),Je(n.b,"t",r),t.D=0,t.a=Kn(t.g,t.g.C?e:null),0<t.O&&(t.F=new zt(w(t.Ca,t,t.a),t.O)),Gt(t.J,t.a,"readystatechange",t.Wa),e=t.B?L(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),te(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function be(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=we(t,n);if(i==me){4==e&&(t.h=4,ne(14),r=!1),Yt(t.c,t.f,null,"[Incomplete Response]");break}if(i==ye){t.h=4,ne(15),Yt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Yt(t.c,t.f,i,null),Ie(t,i)}4==e&&0==n.length&&(t.h=1,ne(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vn(e),e.F=!0)):(Yt(t.c,t.f,n,"[Invalid Chunked Response]"),Oe(t),Te(t))}function we(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?me:(n=Number(e.substring(n,r)),isNaN(n)?ye:(r+=1)+n>e.length?me:(e=e.substr(r,n),t.D=r+n,e))}function Ce(t){t.U=E()+t.P,Ee(t,t.P)}function Ee(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ie(w(t.Ua,t),e)}function Se(t){t.o&&(f.clearTimeout(t.o),t.o=null)}function Te(t){0==t.g.v||t.A||Hn(t.g,t)}function Oe(t){Se(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,qt(t.R),Kt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ie(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||an(n.b,t)))if(n.I=t.N,!t.C&&an(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(zf){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Bn(n),Pn(n)}Un(n),ne(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ie(w(n.Ra,n),6e3));if(1>=sn(n.b)&&n.ea){try{n.ea()}catch(zf){}n.ea=void 0}}else Wn(n,11)}else if((t.C||n.a==t)&&Bn(n),!k(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(R(l,"spdy")||R(l,"quic")||R(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(un(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Ue(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=E()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Gn(u,u.C?u.ga:null,u.fa),d.C){cn(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Se(p),Ce(p)),u.a=d}else Ln(u);0<n.g.length&&jn(n)}else"stop"!=i[0]&&"close"!=i[0]||Wn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Wn(n,7):kn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);te(4)}catch(zf){}}function xe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(g(t)||"string"==typeof t)I(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(g(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(g(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ae(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ae)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ke(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pe(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(c=pe.prototype).setTimeout=function(t){this.P=t},c.Wa=function(t){t=t.target;var e=this.F;e&&3==On(t)?e.f():this.Ca(t)},c.Ca=function(t){try{if(t==this.a)t:{var e=On(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!G&&!this.a.$())){this.A||4!=e||7==n||te(8==n||0>=r?3:2),Se(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,ne(12),Oe(this),Te(this);break t}Yt(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ie(this,u)}this.I?(be(this,e,o),G&&this.b&&3==e&&(Gt(this.J,this.R,"tick",this.Va),this.R.start())):(Yt(this.c,this.f,o,null),Ie(this,o)),4==e&&Oe(this),this.b&&!this.A&&(4==e?Hn(this.g,this):(this.b=!1,Ce(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ne(12)):(this.h=0,ne(13)),Oe(this),Te(this)}}}catch(c){}},c.Va=function(){if(this.a){var t=On(this.a),e=this.a.$();this.D<e.length&&(Se(this),be(this,t,e),this.b&&4!=t&&Ce(this))}},c.cancel=function(){this.A=!0,Oe(this)},c.Ua=function(){this.o=null;var t=E();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(te(3),ne(17)),Oe(this),this.h=2,Te(this)):Ee(this,this.U-t)},(c=Ae.prototype).K=function(){ke(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},c.L=function(){return ke(this),this.a.concat()},c.get=function(t,e){return Pe(this.b,t)?this.b[t]:e},c.set=function(t,e){Pe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},c.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ne=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Re(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Re){this.a=void 0!==e?e:t.a,De(this,t.f),this.j=t.j,Me(this,t.c),Fe(this,t.h),this.g=t.g,e=t.b;var n=new $e;n.c=e.c,e.a&&(n.a=new Ae(e.a),n.b=e.b),Le(this,n),this.i=t.i}else t&&(n=String(t).match(Ne))?(this.a=!!e,De(this,n[1]||"",!0),this.j=qe(n[2]||""),Me(this,n[3]||"",!0),Fe(this,n[4]),this.g=qe(n[5]||"",!0),Le(this,n[6]||"",!0),this.i=qe(n[7]||"")):(this.a=!!e,this.b=new $e(null,this.a))}function je(t){return new Re(t)}function De(t,e,n){t.f=n?qe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Me(t,e,n){t.c=n?qe(e,!0):e}function Fe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Le(t,e,n){e instanceof $e?(t.b=e,function(t,e){e&&!t.f&&(Ye(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xe(this,e),Je(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Be(e,Ge)),t.b=new $e(e,t.a))}function Ue(t,e,n){t.b.set(e,n)}function Ve(t){return Ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^E()).toString(36)),t}function qe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Be(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,He),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function He(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Re.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Be(e,ze,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Be(e,ze,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Be(n,"/"==n.charAt(0)?Qe:We,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Be(n,Ke)),t.join("")};var ze=/[#\/\?@]/g,We=/[#\?:]/g,Qe=/[#\?]/g,Ge=/[#\?@]/g,Ke=/#/g;function $e(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ye(t){t.a||(t.a=new Ae,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xe(t,e){Ye(t),e=tn(t,e),Pe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pe((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ke(t)))}function Ze(t,e){return Ye(t),e=tn(t,e),Pe(t.a.b,e)}function Je(t,e,n){Xe(t,e),0<n.length&&(t.c=null,t.a.set(tn(t,e),A(n)),t.b+=n.length)}function tn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function en(t,e){this.b=t,this.a=e}function nn(t){this.g=t||rn,t=f.PerformanceNavigationTiming?0<(t=f.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(f.ia&&f.ia.ya&&f.ia.ya()&&f.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(c=$e.prototype).add=function(t,e){Ye(this),this.c=null,t=tn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},c.forEach=function(t,e){Ye(this),this.a.forEach((function(n,r){I(n,(function(n){t.call(e,n,r,this)}),this)}),this)},c.L=function(){Ye(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},c.K=function(t){Ye(this);var e=[];if("string"==typeof t)Ze(this,t)&&(e=x(e,this.a.get(tn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=x(e,t[n])}return e},c.set=function(t,e){return Ye(this),this.c=null,Ze(this,t=tn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},c.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},c.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var rn=10;function on(t){return!!t.b||!!t.a&&t.a.size>=t.f}function sn(t){return t.b?1:t.a?t.a.size:0}function an(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function un(t,e){t.a?t.a.add(e):t.b=e}function cn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ln(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=u(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return A(t.c)}function hn(){}function fn(){this.a=new hn}function dn(t,e,n){var r=n||"";try{xe(t,(function(t,n){var i=t;y(t)&&(i=At(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function pn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}nn.prototype.cancel=function(){var t,e;if(this.c=ln(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=u(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},hn.prototype.stringify=function(t){return f.JSON.stringify(t,void 0)},hn.prototype.parse=function(t){return f.JSON.parse(t,void 0)};var gn=f.JSON.parse;function yn(t){It.call(this),this.headers=new Ae,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=mn,this.D=this.F=!1}S(yn,It);var mn="",vn=/^https?$/i,_n=["POST","PUT"];function bn(t){return"content-type"==t.toLowerCase()}function wn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Cn(t),Sn(t)}function Cn(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function En(t){if(t.b&&void 0!==h&&(!t.s[1]||4!=On(t)||2!=t.X()))if(t.l&&4==On(t))Bt(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==On(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Ne)[1]||null;if(!o&&f.self&&f.self.location){var s=f.self.location.protocol;o=s.substr(0,s.length-1)}i=!vn.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<On(t)?t.a.statusText:""}catch(u){a=""}t.f=a+" ["+t.X()+"]",Cn(t)}}finally{Sn(t)}}}function Sn(t,e){if(t.a){Tn(t);var n=t.a,r=t.s[0]?d:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function Tn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(f.clearTimeout(t.m),t.m=null)}function On(t){return t.a?t.a.readyState:0}function In(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return F(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ue(t,e,n))}function xn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function An(t){this.pa=0,this.g=[],this.c=new $t,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=xn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=xn("baseRetryDelayMs",5e3,t),this.Ma=xn("retryDelaySeedMs",1e4,t),this.Ja=xn("forwardChannelMaxRetries",2,t),this.ma=xn("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new nn(t&&t.concurrentRequestLimit),this.ka=new fn,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function kn(t){if(Nn(t),3==t.v){var e=t.R++,n=je(t.B);Ue(n,"SID",t.J),Ue(n,"RID",e),Ue(n,"TYPE","terminate"),Mn(t,n),(e=new pe(t,t.c,e,void 0)).H=2,e.i=Ve(je(n)),n=!1,f.navigator&&f.navigator.sendBeacon&&(n=f.navigator.sendBeacon(e.i.toString(),"")),!n&&f.Image&&((new Image).src=e.i,n=!0),n||(e.a=Kn(e.g,null),e.a.ba(e.i)),e.u=E(),Ce(e)}Qn(t)}function Pn(t){t.a&&(Vn(t),t.a.cancel(),t.a=null)}function Nn(t){Pn(t),t.j&&(f.clearTimeout(t.j),t.j=null),Bn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&f.clearTimeout(t.h),t.h=null)}function Rn(t,e){t.g.push(new en(t.La++,e)),3==t.v&&jn(t)}function jn(t){on(t.b)||t.h||(t.h=!0,Mt(t.Ba,t),t.u=0)}function Dn(t,e){var n;n=e?e.f:t.R++;var r=je(t.B);Ue(r,"SID",t.J),Ue(r,"RID",n),Ue(r,"AID",t.P),Mn(t,r),t.i&&t.l&&In(r,t.i,t.l),n=new pe(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Fn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),un(t.b,n),ve(n,r,e)}function Mn(t,e){t.f&&xe({},(function(t,n){Ue(e,n,t)}))}function Fn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?w(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{dn(l,s,"req"+c+"_")}catch(Ar){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Ln(t){t.a||t.j||(t.U=1,Mt(t.Aa,t),t.o=0)}function Un(t){return!(t.a||t.j||3<=t.o||(t.U++,t.j=ie(w(t.Aa,t),zn(t,t.o)),t.o++,0))}function Vn(t){null!=t.s&&(f.clearTimeout(t.s),t.s=null)}function qn(t){t.a=new pe(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=je(t.la);Ue(e,"RID","rpc"),Ue(e,"SID",t.J),Ue(e,"CI",t.H?"0":"1"),Ue(e,"AID",t.P),Mn(t,e),Ue(e,"TYPE","xmlhttp"),t.i&&t.l&&In(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ve(je(e)),n.j=null,n.I=!0,_e(n,t)}function Bn(t){null!=t.m&&(f.clearTimeout(t.m),t.m=null)}function Hn(t,e){var n=null;if(t.a==e){Bn(t),Vn(t),t.a=null;var r=2}else{if(!an(t.b,e))return;n=e.s,cn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=E()-e.u;var i=t.u;(r=Zt()).dispatchEvent(new re(r,n,e,i)),jn(t)}else Ln(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(sn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)||(t.h=ie(w(t.Ba,t,e),zn(t,t.u)),t.u++,0)))}(t,e)||2==r&&Un(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Wn(t,5);break;case 4:Wn(t,10);break;case 3:Wn(t,6);break;default:Wn(t,2)}}function zn(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Wn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=w(t.Xa,t);n||(n=new Re("//www.google.com/images/cleardot.gif"),f.location&&"http"==f.location.protocol||De(n,"https"),Ve(n)),function(t,e){var n=new $t;if(f.Image){var r=new Image;r.onload=C(pn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=C(pn,n,r,"TestLoadImage: error",!1,e),r.onabort=C(pn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=C(pn,n,r,"TestLoadImage: timeout",!1,e),f.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ne(2);t.v=0,t.f&&t.f.ra(e),Qn(t),Nn(t)}function Qn(t){t.v=0,t.I=-1,t.f&&(0==ln(t.b).length&&0==t.g.length||(t.b.c.length=0,A(t.g),t.g.length=0),t.f.qa())}function Gn(t,e,n){var r=function(t){return t instanceof Re?je(t):new Re(t,void 0)}(n);if(""!=r.c)e&&Me(r,e+"."+r.c),Fe(r,r.h);else{var i=f.location;r=function(t,e,n,r){var i=new Re(null,void 0);return t&&De(i,t),e&&Me(i,e),n&&Fe(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&F(t.W,(function(t,e){Ue(r,e,t)})),n=t.na,(e=t.A)&&n&&Ue(r,e,n),Ue(r,"VER",t.ha),Mn(t,r),r}function Kn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new yn(t.Ka)).F=t.C,e}function $n(){}function Yn(){if(W&&!(10<=Number(nt)))throw Error("Environmental error: no available transport.")}function Xn(t,e){It.call(this),this.a=new An(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!k(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!k(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new tr(this)}function Zn(t){he.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Jn(){fe.call(this),this.status=1}function tr(t){this.a=t}(c=yn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:ce),this.a.onreadystatechange=w(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void wn(this,o)}t=n||"";var i=new Ae(this.headers);r&&xe(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=bn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=f.FormData&&t instanceof f.FormData,!(0<=O(_n,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Tn(this),0<this.o&&((this.D=function(t){return W&&et(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=w(this.xa,this)):this.m=Bt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){wn(this,o)}},c.xa=function(){void 0!==h&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},c.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Sn(this))},c.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Sn(this,!0)),yn.S.G.call(this)},c.za=function(){this.j||(this.A||this.l||this.g?En(this):this.Ta())},c.Ta=function(){En(this)},c.X=function(){try{return 2<On(this)?this.a.status:-1}catch(H){return-1}},c.$=function(){try{return this.a?this.a.responseText:""}catch(H){return""}},c.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),gn(e)}},c.ua=function(){return this.h},c.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(c=An.prototype).ha=8,c.v=1,c.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new pe(this,this.c,t,void 0),r=this.l;if(this.O&&(r?V(r=L(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Fn(this,n,e),Ue(i=je(this.B),"RID",t),Ue(i,"CVER",22),this.A&&Ue(i,"X-HTTP-Session-Id",this.A),Mn(this,i),this.i&&r&&In(i,this.i,r),un(this.b,n),this.Ga&&Ue(i,"TYPE","init"),this.da?(Ue(i,"$req",e),Ue(i,"SID","null"),n.V=!0,ve(n,i,null)):ve(n,i,e),this.v=2}}else 3==this.v&&(t?Dn(this,t):0==this.g.length||on(this.b)||Dn(this))},c.Aa=function(){if(this.j=null,qn(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ie(w(this.Sa,this),t)}},c.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Pn(this),qn(this))},c.Ra=function(){null!=this.m&&(this.m=null,Pn(this),Un(this),ne(19))},c.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),ne(2)):(this.c.info("Failed to ping google.com"),ne(1))},(c=$n.prototype).ta=function(){},c.sa=function(){},c.ra=function(){},c.qa=function(){},c.Ha=function(){},Yn.prototype.a=function(t,e){return new Xn(t,e)},S(Xn,It),(c=Xn.prototype).addEventListener=function(t,e,n,r){Xn.S.addEventListener.call(this,t,e,n,r)},c.removeEventListener=function(t,e,n,r){Xn.S.removeEventListener.call(this,t,e,n,r)},c.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;ne(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Gn(t,null,t.fa),jn(t)},c.close=function(){kn(this.a)},c.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,Rn(this.a,e)}else this.g?((e={}).__data__=At(t),Rn(this.a,e)):Rn(this.a,t)},c.G=function(){this.a.f=null,delete this.f,kn(this.a),delete this.a,Xn.S.G.call(this)},S(Zn,he),S(Jn,fe),S(tr,$n),tr.prototype.ta=function(){this.a.dispatchEvent("a")},tr.prototype.sa=function(t){this.a.dispatchEvent(new Zn(t))},tr.prototype.ra=function(t){this.a.dispatchEvent(new Jn(t))},tr.prototype.qa=function(){this.a.dispatchEvent("b")},Yn.prototype.createWebChannel=Yn.prototype.a,Xn.prototype.send=Xn.prototype.Pa,Xn.prototype.open=Xn.prototype.Oa,Xn.prototype.close=Xn.prototype.close,oe.NO_ERROR=0,oe.TIMEOUT=8,oe.HTTP_ERROR=6,se.COMPLETE="complete",ue.EventType=le,le.OPEN="a",le.CLOSE="b",le.ERROR="c",le.MESSAGE="d",It.prototype.listen=It.prototype.va,yn.prototype.listenOnce=yn.prototype.wa,yn.prototype.getLastError=yn.prototype.Qa,yn.prototype.getLastErrorCode=yn.prototype.ua,yn.prototype.getStatus=yn.prototype.X,yn.prototype.getResponseJson=yn.prototype.Na,yn.prototype.getResponseText=yn.prototype.$,yn.prototype.send=yn.prototype.ba;var er=oe,nr=se,rr=ue,ir=yn,or=n("/6Yf"),sr=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},ar=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),ur=new o.b("@firebase/firestore");function cr(){return ur.logLevel}function lr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ur.logLevel<=o.a.DEBUG){var i=e.map(dr);ur.debug.apply(ur,Object(r.g)(["Firestore (8.0.2): "+t],i))}}function hr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ur.logLevel<=o.a.ERROR){var i=e.map(dr);ur.error.apply(ur,Object(r.g)(["Firestore (8.0.2): "+t],i))}}function fr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ur.logLevel<=o.a.WARN){var i=e.map(dr);ur.warn.apply(ur,Object(r.g)(["Firestore (8.0.2): "+t],i))}}function dr(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function pr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.0.2) INTERNAL ASSERTION FAILED: "+t;throw hr(e),new Error(e)}function gr(t,e){t||pr()}function yr(t,e){return t}function mr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var vr=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=mr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function _r(t,e){return t<e?-1:t>e?1:0}function br(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function wr(t){return t+"\0"}function Cr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Er(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Sr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Tr=function(){function t(t,e){this.h=t,this.l=e,this._={}}return t.prototype.get=function(t){var e=this.h(t),n=this._[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.l(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.h(t),r=this._[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.l(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this._[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.h(t),n=this._[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.l(n[r][0],t))return 1===n.length?delete this._[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Er(this._,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.T=function(){return Sr(this._)},t}(),Or={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ir=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(r.c)(e,t),e}(Error),xr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ir(Or.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ir(Or.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ir(Or.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ir(Or.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.I=function(t){return this.seconds===t.seconds?_r(this.nanoseconds,t.nanoseconds):_r(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Ar=function(){function t(t){this.timestamp=t}return t.m=function(e){return new t(e)},t.min=function(){return new t(new xr(0,0))},t.prototype.A=function(t){return this.timestamp.I(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.R=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.P=function(){return this.timestamp},t}(),kr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&pr(),void 0===n?n=t.length-e:n>t.length-e&&pr(),this.segments=t,this.offset=e,this.g=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.g},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.V(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.p(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.v=function(t){return this.p(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.S=function(){return this.p(this.segments,this.offset,this.length-1)},t.prototype.D=function(){return this.segments[this.offset]},t.prototype.C=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.T=function(){return 0===this.length},t.prototype.N=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.F=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.O=function(){return this.segments.slice(this.offset,this.limit())},t.V=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Pr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.p=function(t,n,r){return new e(t,n,r)},e.prototype.M=function(){return this.O().join("/")},e.prototype.toString=function(){return this.M()},e.k=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ir(Or.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.$=function(){return new e([])},e}(kr),Nr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Rr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.p=function(t,n,r){return new e(t,n,r)},e.L=function(t){return Nr.test(t)},e.prototype.M=function(){return this.O().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.L(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.M()},e.prototype.B=function(){return 1===this.length&&"__name__"===this.get(0)},e.q=function(){return new e(["__name__"])},e.U=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ir(Or.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ir(Or.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ir(Or.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ir(Or.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.$=function(){return new e([])},e}(kr),jr=function(){function t(t){this.path=t}return t.K=function(e){return new t(Pr.k(e))},t.W=function(e){return new t(Pr.k(e).v(5))},t.prototype.j=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Pr.V(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.V=function(t,e){return Pr.V(t.path,e.path)},t.G=function(t){return t.length%2==0},t.H=function(e){return new t(new Pr(e.slice()))},t}();function Dr(t){return null==t}function Mr(t){return 0===t&&1/t==-1/0}function Fr(t){return"number"==typeof t&&Number.isInteger(t)&&!Mr(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Lr=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.J=null};function Ur(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Lr(t,e,n,r,i,o,s)}function Vr(t){var e=yr(t);if(null===e.J){var n=e.path.M();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.M()+t.op.toString()+Pi(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.M()+e.dir;var e})).join(","),Dr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=js(e.startAt)),e.endAt&&(n+="|ub:",n+=js(e.endAt)),e.J=n}return e.J}function qr(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Us(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Ii(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ms(t.startAt,e.startAt)&&Ms(t.endAt,e.endAt)}function Br(t){return jr.G(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Hr=function(){function t(t){this.Y=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.Y)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.Y)},t.prototype.X=function(){return 2*this.Y.length},t.prototype.A=function(t){return _r(this.Y,t.Y)},t.prototype.isEqual=function(t){return this.Y===t.Y},t}();Hr.Z=new Hr("");var zr,Wr,Qr=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Ar.min()),void 0===o&&(o=Ar.min()),void 0===s&&(s=Hr.Z),this.target=t,this.targetId=e,this.tt=n,this.sequenceNumber=r,this.et=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.nt=function(e){return new t(this.target,this.targetId,this.tt,e,this.et,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.st=function(e,n){return new t(this.target,this.targetId,this.tt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.it=function(e){return new t(this.target,this.targetId,this.tt,this.sequenceNumber,this.et,e,this.resumeToken)},t}(),Gr=function(t){this.count=t};function Kr(t){switch(t){case Or.OK:return pr();case Or.CANCELLED:case Or.UNKNOWN:case Or.DEADLINE_EXCEEDED:case Or.RESOURCE_EXHAUSTED:case Or.INTERNAL:case Or.UNAVAILABLE:case Or.UNAUTHENTICATED:return!1;case Or.INVALID_ARGUMENT:case Or.NOT_FOUND:case Or.ALREADY_EXISTS:case Or.PERMISSION_DENIED:case Or.FAILED_PRECONDITION:case Or.ABORTED:case Or.OUT_OF_RANGE:case Or.UNIMPLEMENTED:case Or.DATA_LOSS:return!0;default:return pr()}}function $r(t){if(void 0===t)return hr("GRPC error has no .code"),Or.UNKNOWN;switch(t){case zr.OK:return Or.OK;case zr.CANCELLED:return Or.CANCELLED;case zr.UNKNOWN:return Or.UNKNOWN;case zr.DEADLINE_EXCEEDED:return Or.DEADLINE_EXCEEDED;case zr.RESOURCE_EXHAUSTED:return Or.RESOURCE_EXHAUSTED;case zr.INTERNAL:return Or.INTERNAL;case zr.UNAVAILABLE:return Or.UNAVAILABLE;case zr.UNAUTHENTICATED:return Or.UNAUTHENTICATED;case zr.INVALID_ARGUMENT:return Or.INVALID_ARGUMENT;case zr.NOT_FOUND:return Or.NOT_FOUND;case zr.ALREADY_EXISTS:return Or.ALREADY_EXISTS;case zr.PERMISSION_DENIED:return Or.PERMISSION_DENIED;case zr.FAILED_PRECONDITION:return Or.FAILED_PRECONDITION;case zr.ABORTED:return Or.ABORTED;case zr.OUT_OF_RANGE:return Or.OUT_OF_RANGE;case zr.UNIMPLEMENTED:return Or.UNIMPLEMENTED;case zr.DATA_LOSS:return Or.DATA_LOSS;default:return pr()}}(Wr=zr||(zr={}))[Wr.OK=0]="OK",Wr[Wr.CANCELLED=1]="CANCELLED",Wr[Wr.UNKNOWN=2]="UNKNOWN",Wr[Wr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wr[Wr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wr[Wr.NOT_FOUND=5]="NOT_FOUND",Wr[Wr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wr[Wr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wr[Wr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wr[Wr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wr[Wr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wr[Wr.ABORTED=10]="ABORTED",Wr[Wr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wr[Wr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wr[Wr.INTERNAL=13]="INTERNAL",Wr[Wr.UNAVAILABLE=14]="UNAVAILABLE",Wr[Wr.DATA_LOSS=15]="DATA_LOSS";var Yr=function(){function t(t,e){this.V=t,this.root=e||Zr.EMPTY}return t.prototype.rt=function(e,n){return new t(this.V,this.root.rt(e,n,this.V).copy(null,null,Zr.ot,null,null))},t.prototype.remove=function(e){return new t(this.V,this.root.remove(e,this.V).copy(null,null,Zr.ot,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.T();){var n=this.V(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.T();){var r=this.V(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.T=function(){return this.root.T()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.at=function(){return this.root.at()},t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(t){return this.root.ut(t)},t.prototype.forEach=function(t){this.ut((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ut((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.lt=function(){return new Xr(this.root,null,this.V,!1)},t.prototype._t=function(t){return new Xr(this.root,t,this.V,!1)},t.prototype.ft=function(){return new Xr(this.root,null,this.V,!0)},t.prototype.dt=function(t){return new Xr(this.root,t,this.V,!0)},t}(),Xr=function(){function t(t,e,n,r){this.wt=r,this.Tt=[];for(var i=1;!t.T();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.wt?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.wt?t.right:t.left}}return t.prototype.Et=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.wt)for(t=t.left;!t.T();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.T();)this.Tt.push(t),t=t.left;return e},t.prototype.It=function(){return this.Tt.length>0},t.prototype.At=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},t}(),Zr=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.T=function(){return!1},t.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},t.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},t.prototype.min=function(){return this.left.T()?this:this.left.min()},t.prototype.at=function(){return this.min().key},t.prototype.ct=function(){return this.right.T()?this.key:this.right.ct()},t.prototype.rt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.rt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.rt(t,e,n))).Rt()},t.prototype.Pt=function(){if(this.left.T())return t.EMPTY;var e=this;return e.left.gt()||e.left.left.gt()||(e=e.Vt()),(e=e.copy(null,null,null,e.left.Pt(),null)).Rt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.T()||i.left.gt()||i.left.left.gt()||(i=i.Vt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.gt()&&(i=i.yt()),i.right.T()||i.right.gt()||i.right.left.gt()||(i=i.vt()),0===n(e,i.key)){if(i.right.T())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Pt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Rt()},t.prototype.gt=function(){return this.color},t.prototype.Rt=function(){var t=this;return t.right.gt()&&!t.left.gt()&&(t=t.bt()),t.left.gt()&&t.left.left.gt()&&(t=t.yt()),t.left.gt()&&t.right.gt()&&(t=t.St()),t},t.prototype.Vt=function(){var t=this.St();return t.right.left.gt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.yt())).bt()).St()),t},t.prototype.vt=function(){var t=this.St();return t.left.left.gt()&&(t=(t=t.yt()).St()),t},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.yt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.St=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Dt=function(){var t=this.Ct();return Math.pow(2,t)<=this.size+1},t.prototype.Ct=function(){if(this.gt()&&this.left.gt())throw pr();if(this.right.gt())throw pr();var t=this.left.Ct();if(t!==this.right.Ct())throw pr();return t+(this.gt()?0:1)},t}();Zr.EMPTY=null,Zr.RED=!0,Zr.ot=!1,Zr.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw pr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.rt=function(t,e,n){return new Zr(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.T=function(){return!0},t.prototype.ut=function(t){return!1},t.prototype.ht=function(t){return!1},t.prototype.at=function(){return null},t.prototype.ct=function(){return null},t.prototype.gt=function(){return!1},t.prototype.Dt=function(){return!0},t.prototype.Ct=function(){return 0},t}());var Jr=function(){function t(t){this.V=t,this.data=new Yr(this.V)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.at()},t.prototype.last=function(){return this.data.ct()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ut((function(e,n){return t(e),!1}))},t.prototype.Nt=function(t,e){for(var n=this.data._t(t[0]);n.It();){var r=n.Et();if(this.V(r.key,t[1])>=0)return;e(r.key)}},t.prototype.xt=function(t,e){var n;for(n=void 0!==e?this.data._t(e):this.data.lt();n.It();)if(!t(n.Et().key))return},t.prototype.Ft=function(t){var e=this.data._t(t);return e.It()?e.Et().key:null},t.prototype.lt=function(){return new ti(this.data.lt())},t.prototype._t=function(t){return new ti(this.data._t(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).rt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.T=function(){return this.data.T()},t.prototype.Ot=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.lt(),r=e.data.lt();n.It();){var i=n.Et().key,o=r.Et().key;if(0!==this.V(i,o))return!1}return!0},t.prototype.O=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.V);return n.data=e,n},t}(),ti=function(){function t(t){this.Mt=t}return t.prototype.Et=function(){return this.Mt.Et().key},t.prototype.It=function(){return this.Mt.It()},t}(),ei=new Yr(jr.V);function ni(){return ei}function ri(){return ni()}var ii=new Yr(jr.V);function oi(){return ii}var si=new Yr(jr.V),ai=new Jr(jr.V);function ui(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ai,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ci=new Jr(_r);function li(){return ci}var hi=function(){function t(t){this.V=t?function(e,n){return t(e,n)||jr.V(e.key,n.key)}:function(t,e){return jr.V(t.key,e.key)},this.kt=oi(),this.$t=new Yr(this.V)}return t.Lt=function(e){return new t(e.V)},t.prototype.has=function(t){return null!=this.kt.get(t)},t.prototype.get=function(t){return this.kt.get(t)},t.prototype.first=function(){return this.$t.at()},t.prototype.last=function(){return this.$t.ct()},t.prototype.T=function(){return this.$t.T()},t.prototype.indexOf=function(t){var e=this.kt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.$t.ut((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.kt.rt(t.key,t),e.$t.rt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.kt.remove(t),this.$t.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.$t.lt(),r=e.$t.lt();n.It();){var i=n.Et().key,o=r.Et().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.V=this.V,r.kt=e,r.$t=n,r},t}(),fi=function(){function t(){this.Bt=new Yr(jr.V)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Bt.get(e);n?0!==t.type&&3===n.type?this.Bt=this.Bt.rt(e,t):3===t.type&&1!==n.type?this.Bt=this.Bt.rt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Bt=this.Bt.rt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Bt=this.Bt.remove(e):1===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):pr():this.Bt=this.Bt.rt(e,t)},t.prototype.qt=function(){var t=[];return this.Bt.ut((function(e,n){t.push(n)})),t},t}(),di=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Ut=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Kt=s,this.Wt=a}return t.jt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,hi.Lt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Qt.T()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Kt===t.Kt&&this.Qt.isEqual(t.Qt)&&_s(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ut.isEqual(t.Ut)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),pi=function(){function t(t,e,n,r,i){this.et=t,this.Gt=e,this.zt=n,this.Ht=r,this.Jt=i}return t.Yt=function(e,n){var r=new Map;return r.set(e,gi.Xt(e,n)),new t(Ar.min(),r,li(),ni(),ui())},t}(),gi=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Zt=e,this.te=n,this.ee=r,this.ne=i}return t.Xt=function(e,n){return new t(Hr.Z,n,ui(),ui(),ui())},t}(),yi=function(t,e,n,r){this.se=t,this.removedTargetIds=e,this.key=n,this.ie=r},mi=function(t,e){this.targetId=t,this.re=e},vi=function(t,e,n,r){void 0===n&&(n=Hr.Z),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},_i=function(){function t(){this.oe=0,this.ae=Ci(),this.ce=Hr.Z,this.ue=!1,this.he=!0}return Object.defineProperty(t.prototype,"Zt",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ce},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"le",{get:function(){return 0!==this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return this.he},enumerable:!1,configurable:!0}),t.prototype.fe=function(t){t.X()>0&&(this.he=!0,this.ce=t)},t.prototype.de=function(){var t=ui(),e=ui(),n=ui();return this.ae.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:pr()}})),new gi(this.ce,this.ue,t,e,n)},t.prototype.we=function(){this.he=!1,this.ae=Ci()},t.prototype.Te=function(t,e){this.he=!0,this.ae=this.ae.rt(t,e)},t.prototype.Ee=function(t){this.he=!0,this.ae=this.ae.remove(t)},t.prototype.Ie=function(){this.oe+=1},t.prototype.me=function(){this.oe-=1},t.prototype.Ae=function(){this.he=!0,this.ue=!0},t}(),bi=function(){function t(t){this.Re=t,this.Pe=new Map,this.ge=ni(),this.Ve=wi(),this.ye=new Jr(_r)}return t.prototype.pe=function(t){for(var e=0,n=t.se;e<n.length;e++){var r=n[e];t.ie instanceof rs?this.ve(r,t.ie):t.ie instanceof is&&this.be(r,t.key,t.ie)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.be(o[i],t.key,t.ie)},t.prototype.Se=function(t){var e=this;this.De(t,(function(n){var r=e.Ce(n);switch(t.state){case 0:e.Ne(n)&&r.fe(t.resumeToken);break;case 1:r.me(),r.le||r.we(),r.fe(t.resumeToken);break;case 2:r.me(),r.le||e.removeTarget(n);break;case 3:e.Ne(n)&&(r.Ae(),r.fe(t.resumeToken));break;case 4:e.Ne(n)&&(e.xe(n),r.fe(t.resumeToken));break;default:pr()}}))},t.prototype.De=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Pe.forEach((function(t,r){n.Ne(r)&&e(r)}))},t.prototype.Fe=function(t){var e=t.targetId,n=t.re.count,r=this.Oe(e);if(r){var i=r.target;if(Br(i))if(0===n){var o=new jr(i.path);this.be(e,o,new is(o,Ar.min()))}else gr(1===n);else this.Me(e)!==n&&(this.xe(e),this.ye=this.ye.add(e))}},t.prototype.ke=function(t){var e=this,n=new Map;this.Pe.forEach((function(r,i){var o=e.Oe(i);if(o){if(r.Zt&&Br(o.target)){var s=new jr(o.target.path);null!==e.ge.get(s)||e.$e(i,s)||e.be(i,s,new is(s,t))}r._e&&(n.set(i,r.de()),r.we())}}));var r=ui();this.Ve.forEach((function(t,n){var i=!0;n.xt((function(t){var n=e.Oe(t);return!n||2===n.tt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new pi(t,n,this.ye,this.ge,r);return this.ge=ni(),this.Ve=wi(),this.ye=new Jr(_r),i},t.prototype.ve=function(t,e){if(this.Ne(t)){var n=this.$e(t,e.key)?2:0;this.Ce(t).Te(e.key,n),this.ge=this.ge.rt(e.key,e),this.Ve=this.Ve.rt(e.key,this.Le(e.key).add(t))}},t.prototype.be=function(t,e,n){if(this.Ne(t)){var r=this.Ce(t);this.$e(t,e)?r.Te(e,1):r.Ee(e),this.Ve=this.Ve.rt(e,this.Le(e).delete(t)),n&&(this.ge=this.ge.rt(e,n))}},t.prototype.removeTarget=function(t){this.Pe.delete(t)},t.prototype.Me=function(t){var e=this.Ce(t).de();return this.Re.Be(t).size+e.te.size-e.ne.size},t.prototype.Ie=function(t){this.Ce(t).Ie()},t.prototype.Ce=function(t){var e=this.Pe.get(t);return e||(e=new _i,this.Pe.set(t,e)),e},t.prototype.Le=function(t){var e=this.Ve.get(t);return e||(e=new Jr(_r),this.Ve=this.Ve.rt(t,e)),e},t.prototype.Ne=function(t){var e=null!==this.Oe(t);return e||lr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Oe=function(t){var e=this.Pe.get(t);return e&&e.le?null:this.Re.qe(t)},t.prototype.xe=function(t){var e=this;this.Pe.set(t,new _i),this.Re.Be(t).forEach((function(n){e.be(t,n,null)}))},t.prototype.$e=function(t,e){return this.Re.Be(t).has(e)},t}();function wi(){return new Yr(jr.V)}function Ci(){return new Yr(jr.V)}function Ei(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Si(t){var e=Ni(t.mapValue.fields.__local_write_time__.timestampValue);return new xr(e.seconds,e.nanos)}var Ti=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ei(t)?4:10:pr()}function Ii(t,e){var n=Oi(t);if(n!==Oi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Si(t).isEqual(Si(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Ni(t.timestampValue),r=Ni(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ji(t.bytesValue).isEqual(ji(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ri(t.geoPointValue.latitude)===Ri(e.geoPointValue.latitude)&&Ri(t.geoPointValue.longitude)===Ri(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ri(t.integerValue)===Ri(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ri(t.doubleValue),r=Ri(e.doubleValue);return n===r?Mr(n)===Mr(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return br(t.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Cr(n)!==Cr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ii(n[i],r[i])))return!1;return!0}(t,e);default:return pr()}}function xi(t,e){return void 0!==(t.values||[]).find((function(t){return Ii(t,e)}))}function Ai(t,e){var n=Oi(t),r=Oi(e);if(n!==r)return _r(n,r);switch(n){case 0:return 0;case 1:return _r(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ri(t.integerValue||t.doubleValue),r=Ri(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ki(t.timestampValue,e.timestampValue);case 4:return ki(Si(t),Si(e));case 5:return _r(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ji(t),r=ji(e);return n.A(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=_r(n[i],r[i]);if(0!==o)return o}return _r(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=_r(Ri(t.latitude),Ri(e.latitude));return 0!==n?n:_r(Ri(t.longitude),Ri(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ai(n[i],r[i]);if(o)return o}return _r(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=_r(r[s],o[s]);if(0!==a)return a;var u=Ai(n[r[s]],i[o[s]]);if(0!==u)return u}return _r(r.length,o.length)}(t.mapValue,e.mapValue);default:throw pr()}}function ki(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return _r(t,e);var n=Ni(t),r=Ni(e),i=_r(n.seconds,r.seconds);return 0!==i?i:_r(n.nanos,r.nanos)}function Pi(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Ni(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ji(e.bytesValue).toBase64():"referenceValue"in e?jr.W(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):pr();var n}(t)}function Ni(t){if(gr(!!t),"string"==typeof t){var e=0,n=Ti.exec(t);if(gr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ri(t.seconds),nanos:Ri(t.nanos)}}function Ri(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ji(t){return"string"==typeof t?Hr.fromBase64String(t):Hr.fromUint8Array(t)}function Di(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.M()}}function Mi(t){return!!t&&"integerValue"in t}function Fi(t){return!!t&&"arrayValue"in t}function Li(t){return!!t&&"nullValue"in t}function Ui(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vi(t){return!!t&&"mapValue"in t}var qi={asc:"ASCENDING",desc:"DESCENDING"},Bi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hi=function(t,e){this.t=t,this.Ue=e};function zi(t){return{integerValue:""+t}}function Wi(t,e){if(t.Ue){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mr(e)?"-0":e}}function Qi(t,e){return Fr(e)?zi(e):Wi(t,e)}function Gi(t,e){return t.Ue?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ki(t,e){return t.Ue?e.toBase64():e.toUint8Array()}function $i(t,e){return Gi(t,e.P())}function Yi(t){return gr(!!t),Ar.m(function(t){var e=Ni(t);return new xr(e.seconds,e.nanos)}(t))}function Xi(t,e){return function(t){return new Pr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).M()}function Zi(t){var e=Pr.k(t);return gr(wo(e)),e}function Ji(t,e){return Xi(t.t,e.path)}function to(t,e){var n=Zi(e);if(n.get(1)!==t.t.projectId)throw new Ir(Or.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new Ir(Or.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new jr(io(n))}function eo(t,e){return Xi(t.t,e)}function no(t){var e=Zi(t);return 4===e.length?Pr.$():io(e)}function ro(t){return new Pr(["projects",t.t.projectId,"databases",t.t.database]).M()}function io(t){return gr(t.length>4&&"documents"===t.get(4)),t.v(5)}function oo(t,e,n){return{name:Ji(t,e),fields:n.proto.mapValue.fields}}function so(t,e){var n;if(e instanceof Wo)n={update:oo(t,e.key,e.value)};else if(e instanceof Xo)n={delete:Ji(t,e.key)};else if(e instanceof Qo)n={update:oo(t,e.key,e.data),updateMask:bo(e.Qe)};else if(e instanceof Ko)n={transform:{document:Ji(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Oo)return{fieldPath:e.field.M(),setToServerValue:"REQUEST_TIME"};if(n instanceof Io)return{fieldPath:e.field.M(),appendMissingElements:{values:n.elements}};if(n instanceof Ao)return{fieldPath:e.field.M(),removeAllFromArray:{values:n.elements}};if(n instanceof Po)return{fieldPath:e.field.M(),increment:n.Ke};throw pr()}(0,t)}))}};else{if(!(e instanceof Zo))return pr();n={verify:Ji(t,e.key)}}return e.je.We||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:$i(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:pr()}(t,e.je)),n}function ao(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Fo.updateTime(Yi(t.updateTime)):void 0!==t.exists?Fo.exists(t.exists):Fo.Ge()}(e.currentDocument):Fo.Ge();if(e.update){var r=to(t,e.update.name),i=new Jo({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new jo((t.fieldPaths||[]).map((function(t){return Rr.U(t)})))}(e.updateMask);return new Qo(r,i,o,n)}return new Wo(r,i,n)}if(e.delete){var s=to(t,e.delete);return new Xo(s,n)}if(e.transform){var a=to(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(gr("REQUEST_TIME"===e.setToServerValue),n=new Oo):"appendMissingElements"in e?n=new Io(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Ao(e.removeAllFromArray.values||[]):"increment"in e?n=new Po(t,e.increment):pr();var r=Rr.U(e.fieldPath);return new Do(r,n)}(t,e)}));return gr(!0===n.exists),new Ko(a,u)}if(e.verify){var c=to(t,e.verify);return new Zo(c,n)}return pr()}function uo(t,e){return{documents:[eo(t,e.path)]}}function co(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=eo(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=eo(t,r.S()),n.structuredQuery.from=[{collectionId:r.C()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Ui(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NAN"}};if(Li(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ui(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NAN"}};if(Li(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(t.field),op:go(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:yo(t.field),direction:po(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Ue||Dr(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=ho(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ho(e.endAt)),n}function lo(t){var e=no(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){gr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[_o(e)]:void 0!==e.fieldFilter?[vo(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):pr():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Fs(mo(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Dr(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=fo(n.startAt));var l=null;return n.endAt&&(l=fo(n.endAt)),as(e,i,a,s,u,"F",c,l)}function ho(t){return{before:t.before,values:t.position}}function fo(t){return new Rs(t.values||[],!!t.before)}function po(t){return qi[t]}function go(t){return Bi[t]}function yo(t){return{fieldPath:t.M()}}function mo(t){return Rr.U(t.fieldPath)}function vo(t){return Ss.create(mo(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return pr()}}(t.fieldFilter.op),t.fieldFilter.value)}function _o(t){switch(t.unaryFilter.op){case"IS_NAN":var e=mo(t.unaryFilter.field);return Ss.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=mo(t.unaryFilter.field);return Ss.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=mo(t.unaryFilter.field);return Ss.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=mo(t.unaryFilter.field);return Ss.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return pr()}}function bo(t){var e=[];return t.fields.forEach((function(t){return e.push(t.M())})),{fieldPaths:e}}function wo(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Co=function(){this.ze=void 0};function Eo(t,e,n){return t instanceof Oo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Io?xo(t,e):t instanceof Ao?ko(t,e):function(t,e){var n=To(t,e),r=No(n)+No(t.Ke);return Mi(n)&&Mi(t.Ke)?zi(r):Wi(t.serializer,r)}(t,e)}function So(t,e,n){return t instanceof Io?xo(t,e):t instanceof Ao?ko(t,e):n}function To(t,e){return t instanceof Po?Mi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Oo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e}(Co),Io=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r.c)(e,t),e}(Co);function xo(t,e){for(var n=Ro(e),r=function(t){n.some((function(e){return Ii(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ao=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r.c)(e,t),e}(Co);function ko(t,e){for(var n=Ro(e),r=function(t){n=n.filter((function(e){return!Ii(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Po=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.Ke=n,r}return Object(r.c)(e,t),e}(Co);function No(t){return Ri(t.integerValue||t.doubleValue)}function Ro(t){return Fi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var jo=function(){function t(t){this.fields=t,t.sort(Rr.V)}return t.prototype.He=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].N(t))return!0;return!1},t.prototype.isEqual=function(t){return br(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Do=function(t,e){this.field=t,this.transform=e},Mo=function(t,e){this.version=t,this.transformResults=e},Fo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Ge=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"We",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Lo(t,e){return void 0!==t.updateTime?e instanceof rs&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof rs}var Uo=function(){};function Vo(t,e,n){return t instanceof Wo?function(t,e,n){return new rs(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof Qo?function(t,e,n){if(!Lo(t.je,e))return new os(t.key,n.version);var r=Go(t,e);return new rs(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Ko?function(t,e,n){if(gr(null!=n.transformResults),!Lo(t.je,e))return new os(t.key,n.version);var r=$o(0,e),i=function(t,e,n){var r=[];gr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof rs&&(a=e.field(o.field)),r.push(So(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=Yo(t,r.data(),i);return new rs(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new is(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function qo(t,e,n,r){return t instanceof Wo?function(t,e){if(!Lo(t.je,e))return e;var n=zo(e);return new rs(t.key,n,t.value,{Je:!0})}(t,e):t instanceof Qo?function(t,e){if(!Lo(t.je,e))return e;var n=zo(e),r=Go(t,e);return new rs(t.key,n,r,{Je:!0})}(t,e):t instanceof Ko?function(t,e,n,r){if(!Lo(t.je,e))return e;var i=$o(0,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof rs&&(c=n.field(a.field)),null===c&&r instanceof rs&&(c=r.field(a.field)),i.push(Eo(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=Yo(t,i.data(),o);return new rs(t.key,i.version,s,{Je:!0})}(t,e,r,n):function(t,e){return Lo(t.je,e)?new is(t.key,Ar.min()):e}(t,e)}function Bo(t,e){return t instanceof Ko?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof rs?e.field(o.field):void 0,a=To(o.transform,s||null);null!=a&&(n=null==n?(new ts).set(o.field,a):n.set(o.field,a))}return n?n.Ye():null}(t,e):null}function Ho(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.je.isEqual(e.je)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||br(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Io&&e instanceof Io||t instanceof Ao&&e instanceof Ao?br(t.elements,e.elements,Ii):t instanceof Po&&e instanceof Po?Ii(t.Ke,e.Ke):t instanceof Oo&&e instanceof Oo}(t.transform,e.transform)}(t,e)})))}function zo(t){return t instanceof rs?t.version:Ar.min()}var Wo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.je=r,i.type=0,i}return Object(r.c)(e,t),e}(Uo),Qo=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Qe=r,o.je=i,o.type=1,o}return Object(r.c)(e,t),e}(Uo);function Go(t,e){return function(t,e){var n=new ts(e);return t.Qe.fields.forEach((function(e){if(!e.T()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Ye()}(t,e instanceof rs?e.data():Jo.empty())}var Ko=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.je=Fo.exists(!0),r}return Object(r.c)(e,t),e}(Uo);function $o(t,e){return e}function Yo(t,e,n){for(var r=new ts(e),i=0;i<t.fieldTransforms.length;i++)r.set(t.fieldTransforms[i].field,n[i]);return r.Ye()}var Xo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.je=n,r.type=3,r}return Object(r.c)(e,t),e}(Uo),Zo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.je=n,r.type=4,r}return Object(r.c)(e,t),e}(Uo),Jo=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.T())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Vi(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.C()])||null},t.prototype.isEqual=function(t){return Ii(this.proto,t.proto)},t}(),ts=function(){function t(t){void 0===t&&(t=Jo.empty()),this.Xe=t,this.Ze=new Map}return t.prototype.set=function(t,e){return this.tn(t,e),this},t.prototype.delete=function(t){return this.tn(t,null),this},t.prototype.tn=function(t,e){for(var n=this.Ze,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Oi(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.C(),e)},t.prototype.Ye=function(){var t=this.en(Rr.$(),this.Ze);return null!=t?new Jo(t):this.Xe},t.prototype.en=function(t,e){var n=this,r=!1,i=this.Xe.field(t),o=Vi(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.en(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function es(t){var e=[];return Er(t.fields||{},(function(t,n){var r=new Rr([t]);if(Vi(n)){var i=es(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new jo(e)}var ns=function(t,e){this.key=t,this.version=e},rs=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).nn=r,o.Je=!!i.Je,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(r.c)(e,t),e.prototype.field=function(t){return this.nn.field(t)},e.prototype.data=function(){return this.nn},e.prototype.sn=function(){return this.nn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.nn.isEqual(t.nn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.nn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(ns),is=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(r.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ns),os=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ns),ss=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.rn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.on=null,this.an=null};function as(t,e,n,r,i,o,s,a){return new ss(t,e,n,r,i,o,s,a)}function us(t){return new ss(t)}function cs(t){return!Dr(t.limit)&&"F"===t.limitType}function ls(t){return!Dr(t.limit)&&"L"===t.limitType}function hs(t){return t.rn.length>0?t.rn[0].field:null}function fs(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.cn())return r.field}return null}function ds(t){return null!==t.collectionGroup}function ps(t){var e=yr(t);if(null===e.on){e.on=[];var n=fs(e),r=hs(e);if(null!==n&&null===r)n.B()||e.on.push(new Fs(n)),e.on.push(new Fs(Rr.q(),"asc"));else{for(var i=!1,o=0,s=e.rn;o<s.length;o++){var a=s[o];e.on.push(a),a.field.B()&&(i=!0)}if(!i){var u=e.rn.length>0?e.rn[e.rn.length-1].dir:"asc";e.on.push(new Fs(Rr.q(),u))}}}return e.on}function gs(t){var e=yr(t);if(!e.an)if("F"===e.limitType)e.an=Ur(e.path,e.collectionGroup,ps(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ps(e);r<i.length;r++){var o=i[r];n.push(new Fs(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Rs(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Rs(e.startAt.position,!e.startAt.before):null;e.an=Ur(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.an}function ys(t,e,n){return new ss(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ms(t,e){return new ss(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}function vs(t,e){return new ss(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}function _s(t,e){return qr(gs(t),gs(e))&&t.limitType===e.limitType}function bs(t){return Vr(gs(t))+"|lt:"+t.limitType}function ws(t){return"Query(target="+function(t){var e=t.path.M();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.M()+" "+e.op+" "+Pi(e.value);var e})).join(", ")+"]"),Dr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.M()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+js(t.startAt)),t.endAt&&(e+=", endAt: "+js(t.endAt)),"Target("+e+")"}(gs(t))+"; limitType="+t.limitType+")"}function Cs(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.j(t.collectionGroup)&&t.path.N(n):jr.G(t.path)?t.path.isEqual(n):t.path.F(n)}(t,e)&&function(t,e){for(var n=0,r=t.rn;n<r.length;n++){var i=r[n];if(!i.field.B()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ds(t.startAt,ps(t),e)||t.endAt&&Ds(t.endAt,ps(t),e))}(t,e)}function Es(t){return function(e,n){for(var r=!1,i=0,o=ps(t);i<o.length;i++){var s=o[i],a=Ls(s,e,n);if(0!==a)return a;r=r||s.field.B()}return 0}}var Ss=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(r.c)(e,t),e.create=function(t,n,r){return t.B()?"in"===n||"not-in"===n?this.un(t,n,r):new Ts(t,n,r):"array-contains"===n?new As(t,r):"in"===n?new ks(t,r):"not-in"===n?new Ps(t,r):"array-contains-any"===n?new Ns(t,r):new e(t,n,r)},e.un=function(t,e,n){return"in"===e?new Os(t,n):new Is(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.hn(Ai(e,this.value)):null!==e&&Oi(this.value)===Oi(e)&&this.hn(Ai(e,this.value))},e.prototype.hn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return pr()}},e.prototype.cn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ts=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=jr.W(r.referenceValue),i}return Object(r.c)(e,t),e.prototype.matches=function(t){var e=jr.V(t.key,this.key);return this.hn(e)},e}(Ss),Os=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=xs(0,n),r}return Object(r.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ss),Is=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=xs(0,n),r}return Object(r.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ss);function xs(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return jr.W(t.referenceValue)}))}var As=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(r.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Fi(e)&&xi(e.arrayValue,this.value)},e}(Ss),ks=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(r.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&xi(this.value.arrayValue,e)},e}(Ss),Ps=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(r.c)(e,t),e.prototype.matches=function(t){if(xi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!xi(this.value.arrayValue,e)},e}(Ss),Ns=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(r.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Fi(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return xi(e.value.arrayValue,t)}))},e}(Ss),Rs=function(t,e){this.position=t,this.before=e};function js(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Pi(t)})).join(",")}function Ds(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.B()?jr.V(jr.W(s.referenceValue),n.key):Ai(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ms(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ii(t.position[n],e.position[n]))return!1;return!0}var Fs=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ls(t,e,n){var r=t.field.B()?jr.V(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Ai(r,i):pr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pr()}}function Us(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Vs=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},qs=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.ln=t,this._n=e,this.fn=n,this.dn=r,this.wn=i,this.Tn=0,this.En=null,this.In=Date.now(),this.reset()}return t.prototype.reset=function(){this.Tn=0},t.prototype.mn=function(){this.Tn=this.wn},t.prototype.An=function(t){var e=this;this.cancel();var n=Math.floor(this.Tn+this.Rn()),r=Math.max(0,Date.now()-this.In),i=Math.max(0,n-r);i>0&&lr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Tn+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.En=this.ln.Pn(this._n,i,(function(){return e.In=Date.now(),t()})),this.Tn*=this.dn,this.Tn<this.fn&&(this.Tn=this.fn),this.Tn>this.wn&&(this.Tn=this.wn)},t.prototype.gn=function(){null!==this.En&&(this.En.Vn(),this.En=null)},t.prototype.cancel=function(){null!==this.En&&(this.En.cancel(),this.En=null)},t.prototype.Rn=function(){return(Math.random()-.5)*this.Tn},t}(),Bs=function(){function t(t){var e=this;this.yn=null,this.pn=null,this.result=void 0,this.error=void 0,this.vn=!1,this.bn=!1,t((function(t){e.vn=!0,e.result=t,e.yn&&e.yn(t)}),(function(t){e.vn=!0,e.error=t,e.pn&&e.pn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.bn&&pr(),this.bn=!0,this.vn?this.error?this.Sn(n,this.error):this.Dn(e,this.result):new t((function(t,i){r.yn=function(n){r.Dn(e,n).next(t,i)},r.pn=function(e){r.Sn(n,e).next(t,i)}}))},t.prototype.Cn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Nn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Dn=function(e,n){return e?this.Nn((function(){return e(n)})):t.resolve(n)},t.prototype.Sn=function(e,n){return e?this.Nn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.xn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Fn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.xn(r)},t}(),Hs=function(){function t(e,n,r){this.name=e,this.version=n,this.On=r,12.2===t.Mn(Object(s.n)())&&hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return lr("SimpleDb","Removing database:",t),$s(window.indexedDB.deleteDatabase(t)).Cn()},t.kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.$n())return!0;var e=Object(s.n)(),n=t.Mn(e),r=0<n&&n<10,i=t.Ln(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.$n=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Bn)},t.qn=function(t,e){return t.store(e)},t.Mn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Ln=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Un=function(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n=this;return Object(r.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(lr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Ws(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Ir(Or.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ws(t,n))},i.onupgradeneeded=function(t){lr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.On.createOrUpgrade(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){lr("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Qn&&(this.db.onversionchange=function(t){return n.Qn(t)}),this.db)]}}))}))},t.prototype.Kn=function(t){this.Qn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,i){return Object(r.b)(this,void 0,void 0,(function(){var o,s,a,u,c;return Object(r.d)(this,(function(l){switch(l.label){case 0:o="readonly"===e,s=0,a=function(){var e,a,c,l,h;return Object(r.d)(this,(function(r){switch(r.label){case 0:++s,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.Un(t)];case 2:return u.db=r.sent(),e=Gs.open(u.db,t,o?"readonly":"readwrite",n),a=i(e).catch((function(t){return e.abort(t),Bs.reject(t)})).Cn(),c={},a.catch((function(){})),[4,e.Wn];case 3:return[2,(c.value=(r.sent(),a),c)];case 4:return lr("SimpleDb","Transaction failed with error:",(l=r.sent()).message,"Retrying:",h="FirebaseError"!==l.name&&s<3),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),zs=function(){function t(t){this.jn=t,this.Gn=!1,this.zn=null}return Object.defineProperty(t.prototype,"vn",{get:function(){return this.Gn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Hn",{get:function(){return this.zn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.jn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Gn=!0},t.prototype.Jn=function(t){this.zn=t},t.prototype.delete=function(){return $s(this.jn.delete())},t}(),Ws=function(t){function e(e,n){var r=this;return(r=t.call(this,Or.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(r.c)(e,t),e}(Ir);function Qs(t){return"IndexedDbTransactionError"===t.name}var Gs=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Yn=new Vs,this.transaction.oncomplete=function(){n.Yn.resolve()},this.transaction.onabort=function(){e.error?n.Yn.reject(new Ws(t,e.error)):n.Yn.resolve()},this.transaction.onerror=function(e){var r=Xs(e.target.error);n.Yn.reject(new Ws(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ws(n,e)}},Object.defineProperty(t.prototype,"Wn",{get:function(){return this.Yn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Yn.reject(t),this.aborted||(lr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Ks(e)},t}(),Ks=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(lr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(lr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),$s(n)},t.prototype.add=function(t){return lr("SimpleDb","ADD",this.store.name,t,t),$s(this.store.add(t))},t.prototype.get=function(t){var e=this;return $s(this.store.get(t)).next((function(n){return void 0===n&&(n=null),lr("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return lr("SimpleDb","DELETE",this.store.name,t),$s(this.store.delete(t))},t.prototype.count=function(){return lr("SimpleDb","COUNT",this.store.name),$s(this.store.count())},t.prototype.Xn=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Zn(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.ts=function(t,e){lr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.es=!1;var r=this.cursor(n);return this.Zn(r,(function(t,e,n){return n.delete()}))},t.prototype.ns=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Zn(r,e)},t.prototype.ss=function(t){var e=this.cursor({});return new Bs((function(n,r){e.onerror=function(t){var e=Xs(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Zn=function(t,e){var n=[];return new Bs((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new zs(i),s=e(i.primaryKey,i.value,o);if(s instanceof Bs){var a=s.catch((function(t){return o.done(),Bs.reject(t)}));n.push(a)}o.vn?r():null===o.Hn?i.continue():i.continue(o.Hn)}else r()}})).next((function(){return Bs.xn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.es?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function $s(t){return new Bs((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Xs(t.target.error);n(e)}}))}var Ys=!1;function Xs(t){var e=Hs.Mn(Object(s.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ir("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ys||(Ys=!0,setTimeout((function(){throw r}),0)),r}}return t}function Zs(){return"undefined"!=typeof window?window:null}function Js(){return"undefined"!=typeof document?document:null}var ta=function(){function t(t,e,n,r,i){this.rs=t,this._n=e,this.os=n,this.op=r,this.cs=i,this.us=new Vs,this.then=this.us.promise.then.bind(this.us.promise),this.us.promise.catch((function(t){}))}return t.hs=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.ls=setTimeout((function(){return e._s()}),t)},t.prototype.Vn=function(){return this._s()},t.prototype.cancel=function(t){null!==this.ls&&(this.clearTimeout(),this.us.reject(new Ir(Or.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype._s=function(){var t=this;this.rs.fs((function(){return null!==t.ls?(t.clearTimeout(),t.op().then((function(e){return t.us.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.ls&&(this.cs(this),clearTimeout(this.ls),this.ls=null)},t}(),ea=function(){function t(){var t=this;this.ds=Promise.resolve(),this.ws=[],this.Ts=!1,this.Es=[],this.Is=null,this.As=!1,this.Rs=[],this.Ps=new qs(this,"async_queue_retry"),this.gs=function(){var e=Js();e&&lr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Ps.gn()};var e=Js();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.gs)}return Object.defineProperty(t.prototype,"Vs",{get:function(){return this.Ts},enumerable:!1,configurable:!0}),t.prototype.fs=function(t){this.enqueue(t)},t.prototype.ys=function(t){this.ps(),this.vs(t)},t.prototype.bs=function(){if(!this.Ts){this.Ts=!0;var t=Js();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.gs)}},t.prototype.enqueue=function(t){return this.ps(),this.Ts?new Promise((function(t){})):this.vs(t)},t.prototype.Ss=function(t){var e=this;this.fs((function(){return e.ws.push(t),e.Ds()}))},t.prototype.Ds=function(){return Object(r.b)(this,void 0,void 0,(function(){var t,e=this;return Object(r.d)(this,(function(n){switch(n.label){case 0:if(0===this.ws.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.ws[0]()];case 2:return n.sent(),this.ws.shift(),this.Ps.reset(),[3,4];case 3:if(!Qs(t=n.sent()))throw t;return lr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.ws.length>0&&this.Ps.An((function(){return e.Ds()})),n.label=5;case 5:return[2]}}))}))},t.prototype.vs=function(t){var e=this,n=this.ds.then((function(){return e.As=!0,t().catch((function(t){throw e.Is=t,e.As=!1,hr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.As=!1,t}))}));return this.ds=n,n},t.prototype.Pn=function(t,e,n){var r=this;this.ps(),this.Rs.indexOf(t)>-1&&(e=0);var i=ta.hs(this,t,e,n,(function(t){return r.Cs(t)}));return this.Es.push(i),i},t.prototype.ps=function(){this.Is&&pr()},t.prototype.Ns=function(){},t.prototype.xs=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.ds];case 1:e.sent(),e.label=2;case 2:if(t!==this.ds)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Fs=function(t){for(var e=0,n=this.Es;e<n.length;e++)if(n[e]._n===t)return!0;return!1},t.prototype.Os=function(t){var e=this;return this.xs().then((function(){e.Es.sort((function(t,e){return t.os-e.os}));for(var n=0,r=e.Es;n<r.length;n++){var i=r[n];if(i.Vn(),"all"!==t&&i._n===t)break}return e.xs()}))},t.prototype.Ms=function(t){this.Rs.push(t)},t.prototype.Cs=function(t){var e=this.Es.indexOf(t);this.Es.splice(e,1)},t}();function na(t,e){if(hr("AsyncQueue",e+": "+t),Qs(t))return new Ir(Or.UNAVAILABLE,e+": "+t);throw t}var ra=function(){this.ks=void 0,this.listeners=[]},ia=function(){this.queries=new Tr((function(t){return bs(t)}),_s),this.onlineState="Unknown",this.$s=new Set};function oa(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c;return Object(r.d)(this,(function(r){switch(r.label){case 0:if(n=yr(t),o=!1,(s=n.queries.get(i=e.query))||(o=!0,s=new ra),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),a=s,[4,n.Ls(i)];case 2:return a.ks=r.sent(),[3,4];case 3:return u=r.sent(),c=na(u,"Initialization of query '"+ws(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(i,s),s.listeners.push(e),e.Bs(n.onlineState),s.ks&&e.qs(s.ks)&&ca(n),[2]}}))}))}function sa(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a;return Object(r.d)(this,(function(r){return n=yr(t),o=!1,(s=n.queries.get(i=e.query))&&(a=s.listeners.indexOf(e))>=0&&(s.listeners.splice(a,1),o=0===s.listeners.length),o?[2,(n.queries.delete(i),n.Us(i))]:[2]}))}))}function aa(t,e){for(var n=yr(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].qs(s)&&(r=!0);a.ks=s}}r&&ca(n)}function ua(t,e,n){var r=yr(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function ca(t){t.$s.forEach((function(t){t.next()}))}var la=function(){function t(t,e,n){this.query=t,this.Qs=e,this.Ks=!1,this.Ws=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new di(t.query,t.docs,t.Ut,e,t.Qt,t.fromCache,t.Kt,!0)}var o=!1;return this.Ks?this.js(t)&&(this.Qs.next(t),o=!0):this.Gs(t,this.onlineState)&&(this.zs(t),o=!0),this.Ws=t,o},t.prototype.onError=function(t){this.Qs.error(t)},t.prototype.Bs=function(t){this.onlineState=t;var e=!1;return this.Ws&&!this.Ks&&this.Gs(this.Ws,t)&&(this.zs(this.Ws),e=!0),e},t.prototype.Gs=function(t,e){return!t.fromCache||!(this.options.Hs&&"Offline"!==e||t.docs.T()&&"Offline"!==e)},t.prototype.js=function(t){return t.docChanges.length>0||!!(t.Kt||this.Ws&&this.Ws.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.zs=function(t){t=di.jt(t.query,t.docs,t.Qt,t.fromCache),this.Ks=!0,this.Qs.next(t)},t}(),ha=function(){function t(t){this.uid=t}return t.prototype.Js=function(){return null!=this.uid},t.prototype.Ys=function(){return this.Js()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();ha.UNAUTHENTICATED=new ha(null),ha.Xs=new ha("google-credentials-uid"),ha.Zs=new ha("first-party-uid");var fa=function(t,e){this.user=e,this.type="OAuth",this.ti={},this.ti.Authorization="Bearer "+t},da=function(){function t(){this.ei=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.ni=function(){},t.prototype.si=function(t){this.ei=t,t(ha.UNAUTHENTICATED)},t.prototype.ii=function(){this.ei=null},t}(),pa=function(){function t(t){var e=this;this.ri=null,this.currentUser=ha.UNAUTHENTICATED,this.oi=!1,this.ai=0,this.ei=null,this.forceRefresh=!1,this.ri=function(){e.ai++,e.currentUser=e.ci(),e.oi=!0,e.ei&&e.ei(e.currentUser)},this.ai=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ri):(this.ri(null),t.get().then((function(t){e.auth=t,e.ri&&e.auth.addAuthTokenListener(e.ri)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.ai,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.ai!==e?(lr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(gr("string"==typeof n.accessToken),new fa(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.ni=function(){this.forceRefresh=!0},t.prototype.si=function(t){this.ei=t,this.oi&&t(this.currentUser)},t.prototype.ii=function(){this.auth&&this.auth.removeAuthTokenListener(this.ri),this.ri=null,this.ei=null},t.prototype.ci=function(){var t=this.auth&&this.auth.getUid();return gr(null===t||"string"==typeof t),new ha(t)},t}(),ga=function(){function t(t,e){this.ui=t,this.hi=e,this.type="FirstParty",this.user=ha.Zs}return Object.defineProperty(t.prototype,"ti",{get:function(){var t={"X-Goog-AuthUser":this.hi},e=this.ui.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),ya=function(){function t(t,e){this.ui=t,this.hi=e}return t.prototype.getToken=function(){return Promise.resolve(new ga(this.ui,this.hi))},t.prototype.si=function(t){t(ha.Zs)},t.prototype.ii=function(){},t.prototype.ni=function(){},t}(),ma=function(){function t(t,e,n,r){this.batchId=t,this.li=e,this.baseMutations=n,this.mutations=r}return t.prototype._i=function(t,e,n){for(var r=n.fi,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Vo(o,e,r[i]))}return e},t.prototype.di=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=qo(i,e,e,this.li))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=qo(u,e,o,this.li))}return e},t.prototype.wi=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.di(r.key,t.get(r.key));i&&(n=n.rt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ui())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&br(this.mutations,t.mutations,(function(t,e){return Ho(t,e)}))&&br(this.baseMutations,t.baseMutations,(function(t,e){return Ho(t,e)}))},t}(),va=function(){function t(t,e,n,r){this.batch=t,this.Ti=e,this.fi=n,this.Ei=r}return t.from=function(e,n,r){gr(e.mutations.length===r.length);for(var i=si,o=e.mutations,s=0;s<o.length;s++)i=i.rt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),_a=function(){function t(){this.Ii=new Tr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.mi=!1}return t.prototype.Ai=function(t){var e=this.Ii.get(t);return e?e.readTime:Ar.min()},t.prototype.Ri=function(t,e){this.Pi(),this.Ii.set(t.key,{gi:t,readTime:e})},t.prototype.Vi=function(t,e){void 0===e&&(e=null),this.Pi(),this.Ii.set(t,{gi:null,readTime:e})},t.prototype.yi=function(t,e){this.Pi();var n=this.Ii.get(e);return void 0!==n?Bs.resolve(n.gi):this.pi(t,e)},t.prototype.getEntries=function(t,e){return this.vi(t,e)},t.prototype.apply=function(t){return this.Pi(),this.mi=!0,this.bi(t)},t.prototype.Pi=function(){},t}();function ba(t){return new Hi(t,!0)}function wa(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Ca="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ea=function(){function t(){this.Si=[]}return t.prototype.Di=function(t){this.Si.push(t)},t.prototype.Ci=function(){this.Si.forEach((function(t){return t()}))},t}(),Sa=function(){function t(t,e,n){this.Ni=t,this.xi=e,this.Fi=n}return t.prototype.Oi=function(t,e){var n=this;return this.xi.Mi(t,e).next((function(r){return n.ki(t,e,r)}))},t.prototype.ki=function(t,e,n){return this.Ni.yi(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].di(e,t);return t}))},t.prototype.$i=function(t,e,n){var r=ri();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].di(t,e);r=r.rt(t,e)})),r},t.prototype.Li=function(t,e){var n=this;return this.Ni.getEntries(t,e).next((function(e){return n.Bi(t,e)}))},t.prototype.Bi=function(t,e){var n=this;return this.xi.qi(t,e).next((function(r){var i=n.$i(t,e,r),o=ni();return i.forEach((function(t,e){e||(e=new is(t,Ar.min())),o=o.rt(t,e)})),o}))},t.prototype.Ui=function(t,e,n){return function(t){return jr.G(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Qi(t,e.path):ds(e)?this.Ki(t,e,n):this.Wi(t,e,n)},t.prototype.Qi=function(t,e){return this.Oi(t,new jr(e)).next((function(t){var e=oi();return t instanceof rs&&(e=e.rt(t.key,t)),e}))},t.prototype.Ki=function(t,e,n){var r=this,i=e.collectionGroup,o=oi();return this.Fi.ji(t,i).next((function(s){return Bs.forEach(s,(function(s){var a=function(t,e){return new ss(e,null,t.rn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Wi(t,a,n).next((function(t){t.forEach((function(t,e){o=o.rt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Wi=function(t,e,n){var r,i,o=this;return this.Ni.Ui(t,e,n).next((function(n){return r=n,o.xi.Gi(t,e)})).next((function(e){return o.zi(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=qo(u,l,l,o.li);r=h instanceof rs?r.rt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Cs(e,n)||(r=r.remove(t))})),r}))},t.prototype.zi=function(t,e,n){for(var r=ui(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Qo&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ni.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof rs&&(c=c.rt(t,e))})),c}))},t}(),Ta=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Hi=n,this.Ji=r}return t.Yi=function(e,n){for(var r=ui(),i=ui(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Oa=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Xi=function(t){return n.Zi(t)},this.tr=function(t){return e.er(t)})}return t.prototype.Zi=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.tr&&this.tr(t),t},t}();function Ia(t,e){var n=t[1],r=e[1],i=_r(t[0],e[0]);return 0===i?_r(n,r):i}Oa.nr=-1;var xa=function(){function t(t){this.sr=t,this.buffer=new Jr(Ia),this.ir=0}return t.prototype.rr=function(){return++this.ir},t.prototype.ar=function(t){var e=[t,this.rr()];if(this.buffer.size<this.sr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ia(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Aa={cr:!1,ur:0,hr:0,lr:0},ka=function(){function t(t,e,n){this._r=t,this.dr=e,this.wr=n}return t.Tr=function(e){return new t(e,t.Er,t.Ir)},t}();ka.Er=10,ka.Ir=1e3,ka.mr=new ka(41943040,ka.Er,ka.Ir),ka.Ar=new ka(-1,0,0);var Pa=function(){function t(t,e){this.Rr=t,this.rs=e,this.Pr=!1,this.gr=null}return t.prototype.start=function(t){-1!==this.Rr.params._r&&this.Vr(t)},t.prototype.stop=function(){this.gr&&(this.gr.cancel(),this.gr=null)},Object.defineProperty(t.prototype,"yr",{get:function(){return null!==this.gr},enumerable:!1,configurable:!0}),t.prototype.Vr=function(t){var e=this,n=this.Pr?3e5:6e4;lr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.gr=this.rs.Pn("lru_garbage_collection",n,(function(){return Object(r.b)(e,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){switch(n.label){case 0:this.gr=null,this.Pr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.pr(this.Rr)];case 2:return n.sent(),[3,7];case 3:return Qs(e=n.sent())?(lr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ic(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Vr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Na=function(){function t(t,e){this.vr=t,this.params=e}return t.prototype.br=function(t,e){return this.vr.Sr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Dr=function(t,e){var n=this;if(0===e)return Bs.resolve(Oa.nr);var r=new xa(e);return this.vr.De(t,(function(t){return r.ar(t.sequenceNumber)})).next((function(){return n.vr.Cr(t,(function(t){return r.ar(t)}))})).next((function(){return r.maxValue}))},t.prototype.Nr=function(t,e,n){return this.vr.Nr(t,e,n)},t.prototype.Fr=function(t,e){return this.vr.Fr(t,e)},t.prototype.Or=function(t,e){var n=this;return-1===this.params._r?(lr("LruGarbageCollector","Garbage collection skipped; disabled"),Bs.resolve(Aa)):this.Mr(t).next((function(r){return r<n.params._r?(lr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params._r),Aa):n.kr(t,e)}))},t.prototype.Mr=function(t){return this.vr.Mr(t)},t.prototype.kr=function(t,e){var n,r,i,s,a,u,c,l=this,h=Date.now();return this.br(t,this.params.dr).next((function(e){return e>l.params.wr?(lr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.wr+" from "+e),r=l.params.wr):r=e,s=Date.now(),l.Dr(t,r)})).next((function(r){return n=r,a=Date.now(),l.Nr(t,n,e)})).next((function(e){return i=e,u=Date.now(),l.Fr(t,n)})).next((function(t){return c=Date.now(),cr()<=o.a.DEBUG&&lr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-s)+"ms\n\tRemoved "+i+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),Bs.resolve({cr:!0,ur:r,hr:i,lr:t})}))},t}();function Ra(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Da(e)),e=ja(t.get(n),e);return Da(e)}function ja(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Da(t){return t+"\x01\x01"}function Ma(t){var e=t.length;if(gr(e>=2),2===e)return gr("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Pr.$();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&pr(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:pr()}o=s+2}return new Pr(r)}var Fa=function(t){this.$r=t};function La(t,e){if(e.document)return function(t,e,n){var r=to(t,e.name),i=Yi(e.updateTime),o=new Jo({mapValue:{fields:e.fields}});return new rs(r,i,o,{hasCommittedMutations:!!n})}(t.$r,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=jr.H(e.noDocument.path),r=Ha(e.noDocument.readTime);return new is(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=jr.H(e.unknownDocument.path),o=Ha(e.unknownDocument.version);return new os(i,o)}return pr()}function Ua(t,e,n){var r=Va(n),i=e.key.path.S().O();if(e instanceof rs){var o=function(t,e){return{name:Ji(t,e.key),fields:e.sn().mapValue.fields,updateTime:Gi(t,e.version.P())}}(t.$r,e);return new yu(null,null,o,e.hasCommittedMutations,r,i)}if(e instanceof is){var s=e.key.path.O(),a=Ba(e.version),u=e.hasCommittedMutations;return new yu(null,new pu(s,a),null,u,r,i)}if(e instanceof os){var c=e.key.path.O(),l=Ba(e.version);return new yu(new gu(c,l),null,null,!0,r,i)}return pr()}function Va(t){var e=t.P();return[e.seconds,e.nanoseconds]}function qa(t){var e=new xr(t[0],t[1]);return Ar.m(e)}function Ba(t){var e=t.P();return new cu(e.seconds,e.nanoseconds)}function Ha(t){var e=new xr(t.seconds,t.nanoseconds);return Ar.m(e)}function za(t,e){var n=(e.baseMutations||[]).map((function(e){return ao(t.$r,e)})),r=e.mutations.map((function(e){return ao(t.$r,e)})),i=xr.fromMillis(e.localWriteTimeMs);return new ma(e.batchId,i,n,r)}function Wa(t){var e,n,r=Ha(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ha(t.lastLimboFreeSnapshotVersion):Ar.min();return void 0!==t.query.documents?(gr(1===(n=t.query).documents.length),e=gs(us(no(n.documents[0])))):e=function(t){return gs(lo(t))}(t.query),new Qr(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Hr.fromBase64String(t.resumeToken))}function Qa(t,e){var n,r=Ba(e.et),i=Ba(e.lastLimboFreeSnapshotVersion);n=Br(e.target)?uo(t.$r,e.target):co(t.$r,e.target);var o=e.resumeToken.toBase64();return new vu(e.targetId,Vr(e.target),r,o,e.sequenceNumber,i,n)}function Ga(t){var e=lo({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ys(e,e.limit,"L"):e}var Ka=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Fi=n,this.Lr=r,this.Br={}}return t.qr=function(e,n,r,i){return gr(""!==e.uid),new t(e.Js()?e.uid:"",n,r,i)},t.prototype.Ur=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xa(t).ns({index:fu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Qr=function(t,e,n,r){var i=this,o=Za(t),s=Xa(t);return s.add({}).next((function(a){gr("number"==typeof a);for(var u=new ma(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return so(t.$r,e)})),i=n.mutations.map((function(e){return so(t.$r,e)}));return new fu(e,n.batchId,n.li.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new Jr((function(t,e){return _r(t.M(),e.M())})),f=0,d=r;f<d.length;f++){var p=d[f],g=du.key(i.userId,p.key.path,a);h=h.add(p.key.path.S()),l.push(s.put(c)),l.push(o.put(g,du.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Fi.Kr(t,e))})),t.Di((function(){i.Br[a]=u.keys()})),Bs.xn(l).next((function(){return u}))}))},t.prototype.Wr=function(t,e){var n=this;return Xa(t).get(e).next((function(t){return t?(gr(t.userId===n.userId),za(n.serializer,t)):null}))},t.prototype.jr=function(t,e){var n=this;return this.Br[e]?Bs.resolve(this.Br[e]):this.Wr(t,e).next((function(t){if(t){var r=t.keys();return n.Br[e]=r,r}return null}))},t.prototype.Gr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Xa(t).ns({index:fu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(gr(e.batchId>=r),o=za(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.zr=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Xa(t).ns({index:fu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Hr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xa(t).Xn(fu.userMutationsIndex,n).next((function(t){return t.map((function(t){return za(e.serializer,t)}))}))},t.prototype.Mi=function(t,e){var n=this,r=du.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Za(t).ns({range:i},(function(r,i,s){var a=r[0],u=r[2],c=Ma(r[1]);if(a===n.userId&&e.path.isEqual(c))return Xa(t).get(u).next((function(t){if(!t)throw pr();gr(t.userId===n.userId),o.push(za(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.qi=function(t,e){var n=this,r=new Jr(_r),i=[];return e.forEach((function(e){var o=du.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Za(t).ns({range:s},(function(t,i,o){var s=t[0],a=t[2],u=Ma(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),Bs.xn(i).next((function(){return n.Jr(t,r)}))},t.prototype.Gi=function(t,e){var n=this,r=e.path,i=r.length+1,o=du.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Jr(_r);return Za(t).ns({range:s},(function(t,e,o){var s=t[0],u=t[2],c=Ma(t[1]);s===n.userId&&r.N(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.Jr(t,a)}))},t.prototype.Jr=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Xa(t).get(e).next((function(t){if(null===t)throw pr();gr(t.userId===n.userId),r.push(za(n.serializer,t))})))})),Bs.xn(i).next((function(){return r}))},t.prototype.Yr=function(t,e){var n=this;return Ya(t.Xr,this.userId,e).next((function(r){return t.Di((function(){n.Zr(e.batchId)})),Bs.forEach(r,(function(e){return n.Lr.eo(t,e)}))}))},t.prototype.Zr=function(t){delete this.Br[t]},t.prototype.no=function(t){var e=this;return this.Ur(t).next((function(n){if(!n)return Bs.resolve();var r=IDBKeyRange.lowerBound(du.prefixForUser(e.userId)),i=[];return Za(t).ns({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Ma(t[1]);i.push(o)}else r.done()})).next((function(){gr(0===i.length)}))}))},t.prototype.so=function(t,e){return $a(t,this.userId,e)},t.prototype.io=function(t){var e=this;return Ja(t).get(this.userId).next((function(t){return t||new hu(e.userId,-1,"")}))},t}();function $a(t,e,n){var r=du.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Za(t).ns({range:o,es:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function Ya(t,e,n){var r=t.store(fu.store),i=t.store(du.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.ns({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){gr(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=du.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Bs.xn(o).next((function(){return c}))}function Xa(t){return Uu.qn(t,fu.store)}function Za(t){return Uu.qn(t,du.store)}function Ja(t){return Uu.qn(t,hu.store)}var tu=function(){function t(t,e){this.serializer=t,this.Fi=e}return t.prototype.Ri=function(t,e,n){return ru(t).put(iu(e),n)},t.prototype.Vi=function(t,e){var n=ru(t),r=iu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.ro(t,r)}))},t.prototype.yi=function(t,e){var n=this;return ru(t).get(iu(e)).next((function(t){return n.oo(t)}))},t.prototype.ao=function(t,e){var n=this;return ru(t).get(iu(e)).next((function(t){var e=n.oo(t);return e?{gi:e,size:ou(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=ri();return this.co(t,e,(function(t,e){var i=n.oo(e);r=r.rt(t,i)})).next((function(){return r}))},t.prototype.uo=function(t,e){var n=this,r=ri(),i=new Yr(jr.V);return this.co(t,e,(function(t,e){var o=n.oo(e);o?(r=r.rt(t,o),i=i.rt(t,ou(e))):(r=r.rt(t,null),i=i.rt(t,0))})).next((function(){return{ho:r,lo:i}}))},t.prototype.co=function(t,e,n){if(e.T())return Bs.resolve();var r=IDBKeyRange.bound(e.first().path.O(),e.last().path.O()),i=e.lt(),o=i.Et();return ru(t).ns({range:r},(function(t,e,r){for(var s=jr.H(t);o&&jr.V(o,s)<0;)n(o,null),o=i.Et();o&&o.isEqual(s)&&(n(o,e),o=i.It()?i.Et():null),o?r.Jn(o.path.O()):r.done()})).next((function(){for(;o;)n(o,null),o=i.It()?i.Et():null}))},t.prototype.Ui=function(t,e,n){var r=this,i=oi(),o=e.path.length+1,s={};if(n.isEqual(Ar.min())){var a=e.path.O();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.O(),c=Va(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=yu.collectionReadTimeIndex}return ru(t).ns(s,(function(t,n,s){if(t.length===o){var a=La(r.serializer,n);e.path.N(a.key.path)?a instanceof rs&&Cs(e,a)&&(i=i.rt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype._o=function(t){return new eu(this,!!t&&t.fo)},t.prototype.wo=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return nu(t).get(mu.key).next((function(t){return gr(!!t),t}))},t.prototype.ro=function(t,e){return nu(t).put(mu.key,e)},t.prototype.oo=function(t){if(t){var e=La(this.serializer,t);return e instanceof is&&e.version.isEqual(Ar.min())?null:e}return null},t}(),eu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).To=e,r.fo=n,r.Eo=new Tr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(r.c)(e,t),e.prototype.bi=function(t){var e=this,n=[],r=0,i=new Jr((function(t,e){return _r(t.M(),e.M())}));return this.Ii.forEach((function(o,s){var a=e.Eo.get(o);if(s.gi){var u=Ua(e.To.serializer,s.gi,e.Ai(o));i=i.add(o.path.S());var c=ou(u);r+=c-a,n.push(e.To.Ri(t,o,u))}else if(r-=a,e.fo){var l=Ua(e.To.serializer,new is(o,Ar.min()),e.Ai(o));n.push(e.To.Ri(t,o,l))}else n.push(e.To.Vi(t,o))})),i.forEach((function(r){n.push(e.To.Fi.Kr(t,r))})),n.push(this.To.updateMetadata(t,r)),Bs.xn(n)},e.prototype.pi=function(t,e){var n=this;return this.To.ao(t,e).next((function(t){return null===t?(n.Eo.set(e,0),null):(n.Eo.set(e,t.size),t.gi)}))},e.prototype.vi=function(t,e){var n=this;return this.To.uo(t,e).next((function(t){var e=t.ho;return t.lo.forEach((function(t,e){n.Eo.set(t,e)})),e}))},e}(_a);function nu(t){return Uu.qn(t,mu.store)}function ru(t){return Uu.qn(t,yu.store)}function iu(t){return t.path.O()}function ou(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw pr();e=t.noDocument}return JSON.stringify(e).length}var su=function(){function t(){this.Io=new au}return t.prototype.Kr=function(t,e){return this.Io.add(e),Bs.resolve()},t.prototype.ji=function(t,e){return Bs.resolve(this.Io.getEntries(e))},t}(),au=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.C(),n=t.S(),r=this.index[e]||new Jr(Pr.V),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.C(),n=t.S(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Jr(Pr.V)).O()},t}(),uu=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;gr(n<r&&n>=0&&r<=11);var o=new Gs("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(lu.store)}(t),function(t){t.createObjectStore(hu.store,{keyPath:hu.keyPath}),t.createObjectStore(fu.store,{keyPath:fu.keyPath,autoIncrement:!0}).createIndex(fu.userMutationsIndex,fu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(du.store)}(t),Cu(t),function(t){t.createObjectStore(yu.store)}(t));var s=Bs.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(_u.store),t.deleteObjectStore(vu.store),t.deleteObjectStore(bu.store)}(t),Cu(t)),s=s.next((function(){return function(t){var e=t.store(bu.store),n=new bu(0,0,Ar.min().P(),0);return e.put(bu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(fu.store).Xn().next((function(n){t.deleteObjectStore(fu.store),t.createObjectStore(fu.store,{keyPath:fu.keyPath,autoIncrement:!0}).createIndex(fu.userMutationsIndex,fu.userMutationsKeyPath,{unique:!0});var r=e.store(fu.store),i=n.map((function(t){return r.put(t)}));return Bs.xn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Eu.store,{keyPath:Eu.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(mu.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(yu.store);e.createIndex(yu.readTimeIndex,yu.readTimeIndexPath,{unique:!1}),e.createIndex(yu.collectionReadTimeIndex,yu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Su.store,{keyPath:Su.keyPath})}(t),function(t){t.createObjectStore(Tu.store,{keyPath:Tu.keyPath})}(t)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(yu.store).ns((function(t,n){e+=ou(n)})).next((function(){var n=new mu(e);return t.store(mu.store).put(mu.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(hu.store),r=t.store(fu.store);return n.Xn().next((function(n){return Bs.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Xn(fu.userMutationsIndex,i).next((function(r){return Bs.forEach(r,(function(r){gr(r.userId===n.userId);var i=za(e.serializer,r);return Ya(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(_u.store),n=t.store(yu.store);return t.store(bu.store).get(bu.key).next((function(t){var r=[];return n.ns((function(n,i){var o=new Pr(n),s=function(t){return[0,Ra(t)]}(o);r.push(e.get(s).next((function(n){return n?Bs.resolve():function(n){return e.put(new _u(0,Ra(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Bs.xn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(wu.store,{keyPath:wu.keyPath});var n=e.store(wu.store),r=new au,i=function(t){if(r.add(t)){var e=t.C(),i=t.S();return n.put({collectionId:e,parent:Ra(i)})}};return e.store(yu.store).ns({es:!0},(function(t,e){var n=new Pr(t);return i(n.S())})).next((function(){return e.store(du.store).ns({es:!0},(function(t,e){var n=Ma(t[1]);return i(n.S())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(vu.store);return n.ns((function(t,r){var i=Wa(r),o=Qa(e.serializer,i);return n.put(o)}))},t}(),cu=function(t,e){this.seconds=t,this.nanoseconds=e},lu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};lu.store="owner",lu.key="owner";var hu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};hu.store="mutationQueues",hu.keyPath="userId";var fu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};fu.store="mutations",fu.keyPath="batchId",fu.userMutationsIndex="userMutationsIndex",fu.userMutationsKeyPath=["userId","batchId"];var du=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ra(e)]},t.key=function(t,e,n){return[t,Ra(e),n]},t}();du.store="documentMutations",du.PLACEHOLDER=new du;var pu=function(t,e){this.path=t,this.readTime=e},gu=function(t,e){this.path=t,this.version=e},yu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};yu.store="remoteDocuments",yu.readTimeIndex="readTimeIndex",yu.readTimeIndexPath="readTime",yu.collectionReadTimeIndex="collectionReadTimeIndex",yu.collectionReadTimeIndexPath=["parentPath","readTime"];var mu=function(t){this.byteSize=t};mu.store="remoteDocumentGlobal",mu.key="remoteDocumentGlobalKey";var vu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};vu.store="targets",vu.keyPath="targetId",vu.queryTargetsIndexName="queryTargetsIndex",vu.queryTargetsKeyPath=["canonicalId","targetId"];var _u=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};_u.store="targetDocuments",_u.keyPath=["targetId","path"],_u.documentTargetsIndex="documentTargetsIndex",_u.documentTargetsKeyPath=["path","targetId"];var bu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};bu.key="targetGlobalKey",bu.store="targetGlobal";var wu=function(t,e){this.collectionId=t,this.parent=e};function Cu(t){t.createObjectStore(_u.store,{keyPath:_u.keyPath}).createIndex(_u.documentTargetsIndex,_u.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(vu.store,{keyPath:vu.keyPath}).createIndex(vu.queryTargetsIndexName,vu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(bu.store)}wu.store="collectionParents",wu.keyPath=["collectionId","parent"];var Eu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Eu.store="clientMetadata",Eu.keyPath="clientId";var Su=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Su.store="bundles",Su.keyPath="bundleId";var Tu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Tu.store="namedQueries",Tu.keyPath="name";var Ou=Object(r.g)(Object(r.g)(Object(r.g)(Object(r.g)([hu.store,fu.store,du.store,yu.store,vu.store,lu.store,bu.store,_u.store],[Eu.store]),[mu.store]),[wu.store]),[Su.store,Tu.store]),Iu=function(){function t(t){this.serializer=t}return t.prototype.mo=function(t,e){return xu(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Ha(e.createTime),version:e.version};var e}))},t.prototype.Ao=function(t,e){return xu(t).put({bundleId:(n=e).id,createTime:Ba(Yi(n.createTime)),version:n.version});var n},t.prototype.Ro=function(t,e){return Au(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Ga(e.bundledQuery),readTime:Ha(e.readTime)};var e}))},t.prototype.Po=function(t,e){return Au(t).put(function(t){return{name:t.name,readTime:Ba(Yi(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function xu(t){return Uu.qn(t,Su.store)}function Au(t){return Uu.qn(t,Tu.store)}var ku=function(){function t(){this.Vo=new au}return t.prototype.Kr=function(t,e){var n=this;if(!this.Vo.has(e)){var r=e.C(),i=e.S();t.Di((function(){n.Vo.add(e)}));var o={collectionId:r,parent:Ra(i)};return Pu(t).put(o)}return Bs.resolve()},t.prototype.ji=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[wr(e),""],!1,!0);return Pu(t).Xn(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ma(o.parent))}return n}))},t}();function Pu(t){return Uu.qn(t,wu.store)}var Nu=function(){function t(t){this.yo=t}return t.prototype.next=function(){return this.yo+=2,this.yo},t.po=function(){return new t(0)},t.vo=function(){return new t(-1)},t}(),Ru=function(){function t(t,e){this.Lr=t,this.serializer=e}return t.prototype.bo=function(t){var e=this;return this.So(t).next((function(n){var r=new Nu(n.highestTargetId);return n.highestTargetId=r.next(),e.Do(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Co=function(t){return this.So(t).next((function(t){return Ar.m(new xr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.No=function(t){return this.So(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.xo=function(t,e,n){var r=this;return this.So(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.P()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Do(t,i)}))},t.prototype.Fo=function(t,e){var n=this;return this.Oo(t,e).next((function(){return n.So(t).next((function(r){return r.targetCount+=1,n.Mo(e,r),n.Do(t,r)}))}))},t.prototype.ko=function(t,e){return this.Oo(t,e)},t.prototype.$o=function(t,e){var n=this;return this.Lo(t,e.targetId).next((function(){return ju(t).delete(e.targetId)})).next((function(){return n.So(t)})).next((function(e){return gr(e.targetCount>0),e.targetCount-=1,n.Do(t,e)}))},t.prototype.Nr=function(t,e,n){var r=this,i=0,o=[];return ju(t).ns((function(s,a){var u=Wa(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.$o(t,u)))})).next((function(){return Bs.xn(o)})).next((function(){return i}))},t.prototype.De=function(t,e){return ju(t).ns((function(t,n){var r=Wa(n);e(r)}))},t.prototype.So=function(t){return Du(t).get(bu.key).next((function(t){return gr(null!==t),t}))},t.prototype.Do=function(t,e){return Du(t).put(bu.key,e)},t.prototype.Oo=function(t,e){return ju(t).put(Qa(this.serializer,e))},t.prototype.Mo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Bo=function(t){return this.So(t).next((function(t){return t.targetCount}))},t.prototype.qo=function(t,e){var n=Vr(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ju(t).ns({range:r,index:vu.queryTargetsIndexName},(function(t,n,r){var o=Wa(n);qr(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Uo=function(t,e,n){var r=this,i=[],o=Mu(t);return e.forEach((function(e){var s=Ra(e.path);i.push(o.put(new _u(n,s))),i.push(r.Lr.Qo(t,n,e))})),Bs.xn(i)},t.prototype.Ko=function(t,e,n){var r=this,i=Mu(t);return Bs.forEach(e,(function(e){var o=Ra(e.path);return Bs.xn([i.delete([n,o]),r.Lr.Wo(t,n,e)])}))},t.prototype.Lo=function(t,e){var n=Mu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.jo=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Mu(t),i=ui();return r.ns({range:n,es:!0},(function(t,e,n){var r=Ma(t[1]),o=new jr(r);i=i.add(o)})).next((function(){return i}))},t.prototype.so=function(t,e){var n=Ra(e.path),r=IDBKeyRange.bound([n],[wr(n)],!1,!0),i=0;return Mu(t).ns({index:_u.documentTargetsIndex,es:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.qe=function(t,e){return ju(t).get(e).next((function(t){return t?Wa(t):null}))},t}();function ju(t){return Uu.qn(t,vu.store)}function Du(t){return Uu.qn(t,bu.store)}function Mu(t){return Uu.qn(t,_u.store)}var Fu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Lu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xr=e,r.Go=n,r}return Object(r.c)(e,t),e}(Ea),Uu=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ln=o,this.window=s,this.document=a,this.zo=c,this.Ho=l,this.Jo=null,this.Yo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Xo=null,this.inForeground=!1,this.Zo=null,this.ta=null,this.ea=Number.NEGATIVE_INFINITY,this.na=function(t){return Promise.resolve()},!t.kn())throw new Ir(Or.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Lr=new Bu(this,i),this.sa=n+"main",this.serializer=new Fa(u),this.ia=new Hs(this.sa,11,new uu(this.serializer)),this.ra=new Ru(this.Lr,this.serializer),this.Fi=new ku,this.Ni=function(t,e){return new tu(t,e)}(this.serializer,this.Fi),this.oa=new Iu(this.serializer),this.window&&this.window.localStorage?this.aa=this.window.localStorage:(this.aa=null,!1===l&&hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.qn=function(t,e){if(t instanceof Lu)return Hs.qn(t.Xr,e);throw pr()},t.prototype.start=function(){var t=this;return this.ca().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ir(Or.FAILED_PRECONDITION,Fu);return t.ua(),t.ha(),t.la(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.ra.No(e)}))})).then((function(e){t.Jo=new Oa(e,t.zo)})).then((function(){t.Yo=!0})).catch((function(e){return t.ia&&t.ia.close(),Promise.reject(e)}))},t.prototype._a=function(t){var e=this;return this.na=function(n){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.d)(this,(function(e){return this.yr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.fa=function(t){var e=this;this.ia.Kn((function(n){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.da=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ln.fs((function(){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.d)(this,(function(t){switch(t.label){case 0:return this.yr?[4,this.ca()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.ca=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return qu(e).put(new Eu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.wa(e).next((function(e){e||(t.isPrimary=!1,t.ln.Ss((function(){return t.na(!1)})))}))})).next((function(){return t.Ta(e)})).next((function(n){return t.isPrimary&&!n?t.Ea(e).next((function(){return!1})):!!n&&t.Ia(e).next((function(){return!0}))}))})).catch((function(e){if(Qs(e))return lr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return lr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.ln.Ss((function(){return t.na(e)})),t.isPrimary=e}))},t.prototype.wa=function(t){var e=this;return Vu(t).get(lu.key).next((function(t){return Bs.resolve(e.ma(t))}))},t.prototype.Aa=function(t){return qu(t).delete(this.clientId)},t.prototype.Ra=function(){return Object(r.b)(this,void 0,void 0,(function(){var e,n,i,o=this;return Object(r.d)(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.Pa(this.ea,18e5)?[3,2]:(this.ea=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.qn(e,Eu.store);return n.Xn().next((function(t){var e=o.ga(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Bs.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=r.sent(),this.aa)for(n=0,i=e;n<i.length;n++)this.aa.removeItem(this.Va(i[n].clientId));r.label=2;case 2:return[2]}}))}))},t.prototype.la=function(){var t=this;this.ta=this.ln.Pn("client_metadata_refresh",4e3,(function(){return t.ca().then((function(){return t.Ra()})).then((function(){return t.la()}))}))},t.prototype.ma=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ta=function(t){var e=this;return this.Ho?Bs.resolve(!0):Vu(t).get(lu.key).next((function(n){if(null!==n&&e.Pa(n.leaseTimestampMs,5e3)&&!e.ya(n.ownerId)){if(e.ma(n)&&e.networkEnabled)return!0;if(!e.ma(n)){if(!n.allowTabSynchronization)throw new Ir(Or.FAILED_PRECONDITION,Fu);return!1}}return!(!e.networkEnabled||!e.inForeground)||qu(t).Xn().next((function(t){return void 0===e.ga(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&lr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.pa=function(){return Object(r.b)(this,void 0,void 0,(function(){var t=this;return Object(r.d)(this,(function(e){switch(e.label){case 0:return this.Yo=!1,this.va(),this.ta&&(this.ta.cancel(),this.ta=null),this.ba(),this.Sa(),[4,this.ia.runTransaction("shutdown","readwrite",[lu.store,Eu.store],(function(e){var n=new Lu(e,Oa.nr);return t.Ea(n).next((function(){return t.Aa(n)}))}))];case 1:return e.sent(),this.ia.close(),this.Da(),[2]}}))}))},t.prototype.ga=function(t,e){var n=this;return t.filter((function(t){return n.Pa(t.updateTimeMs,e)&&!n.ya(t.clientId)}))},t.prototype.Ca=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return qu(e).Xn().next((function(e){return t.ga(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"yr",{get:function(){return this.Yo},enumerable:!1,configurable:!0}),t.prototype.Na=function(t){return Ka.qr(t,this.serializer,this.Fi,this.Lr)},t.prototype.xa=function(){return this.ra},t.prototype.Fa=function(){return this.Ni},t.prototype.Oa=function(){return this.Fi},t.prototype.Ma=function(){return this.oa},t.prototype.runTransaction=function(t,e,n){var r,i=this;return lr("IndexedDbPersistence","Starting transaction:",t),this.ia.runTransaction(t,"readonly"===e?"readonly":"readwrite",Ou,(function(o){return r=new Lu(o,i.Jo?i.Jo.next():Oa.nr),"readwrite-primary"===e?i.wa(r).next((function(t){return!!t||i.Ta(r)})).next((function(e){if(!e)throw hr("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.ln.Ss((function(){return i.na(!1)})),new Ir(Or.FAILED_PRECONDITION,Ca);return n(r)})).next((function(t){return i.Ia(r).next((function(){return t}))})):i.ka(r).next((function(){return n(r)}))})).then((function(t){return r.Ci(),t}))},t.prototype.ka=function(t){var e=this;return Vu(t).get(lu.key).next((function(t){if(null!==t&&e.Pa(t.leaseTimestampMs,5e3)&&!e.ya(t.ownerId)&&!e.ma(t)&&!(e.Ho||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ir(Or.FAILED_PRECONDITION,Fu)}))},t.prototype.Ia=function(t){var e=new lu(this.clientId,this.allowTabSynchronization,Date.now());return Vu(t).put(lu.key,e)},t.kn=function(){return Hs.kn()},t.prototype.Ea=function(t){var e=this,n=Vu(t);return n.get(lu.key).next((function(t){return e.ma(t)?(lr("IndexedDbPersistence","Releasing primary lease."),n.delete(lu.key)):Bs.resolve()}))},t.prototype.Pa=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(hr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.ua=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Zo=function(){t.ln.fs((function(){return t.inForeground="visible"===t.document.visibilityState,t.ca()}))},this.document.addEventListener("visibilitychange",this.Zo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.ba=function(){this.Zo&&(this.document.removeEventListener("visibilitychange",this.Zo),this.Zo=null)},t.prototype.ha=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Xo=function(){e.va(),e.ln.fs((function(){return e.pa()}))},this.window.addEventListener("unload",this.Xo))},t.prototype.Sa=function(){this.Xo&&(this.window.removeEventListener("unload",this.Xo),this.Xo=null)},t.prototype.ya=function(t){var e;try{var n=null!==(null===(e=this.aa)||void 0===e?void 0:e.getItem(this.Va(t)));return lr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return hr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.va=function(){if(this.aa)try{this.aa.setItem(this.Va(this.clientId),String(Date.now()))}catch(t){hr("Failed to set zombie client id.",t)}},t.prototype.Da=function(){if(this.aa)try{this.aa.removeItem(this.Va(this.clientId))}catch(t){}},t.prototype.Va=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Vu(t){return Uu.qn(t,lu.store)}function qu(t){return Uu.qn(t,Eu.store)}var Bu=function(){function t(t,e){this.db=t,this.Rr=new Na(this,e)}return t.prototype.Sr=function(t){var e=this.$a(t);return this.db.xa().Bo(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.$a=function(t){var e=0;return this.Cr(t,(function(t){e++})).next((function(){return e}))},t.prototype.De=function(t,e){return this.db.xa().De(t,e)},t.prototype.Cr=function(t,e){return this.La(t,(function(t,n){return e(n)}))},t.prototype.Qo=function(t,e,n){return Hu(t,n)},t.prototype.Wo=function(t,e,n){return Hu(t,n)},t.prototype.Nr=function(t,e,n){return this.db.xa().Nr(t,e,n)},t.prototype.eo=function(t,e){return Hu(t,e)},t.prototype.Ba=function(t,e){return function(t,e){var n=!1;return Ja(t).ss((function(r){return $a(t,r,e).next((function(t){return t&&(n=!0),Bs.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Fr=function(t,e){var n=this,r=this.db.Fa()._o(),i=[],o=0;return this.La(t,(function(s,a){if(a<=e){var u=n.Ba(t,s).next((function(e){if(!e)return o++,r.yi(t,s).next((function(){return r.Vi(s),Mu(t).delete([0,Ra(s.path)])}))}));i.push(u)}})).next((function(){return Bs.xn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.nt(t.Go);return this.db.xa().ko(t,n)},t.prototype.qa=function(t,e){return Hu(t,e)},t.prototype.La=function(t,e){var n,r=Mu(t),i=Oa.nr;return r.ns({index:_u.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Oa.nr&&e(new jr(Ma(n)),i),i=s,n=o):i=Oa.nr})).next((function(){i!==Oa.nr&&e(new jr(Ma(n)),i)}))},t.prototype.Mr=function(t){return this.db.Fa().wo(t)},t}();function Hu(t,e){return Mu(t).put(function(t,e){return new _u(0,Ra(t.path),e)}(e,t.Go))}function zu(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Wu=function(){function t(t,e,n,r){this.persistence=t,this.Ua=e,this.serializer=r,this.Qa=new Yr(_r),this.Ka=new Tr((function(t){return Vr(t)}),qr),this.Wa=Ar.min(),this.xi=t.Na(n),this.ja=t.Fa(),this.ra=t.xa(),this.Ga=new Sa(this.ja,this.xi,this.persistence.Oa()),this.oa=t.Ma(),this.Ua.za(this.Ga)}return t.prototype.pr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Or(n,e.Qa)}))},t}();function Qu(t,e,n,r){return new Wu(t,e,n,r)}function Gu(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s;return Object(r.d)(this,(function(r){switch(r.label){case 0:return n=yr(t),i=n.xi,o=n.Ga,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var r;return n.xi.Hr(t).next((function(s){return r=s,i=n.persistence.Na(e),o=new Sa(n.ja,i,n.persistence.Oa()),i.Hr(t)})).next((function(e){for(var n=[],i=[],s=ui(),a=0,u=r;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];i.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return o.Li(t,s).next((function(t){return{Ha:t,Ja:n,Ya:i}}))}))}))];case 1:return s=r.sent(),[2,(n.xi=i,n.Ga=o,n.Ua.za(n.Ga),s)]}}))}))}function Ku(t,e){var n=yr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.ja._o({fo:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Bs.resolve();return o.forEach((function(t){s=s.next((function(){return r.yi(e,t)})).next((function(e){var o=e,s=n.Ei.get(t);gr(null!==s),(!o||o.version.A(s)<0)&&(o=i._i(t,o,n))&&r.Ri(o,n.Ti)}))})),s.next((function(){return t.xi.Yr(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.xi.no(t)})).next((function(){return n.Ga.Li(t,r)}))}))}function $u(t){var e=yr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.ra.Co(t)}))}function Yu(t,e){var n=yr(t),r=e.et,i=n.Qa;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.ja._o({fo:!0});i=n.Qa;var s=[];e.Gt.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.ra.Ko(t,e.ne,o).next((function(){return n.ra.Uo(t,e.te,o)})));var u=e.resumeToken;if(u.X()>0){var c=a.st(u,r).nt(t.Go);i=i.rt(o,c),function(t,e,n){return gr(e.resumeToken.X()>0),0===t.resumeToken.X()||e.et.R()-t.et.R()>=3e8||n.te.size+n.ee.size+n.ne.size>0}(a,c,e)&&s.push(n.ra.ko(t,c))}}}));var a=ni();if(e.Ht.forEach((function(r,i){e.Jt.has(r)&&s.push(n.persistence.Lr.qa(t,r))})),s.push(function(t,e,n,r,i){var o=ui();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var i=ni();return n.forEach((function(n,o){var s=t.get(n),a=r;o instanceof is&&o.version.isEqual(Ar.min())?(e.Vi(n,a),i=i.rt(n,o)):null==s||o.version.A(s.version)>0||0===o.version.A(s.version)&&s.hasPendingWrites?(e.Ri(o,a),i=i.rt(n,o)):lr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),i}))}(t,o,e.Ht,r).next((function(t){a=t}))),!r.isEqual(Ar.min())){var u=n.ra.Co(t).next((function(e){return n.ra.xo(t,t.Go,r)}));s.push(u)}return Bs.xn(s).next((function(){return o.apply(t)})).next((function(){return n.Ga.Bi(t,a)}))})).then((function(t){return n.Qa=i,t}))}function Xu(t,e){var n=yr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.xi.Gr(t,e)}))}function Zu(t,e){var n=yr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.ra.qo(t,e).next((function(i){return i?Bs.resolve(r=i):n.ra.bo(t).next((function(i){return r=new Qr(e,i,0,t.Go),n.ra.Fo(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Qa.get(t.targetId);return(null===r||t.et.A(r.et)>0)&&(n.Qa=n.Qa.rt(t.targetId,t),n.Ka.set(e,t.targetId)),t}))}function Ju(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a;return Object(r.d)(this,(function(r){switch(r.label){case 0:i=yr(t),o=i.Qa.get(e),s=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",s,(function(t){return i.persistence.Lr.removeTarget(t,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!Qs(a=r.sent()))throw a;return lr("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return i.Qa=i.Qa.remove(e),i.Ka.delete(o.target),[2]}}))}))}function tc(t,e,n){var r=yr(t),i=Ar.min(),o=ui();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=yr(t),i=r.Ka.get(n);return void 0!==i?Bs.resolve(r.Qa.get(i)):r.ra.qo(e,n)}(r,t,gs(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.ra.jo(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Ua.Ui(t,e,n?i:Ar.min(),n?o:ui())})).next((function(t){return{documents:t,Xa:o}}))}))}function ec(t,e){var n=yr(t),r=yr(n.ra),i=n.Qa.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.qe(t,e).next((function(t){return t?t.target:null}))}))}function nc(t){var e=yr(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=yr(t),i=ni(),o=Va(n),s=ru(e),a=IDBKeyRange.lowerBound(o,!0);return s.ns({index:yu.readTimeIndex,range:a},(function(t,e){var n=La(r.serializer,e);i=i.rt(n.key,n),o=e.readTime})).next((function(){return{Za:i,readTime:qa(o)}}))}(e.ja,t,e.Wa)})).then((function(t){var n=t.Za;return e.Wa=t.readTime,n}))}function rc(t){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){return[2,(e=yr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ru(t),n=Ar.min();return e.ns({index:yu.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=qa(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Wa=t}))]}))}))}function ic(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){if(t.code!==Or.FAILED_PRECONDITION||t.message!==Ca)throw t;return lr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var oc=function(){function t(t,e,n,r,i,o){this.ln=t,this.tc=n,this.ec=r,this.nc=i,this.listener=o,this.state=0,this.sc=0,this.ic=null,this.stream=null,this.Ps=new qs(t,e)}return t.prototype.rc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.oc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ac()},t.prototype.stop=function(){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(t){switch(t.label){case 0:return this.rc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.cc=function(){this.state=0,this.Ps.reset()},t.prototype.uc=function(){var t=this;this.oc()&&null===this.ic&&(this.ic=this.ln.Pn(this.tc,6e4,(function(){return t.hc()})))},t.prototype.lc=function(t){this._c(),this.stream.send(t)},t.prototype.hc=function(){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(t){return this.oc()?[2,this.close(0)]:[2]}))}))},t.prototype._c=function(){this.ic&&(this.ic.cancel(),this.ic=null)},t.prototype.close=function(t,e){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(n){switch(n.label){case 0:return this._c(),this.Ps.cancel(),this.sc++,3!==t?this.Ps.reset():e&&e.code===Or.RESOURCE_EXHAUSTED?(hr(e.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.Ps.mn()):e&&e.code===Or.UNAUTHENTICATED&&this.nc.ni(),null!==this.stream&&(this.fc(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.dc(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.fc=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.wc(this.sc),n=this.sc;this.nc.getToken().then((function(e){t.sc===n&&t.Tc(e)}),(function(n){e((function(){var e=new Ir(Or.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Ec(e)}))}))},t.prototype.Tc=function(t){var e=this,n=this.wc(this.sc);this.stream=this.Ic(t),this.stream.mc((function(){n((function(){return e.state=2,e.listener.mc()}))})),this.stream.dc((function(t){n((function(){return e.Ec(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.ac=function(){var t=this;this.state=4,this.Ps.An((function(){return Object(r.b)(t,void 0,void 0,(function(){return Object(r.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Ec=function(t){return lr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.wc=function(t){var e=this;return function(n){e.ln.fs((function(){return e.sc===t?n():(lr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),sc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return Object(r.c)(e,t),e.prototype.Ic=function(t){return this.ec.Ac("Listen",t)},e.prototype.onMessage=function(t){this.Ps.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:pr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Ue?(gr(void 0===e||"string"==typeof e),Hr.fromBase64String(e||"")):(gr(void 0===e||e instanceof Uint8Array),Hr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?Or.UNKNOWN:$r(t.code);return new Ir(e,t.message||"")}(s);n=new vi(r,i,o,a||null)}else if("documentChange"in e){var u=e.documentChange,c=to(t,u.document.name),l=Yi(u.document.updateTime),h=new Jo({mapValue:{fields:u.document.fields}}),f=new rs(c,l,h,{});n=new yi(u.targetIds||[],u.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){var d=e.documentDelete,p=to(t,d.document),g=d.readTime?Yi(d.readTime):Ar.min(),y=new is(p,g);n=new yi([],d.removedTargetIds||[],y.key,y)}else if("documentRemove"in e){var m=e.documentRemove,v=to(t,m.document);n=new yi([],m.removedTargetIds||[],v,null)}else{if(!("filter"in e))return pr();var _=e.filter,b=new Gr(_.count||0);n=new mi(_.targetId,b)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Ar.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ar.min():e.readTime?Yi(e.readTime):Ar.min()}(t);return this.listener.Rc(e,n)},e.prototype.Pc=function(t){var e={};e.database=ro(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=Br(r)?{documents:uo(t,r)}:{query:co(t,r)}).targetId=e.targetId,e.resumeToken.X()>0?n.resumeToken=Ki(t,e.resumeToken):e.et.A(Ar.min())>0&&(n.readTime=Gi(t,e.et.P())),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pr()}}(0,e.tt);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.lc(e)},e.prototype.gc=function(t){var e={};e.database=ro(this.serializer),e.removeTarget=t,this.lc(e)},e}(oc),ac=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Vc=!1,s}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"yc",{get:function(){return this.Vc},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Vc=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.fc=function(){this.Vc&&this.vc([])},e.prototype.Ic=function(t){return this.ec.Ac("Write",t)},e.prototype.onMessage=function(t){if(gr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vc){this.Ps.reset();var e=function(t,e){return t&&t.length>0?(gr(void 0!==e),t.map((function(t){return function(t,e){var n=Yi(t.updateTime?t.updateTime:e);n.isEqual(Ar.min())&&(n=Yi(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Mo(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Yi(t.commitTime);return this.listener.bc(n,e)}return gr(!t.writeResults||0===t.writeResults.length),this.Vc=!0,this.listener.Sc()},e.prototype.Dc=function(){var t={};t.database=ro(this.serializer),this.lc(t)},e.prototype.vc=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return so(e.serializer,t)}))};this.lc(n)},e}(oc),uc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.ec=n,i.serializer=r,i.Cc=!1,i}return Object(r.c)(e,t),e.prototype.Nc=function(){if(this.Cc)throw new Ir(Or.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.xc=function(t,e,n){var r=this;return this.Nc(),this.credentials.getToken().then((function(i){return r.ec.xc(t,e,n,i)})).catch((function(t){throw t.code===Or.UNAUTHENTICATED&&r.credentials.ni(),t}))},e.prototype.Fc=function(t,e,n){var r=this;return this.Nc(),this.credentials.getToken().then((function(i){return r.ec.Fc(t,e,n,i)})).catch((function(t){throw t.code===Or.UNAUTHENTICATED&&r.credentials.ni(),t}))},e.prototype.terminate=function(){this.Cc=!1},e}((function(){})),cc=function(){function t(t,e){this.rs=t,this.Oc=e,this.state="Unknown",this.Mc=0,this.kc=null,this.$c=!0}return t.prototype.Lc=function(){var t=this;0===this.Mc&&(this.Bc("Unknown"),this.kc=this.rs.Pn("online_state_timeout",1e4,(function(){return t.kc=null,t.qc("Backend didn't respond within 10 seconds."),t.Bc("Offline"),Promise.resolve()})))},t.prototype.Uc=function(t){"Online"===this.state?this.Bc("Unknown"):(this.Mc++,this.Mc>=1&&(this.Qc(),this.qc("Connection failed 1 times. Most recent error: "+t.toString()),this.Bc("Offline")))},t.prototype.set=function(t){this.Qc(),this.Mc=0,"Online"===t&&(this.$c=!1),this.Bc(t)},t.prototype.Bc=function(t){t!==this.state&&(this.state=t,this.Oc(t))},t.prototype.qc=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.$c?(hr(e),this.$c=!1):lr("OnlineStateTracker",e)},t.prototype.Qc=function(){null!==this.kc&&(this.kc.cancel(),this.kc=null)},t}(),lc=function(t,e,n,i,o){var s=this;this.Kc=t,this.Wc=e,this.rs=n,this.jc={},this.Gc=[],this.zc=new Map,this.Hc=new Set,this.Jc=[],this.Yc=o,this.Yc.Xc((function(t){n.fs((function(){return Object(r.b)(s,void 0,void 0,(function(){return Object(r.d)(this,(function(t){switch(t.label){case 0:return _c(this)?(lr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){switch(n.label){case 0:return(e=yr(t)).Hc.add(4),[4,fc(e)];case 1:return n.sent(),e.Zc.set("Unknown"),e.Hc.delete(4),[4,hc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Zc=new cc(n,i)};function hc(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n;return Object(r.d)(this,(function(r){switch(r.label){case 0:if(!_c(t))return[3,4];e=0,n=t.Jc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function fc(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n;return Object(r.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.Jc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function dc(t,e){var n=yr(t);n.zc.has(e.targetId)||(n.zc.set(e.targetId,e),vc(n)?mc(n):jc(n).oc()&&gc(n,e))}function pc(t,e){var n=yr(t),r=jc(n);n.zc.delete(e),r.oc()&&yc(n,e),0===n.zc.size&&(r.oc()?r.uc():_c(n)&&n.Zc.set("Unknown"))}function gc(t,e){t.tu.Ie(e.targetId),jc(t).Pc(e)}function yc(t,e){t.tu.Ie(e),jc(t).gc(e)}function mc(t){t.tu=new bi({Be:function(e){return t.jc.Be(e)},qe:function(e){return t.zc.get(e)||null}}),jc(t).start(),t.Zc.Lc()}function vc(t){return _c(t)&&!jc(t).rc()&&t.zc.size>0}function _c(t){return 0===yr(t).Hc.size}function bc(t){t.tu=void 0}function wc(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){return t.zc.forEach((function(e,n){gc(t,e)})),[2]}))}))}function Cc(t,e){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(n){return bc(t),vc(t)?(t.Zc.Uc(e),mc(t)):t.Zc.set("Unknown"),[2]}))}))}function Ec(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s;return Object(r.d)(this,(function(a){switch(a.label){case 0:if(t.Zc.set("Online"),!(e instanceof vi&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s;return Object(r.d)(this,(function(r){switch(r.label){case 0:n=e.cause,i=0,o=e.targetIds,r.label=1;case 1:return i<o.length?t.zc.has(s=o[i])?[4,t.jc.eu(s,n)]:[3,3]:[3,5];case 2:r.sent(),t.zc.delete(s),t.tu.removeTarget(s),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return i=a.sent(),lr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,Sc(t,i)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof yi?t.tu.pe(e):e instanceof mi?t.tu.Fe(e):t.tu.Se(e),n.isEqual(Ar.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,$u(t.Kc)];case 8:return o=a.sent(),n.A(o)>=0?[4,function(t,e){var n=t.tu.ke(e);return n.Gt.forEach((function(n,r){if(n.resumeToken.X()>0){var i=t.zc.get(r);i&&t.zc.set(r,i.st(n.resumeToken,e))}})),n.zt.forEach((function(e){var n=t.zc.get(e);if(n){t.zc.set(e,n.st(Hr.Z,n.et)),yc(t,e);var r=new Qr(n.target,e,1,n.sequenceNumber);gc(t,r)}})),t.jc.nu(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return lr("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,Sc(t,s)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Sc(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i=this;return Object(r.d)(this,(function(o){switch(o.label){case 0:if(!Qs(e))throw e;return t.Hc.add(1),[4,fc(t)];case 1:return o.sent(),t.Zc.set("Offline"),n||(n=function(){return $u(t.Kc)}),t.rs.Ss((function(){return Object(r.b)(i,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return lr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Hc.delete(1),[4,hc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Tc(t,e){return e().catch((function(n){return Sc(t,n,e)}))}function Oc(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n,i,o,s;return Object(r.d)(this,(function(r){switch(r.label){case 0:e=yr(t),n=Dc(e),i=e.Gc.length>0?e.Gc[e.Gc.length-1].batchId:-1,r.label=1;case 1:if(!function(t){return _c(t)&&t.Gc.length<10}(e))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,Xu(e.Kc,i)];case 3:return null===(o=r.sent())?(0===e.Gc.length&&n.uc(),[3,7]):(i=o.batchId,function(t,e){t.Gc.push(e);var n=Dc(t);n.oc()&&n.yc&&n.vc(e.mutations)}(e,o),[3,6]);case 4:return s=r.sent(),[4,Sc(e,s)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return Ic(e)&&xc(e),[2]}}))}))}function Ic(t){return _c(t)&&!Dc(t).rc()&&t.Gc.length>0}function xc(t){Dc(t).start()}function Ac(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){return Dc(t).Dc(),[2]}))}))}function kc(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n,i;return Object(r.d)(this,(function(r){for(e=Dc(t),n=0,i=t.Gc;n<i.length;n++)e.vc(i[n].mutations);return[2]}))}))}function Pc(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o;return Object(r.d)(this,(function(r){switch(r.label){case 0:return i=t.Gc.shift(),o=va.from(i,e,n),[4,Tc(t,(function(){return t.jc.su(o)}))];case 1:return r.sent(),[4,Oc(t)];case 2:return r.sent(),[2]}}))}))}function Nc(t,e){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(n){switch(n.label){case 0:return e&&Dc(t).yc?[4,function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i;return Object(r.d)(this,(function(r){switch(r.label){case 0:return Kr(i=e.code)&&i!==Or.ABORTED?(n=t.Gc.shift(),Dc(t).cc(),[4,Tc(t,(function(){return t.jc.iu(n.batchId,e)}))]):[3,3];case 1:return r.sent(),[4,Oc(t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Ic(t)&&xc(t),[2]}}))}))}function Rc(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n;return Object(r.d)(this,(function(r){switch(r.label){case 0:return n=yr(t),e?(n.Hc.delete(2),[4,hc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Hc.add(2),[4,fc(n)]);case 3:r.sent(),n.Zc.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function jc(t){var e=this;return t.ru||(t.ru=function(t,e,n){var r=yr(t);return r.Nc(),new sc(e,r.ec,r.credentials,r.serializer,n)}(t.Wc,t.rs,{mc:wc.bind(null,t),dc:Cc.bind(null,t),Rc:Ec.bind(null,t)}),t.Jc.push((function(n){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return n?(t.ru.cc(),vc(t)?mc(t):t.Zc.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.ru.stop()];case 2:e.sent(),bc(t),e.label=3;case 3:return[2]}}))}))}))),t.ru}function Dc(t){var e=this;return t.ou||(t.ou=function(t,e,n){var r=yr(t);return r.Nc(),new ac(e,r.ec,r.credentials,r.serializer,n)}(t.Wc,t.rs,{mc:Ac.bind(null,t),dc:Nc.bind(null,t),Sc:kc.bind(null,t),bc:Pc.bind(null,t)}),t.Jc.push((function(n){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return n?(t.ou.cc(),[4,Oc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.ou.stop()];case 3:e.sent(),t.Gc.length>0&&(lr("RemoteStore","Stopping write stream with "+t.Gc.length+" pending writes"),t.Gc=[]),e.label=4;case 4:return[2]}}))}))}))),t.ou}var Mc=function(){function t(){this.au=new Jr(Fc.cu),this.uu=new Jr(Fc.hu)}return t.prototype.T=function(){return this.au.T()},t.prototype.Qo=function(t,e){var n=new Fc(t,e);this.au=this.au.add(n),this.uu=this.uu.add(n)},t.prototype.lu=function(t,e){var n=this;t.forEach((function(t){return n.Qo(t,e)}))},t.prototype.Wo=function(t,e){this._u(new Fc(t,e))},t.prototype.fu=function(t,e){var n=this;t.forEach((function(t){return n.Wo(t,e)}))},t.prototype.du=function(t){var e=this,n=new jr(new Pr([])),r=new Fc(n,t),i=new Fc(n,t+1),o=[];return this.uu.Nt([r,i],(function(t){e._u(t),o.push(t.key)})),o},t.prototype.wu=function(){var t=this;this.au.forEach((function(e){return t._u(e)}))},t.prototype._u=function(t){this.au=this.au.delete(t),this.uu=this.uu.delete(t)},t.prototype.Tu=function(t){var e=new jr(new Pr([])),n=new Fc(e,t),r=new Fc(e,t+1),i=ui();return this.uu.Nt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.so=function(t){var e=new Fc(t,0),n=this.au.Ft(e);return null!==n&&t.isEqual(n.key)},t}(),Fc=function(){function t(t,e){this.key=t,this.Eu=e}return t.cu=function(t,e){return jr.V(t.key,e.key)||_r(t.Eu,e.Eu)},t.hu=function(t,e){return _r(t.Eu,e.Eu)||jr.V(t.key,e.key)},t}();function Lc(t,e){return"firestore_clients_"+t+"_"+e}function Uc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Js()&&(r+="_"+e.uid),r}function Vc(t,e){return"firestore_targets_"+t+"_"+e}var qc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Iu=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new Ir(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(hr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.mu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Bc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Iu=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Ir(r.error.code,r.error.message)),i?new t(e,r.state,o):(hr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.mu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Hc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Iu=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=li(),s=0;i&&s<r.activeTargetIds.length;++s)i=Fr(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(hr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),zc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Iu=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(hr("SharedClientState","Failed to parse online state: "+e),null)},t}(),Wc=function(){function t(){this.activeTargetIds=li()}return t.prototype.Au=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Ru=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.mu=function(){var t={activeTargetIds:this.activeTargetIds.O(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Qc=function(){function t(t,e,n,r,i){this.window=t,this.ln=e,this.persistenceKey=n,this.Pu=r,this.gu=null,this.Oc=null,this.Xi=null,this.Vu=this.yu.bind(this),this.pu=new Yr(_r),this.yr=!1,this.vu=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.bu=Lc(this.persistenceKey,this.Pu),this.Su=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.pu=this.pu.rt(this.Pu,new Wc),this.Du=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Cu=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Nu=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.xu=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Fu=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Vu)}return t.kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(r.b)(this,void 0,void 0,(function(){var t,e,n,i,o,s,a,u,c,l,h=this;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,this.gu.Ca()];case 1:for(t=r.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this.Pu&&(o=this.getItem(Lc(this.persistenceKey,i)))&&(s=Hc.Iu(i,o))&&(this.pu=this.pu.rt(s.clientId,s));for(this.Ou(),(a=this.storage.getItem(this.xu))&&(u=this.Mu(a))&&this.ku(u),c=0,l=this.vu;c<l.length;c++)this.yu(l[c]);return this.vu=[],this.window.addEventListener("unload",(function(){return h.pa()})),this.yr=!0,[2]}}))}))},t.prototype.er=function(t){this.setItem(this.Su,JSON.stringify(t))},t.prototype.$u=function(){return this.Lu(this.pu)},t.prototype.Bu=function(t){var e=!1;return this.pu.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.qu=function(t){this.Uu(t,"pending")},t.prototype.Qu=function(t,e,n){this.Uu(t,e,n),this.Ku(t)},t.prototype.Wu=function(t){var e="not-current";if(this.Bu(t)){var n=this.storage.getItem(Vc(this.persistenceKey,t));if(n){var r=Bc.Iu(t,n);r&&(e=r.state)}}return this.ju.Au(t),this.Ou(),e},t.prototype.Gu=function(t){this.ju.Ru(t),this.Ou()},t.prototype.zu=function(t){return this.ju.activeTargetIds.has(t)},t.prototype.Hu=function(t){this.removeItem(Vc(this.persistenceKey,t))},t.prototype.Ju=function(t,e,n){this.Yu(t,e,n)},t.prototype.Xu=function(t,e,n){var r=this;e.forEach((function(t){r.Ku(t)})),this.currentUser=t,n.forEach((function(t){r.qu(t)}))},t.prototype.Zu=function(t){this.th(t)},t.prototype.eh=function(){this.nh()},t.prototype.pa=function(){this.yr&&(this.window.removeEventListener("storage",this.Vu),this.removeItem(this.bu),this.yr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return lr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){lr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){lr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.yu=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(lr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.bu)return void hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ln.Ss((function(){return Object(r.b)(e,void 0,void 0,(function(){var t,e,i,o,s,a;return Object(r.d)(this,(function(r){if(this.yr){if(null!==n.key)if(this.Du.test(n.key)){if(null==n.newValue)return t=this.sh(n.key),[2,this.ih(t,null)];if(e=this.rh(n.key,n.newValue))return[2,this.ih(e.clientId,e)]}else if(this.Cu.test(n.key)){if(null!==n.newValue&&(i=this.oh(n.key,n.newValue)))return[2,this.ah(i)]}else if(this.Nu.test(n.key)){if(null!==n.newValue&&(o=this.uh(n.key,n.newValue)))return[2,this.hh(o)]}else if(n.key===this.xu){if(null!==n.newValue&&(s=this.Mu(n.newValue)))return[2,this.ku(s)]}else if(n.key===this.Su)(a=function(t){var e=Oa.nr;if(null!=t)try{var n=JSON.parse(t);gr("number"==typeof n),e=n}catch(t){hr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Oa.nr&&this.Xi(a);else if(n.key===this.Fu)return[2,this.gu.lh()]}else this.vu.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"ju",{get:function(){return this.pu.get(this.Pu)},enumerable:!1,configurable:!0}),t.prototype.Ou=function(){this.setItem(this.bu,this.ju.mu())},t.prototype.Uu=function(t,e,n){var r=new qc(this.currentUser,t,e,n),i=Uc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.mu())},t.prototype.Ku=function(t){var e=Uc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.th=function(t){this.storage.setItem(this.xu,JSON.stringify({clientId:this.Pu,onlineState:t}))},t.prototype.Yu=function(t,e,n){var r=Vc(this.persistenceKey,t),i=new Bc(t,e,n);this.setItem(r,i.mu())},t.prototype.nh=function(){this.setItem(this.Fu,"value-not-used")},t.prototype.sh=function(t){var e=this.Du.exec(t);return e?e[1]:null},t.prototype.rh=function(t,e){var n=this.sh(t);return Hc.Iu(n,e)},t.prototype.oh=function(t,e){var n=this.Cu.exec(t),r=Number(n[1]);return qc.Iu(new ha(void 0!==n[2]?n[2]:null),r,e)},t.prototype.uh=function(t,e){var n=this.Nu.exec(t),r=Number(n[1]);return Bc.Iu(r,e)},t.prototype.Mu=function(t){return zc.Iu(t)},t.prototype.ah=function(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.gu._h(t.batchId,t.state,t.error)]:(lr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.hh=function(t){return this.gu.fh(t.targetId,t.state,t.error)},t.prototype.ih=function(t,e){var n=this,r=e?this.pu.rt(t,e):this.pu.remove(t),i=this.Lu(this.pu),o=this.Lu(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.gu.dh(s,a).then((function(){n.pu=r}))},t.prototype.ku=function(t){this.pu.get(t.clientId)&&this.Oc(t.onlineState)},t.prototype.Lu=function(t){var e=li();return t.forEach((function(t,n){e=e.Ot(n.activeTargetIds)})),e},t}(),Gc=function(){function t(){this.wh=new Wc,this.Th={},this.Oc=null,this.Xi=null}return t.prototype.qu=function(t){},t.prototype.Qu=function(t,e,n){},t.prototype.Wu=function(t){return this.wh.Au(t),this.Th[t]||"not-current"},t.prototype.Ju=function(t,e,n){this.Th[t]=e},t.prototype.Gu=function(t){this.wh.Ru(t)},t.prototype.zu=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.Hu=function(t){delete this.Th[t]},t.prototype.$u=function(){return this.wh.activeTargetIds},t.prototype.Bu=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.start=function(){return this.wh=new Wc,Promise.resolve()},t.prototype.Xu=function(t,e,n){},t.prototype.Zu=function(t){},t.prototype.pa=function(){},t.prototype.er=function(t){},t.prototype.eh=function(){},t}(),Kc=function(t){this.key=t},$c=function(t){this.key=t},Yc=function(){function t(t,e){this.query=t,this.Eh=e,this.Ih=null,this.Zt=!1,this.mh=ui(),this.Qt=ui(),this.Ah=Es(t),this.Rh=new hi(this.Ah)}return Object.defineProperty(t.prototype,"Ph",{get:function(){return this.Eh},enumerable:!1,configurable:!0}),t.prototype.gh=function(t,e){var n=this,r=e?e.Vh:new fi,i=e?e.Rh:this.Rh,o=e?e.Qt:this.Qt,s=i,a=!1,u=cs(this.query)&&i.size===this.query.limit?i.last():null,c=ls(this.query)&&i.size===this.query.limit?i.first():null;if(t.ut((function(t,e){var l=i.get(t),h=e instanceof rs?e:null;h&&(h=Cs(n.query,h)?h:null);var f=!!l&&n.Qt.has(l.key),d=!!h&&(h.Je||n.Qt.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yh(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Ah(h,u)>0||c&&n.Ah(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),cs(this.query)||ls(this.query))for(;s.size>this.query.limit;){var l=cs(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Rh:s,Vh:r,ph:a,Qt:o}},t.prototype.yh=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},t.prototype.bi=function(t,e,n){var r=this,i=this.Rh;this.Rh=t.Rh,this.Qt=t.Qt;var o=t.Vh.qt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pr()}};return n(t)-n(e)}(t.type,e.type)||r.Ah(t.doc,e.doc)})),this.bh(n);var s=e?this.Sh():[],a=0===this.mh.size&&this.Zt?1:0,u=a!==this.Ih;return this.Ih=a,0!==o.length||u?{snapshot:new di(this.query,t.Rh,i,o,t.Qt,0===a,u,!1),Dh:s}:{Dh:s}},t.prototype.Bs=function(t){return this.Zt&&"Offline"===t?(this.Zt=!1,this.bi({Rh:this.Rh,Vh:new fi,Qt:this.Qt,ph:!1},!1)):{Dh:[]}},t.prototype.Ch=function(t){return!this.Eh.has(t)&&!!this.Rh.has(t)&&!this.Rh.get(t).Je},t.prototype.bh=function(t){var e=this;t&&(t.te.forEach((function(t){return e.Eh=e.Eh.add(t)})),t.ee.forEach((function(t){})),t.ne.forEach((function(t){return e.Eh=e.Eh.delete(t)})),this.Zt=t.Zt)},t.prototype.Sh=function(){var t=this;if(!this.Zt)return[];var e=this.mh;this.mh=ui(),this.Rh.forEach((function(e){t.Ch(e.key)&&(t.mh=t.mh.add(e.key))}));var n=[];return e.forEach((function(e){t.mh.has(e)||n.push(new $c(e))})),this.mh.forEach((function(t){e.has(t)||n.push(new Kc(t))})),n},t.prototype.Nh=function(t){this.Eh=t.Xa,this.mh=ui();var e=this.gh(t.documents);return this.bi(e,!0)},t.prototype.xh=function(){return di.jt(this.query,this.Rh,this.Qt,0===this.Ih)},t}(),Xc=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Zc=function(t){this.key=t,this.Fh=!1},Jc=function(){function t(t,e,n,r,i,o){this.Kc=t,this.Oh=e,this.Mh=n,this.kh=r,this.currentUser=i,this.$h=o,this.Lh={},this.Bh=new Tr((function(t){return bs(t)}),_s),this.qh=new Map,this.Uh=[],this.Qh=new Yr(jr.V),this.Kh=new Map,this.Wh=new Mc,this.jh={},this.Gh=new Map,this.zh=Nu.vo(),this.onlineState="Unknown",this.Hh=void 0}return Object.defineProperty(t.prototype,"Jh",{get:function(){return!0===this.Hh},enumerable:!1,configurable:!0}),t}();function tl(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a;return Object(r.d)(this,(function(r){switch(r.label){case 0:return n=Al(t),(o=n.Bh.get(e))?(n.kh.Wu(o.targetId),i=o.view.xh(),[3,4]):[3,1];case 1:return[4,Zu(n.Kc,gs(e))];case 2:return s=r.sent(),a=n.kh.Wu(s.targetId),[4,el(n,e,s.targetId,"current"===a)];case 3:i=r.sent(),n.Jh&&dc(n.Oh,s),r.label=4;case 4:return[2,i]}}))}))}function el(t,e,n,i){return Object(r.b)(this,void 0,void 0,(function(){var o,s,a,u,c,l;return Object(r.d)(this,(function(h){switch(h.label){case 0:return t.Yh=function(e,n,i){return function(t,e,n,i){return Object(r.b)(this,void 0,void 0,(function(){var o,s,a;return Object(r.d)(this,(function(r){switch(r.label){case 0:return(o=e.view.gh(n)).ph?[4,tc(t.Kc,e.query,!1).then((function(t){return e.view.gh(t.documents,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return s=i&&i.Gt.get(e.targetId),a=e.view.bi(o,t.Jh,s),[2,(pl(t,e.targetId,a.Dh),a.snapshot)]}}))}))}(t,e,n,i)},[4,tc(t.Kc,e,!0)];case 1:return o=h.sent(),s=new Yc(e,o.Xa),a=s.gh(o.documents),u=gi.Xt(n,i&&"Offline"!==t.onlineState),c=s.bi(a,t.Jh,u),pl(t,n,c.Dh),l=new Xc(e,n,s),[2,(t.Bh.set(e,l),t.qh.has(n)?t.qh.get(n).push(e):t.qh.set(n,[e]),c.snapshot)]}}))}))}function nl(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o;return Object(r.d)(this,(function(r){switch(r.label){case 0:return n=yr(t),i=n.Bh.get(e),(o=n.qh.get(i.targetId)).length>1?[2,(n.qh.set(i.targetId,o.filter((function(t){return!_s(t,e)}))),void n.Bh.delete(e))]:n.Jh?(n.kh.Gu(i.targetId),n.kh.Bu(i.targetId)?[3,2]:[4,Ju(n.Kc,i.targetId,!1).then((function(){n.kh.Hu(i.targetId),pc(n.Oh,i.targetId),fl(n,i.targetId)})).catch(ic)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return fl(n,i.targetId),[4,Ju(n.Kc,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function rl(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a;return Object(r.d)(this,(function(r){switch(r.label){case 0:i=kl(t),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(t,e){var n,r=yr(t),i=xr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),ui());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ga.Li(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Bo(c,n.get(c.key));null!=l&&s.push(new Qo(c.key,l,es(l.proto.mapValue),Fo.exists(!0)))}return r.xi.Qr(t,i,s,e)}))})).then((function(t){var e=t.wi(n);return{batchId:t.batchId,Ii:e}}))}(i.Kc,e)];case 2:return o=r.sent(),i.kh.qu(o.batchId),function(t,e,n){var r=t.jh[t.currentUser.Ys()];r||(r=new Yr(_r)),r=r.rt(e,n),t.jh[t.currentUser.Ys()]=r}(i,o.batchId,n),[4,ml(i,o.Ii)];case 3:return r.sent(),[4,Oc(i.Oh)];case 4:return r.sent(),[3,6];case 5:return s=r.sent(),a=na(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function il(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i;return Object(r.d)(this,(function(r){switch(r.label){case 0:n=yr(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Yu(n.Kc,e)];case 2:return i=r.sent(),e.Gt.forEach((function(t,e){var r=n.Kh.get(e);r&&(gr(t.te.size+t.ee.size+t.ne.size<=1),t.te.size>0?r.Fh=!0:t.ee.size>0?gr(r.Fh):t.ne.size>0&&(gr(r.Fh),r.Fh=!1))})),[4,ml(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,ic(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function ol(t,e,n){var r=yr(t);if(r.Jh&&0===n||!r.Jh&&1===n){var i=[];r.Bh.forEach((function(t,n){var r=n.view.Bs(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=yr(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Bs(e)&&(r=!0)})),r&&ca(n)}(r.Mh,e),i.length&&r.Lh.Rc(i),r.onlineState=e,r.Jh&&r.kh.Zu(e)}}function sl(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(r.d)(this,(function(r){switch(r.label){case 0:return(i=yr(t)).kh.Ju(e,"rejected",n),o=i.Kh.get(e),(s=o&&o.key)?(a=(a=new Yr(jr.V)).rt(s,new is(s,Ar.min())),u=ui().add(s),c=new pi(Ar.min(),new Map,new Jr(_r),a,u),[4,il(i,c)]):[3,2];case 1:return r.sent(),i.Qh=i.Qh.remove(s),i.Kh.delete(e),yl(i),[3,4];case 2:return[4,Ju(i.Kc,e,!1).then((function(){return fl(i,e,n)})).catch(ic)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function al(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o;return Object(r.d)(this,(function(r){switch(r.label){case 0:n=yr(t),i=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Ku(n.Kc,e)];case 2:return o=r.sent(),hl(n,i,null),ll(n,i),n.kh.Qu(i,"acknowledged"),[4,ml(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,ic(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function ul(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o;return Object(r.d)(this,(function(r){switch(r.label){case 0:i=yr(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=yr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.xi.Wr(t,e).next((function(e){return gr(null!==e),r=e.keys(),n.xi.Yr(t,e)})).next((function(){return n.xi.no(t)})).next((function(){return n.Ga.Li(t,r)}))}))}(i.Kc,e)];case 2:return o=r.sent(),hl(i,e,n),ll(i,e),i.kh.Qu(e,"rejected",n),[4,ml(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,ic(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function cl(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a;return Object(r.d)(this,(function(r){switch(r.label){case 0:_c((n=yr(t)).Oh)||lr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(t){var e=yr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.xi.zr(t)}))}(n.Kc)];case 2:return-1===(i=r.sent())?[2,void e.resolve()]:((o=n.Gh.get(i)||[]).push(e),n.Gh.set(i,o),[3,4]);case 3:return s=r.sent(),a=na(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function ll(t,e){(t.Gh.get(e)||[]).forEach((function(t){t.resolve()})),t.Gh.delete(e)}function hl(t,e,n){var r=yr(t),i=r.jh[r.currentUser.Ys()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.jh[r.currentUser.Ys()]=i}}function fl(t,e,n){void 0===n&&(n=null),t.kh.Gu(e);for(var r=0,i=t.qh.get(e);r<i.length;r++){var o=i[r];t.Bh.delete(o),n&&t.Lh.Xh(o,n)}t.qh.delete(e),t.Jh&&t.Wh.du(e).forEach((function(e){t.Wh.so(e)||dl(t,e)}))}function dl(t,e){var n=t.Qh.get(e);null!==n&&(pc(t.Oh,n),t.Qh=t.Qh.remove(e),t.Kh.delete(n),yl(t))}function pl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Kc?(t.Wh.Qo(o.key,e),gl(t,o)):o instanceof $c?(lr("SyncEngine","Document no longer in limbo: "+o.key),t.Wh.Wo(o.key,e),t.Wh.so(o.key)||dl(t,o.key)):pr()}}function gl(t,e){var n=e.key;t.Qh.get(n)||(lr("SyncEngine","New document in limbo: "+n),t.Uh.push(n),yl(t))}function yl(t){for(;t.Uh.length>0&&t.Qh.size<t.$h;){var e=t.Uh.shift(),n=t.zh.next();t.Kh.set(n,new Zc(e)),t.Qh=t.Qh.rt(e,n),dc(t.Oh,new Qr(gs(us(e.path)),n,2,Oa.nr))}}function ml(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a;return Object(r.d)(this,(function(u){switch(u.label){case 0:return i=yr(t),o=[],s=[],a=[],i.Bh.T()?[3,3]:(i.Bh.forEach((function(t,r){a.push(i.Yh(r,e,n).then((function(t){if(t){i.Jh&&i.kh.Ju(r.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=Ta.Yi(r.targetId,t);s.push(e)}})))})),[4,Promise.all(a)]);case 1:return u.sent(),i.Lh.Rc(o),[4,function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,l;return Object(r.d)(this,(function(r){switch(r.label){case 0:n=yr(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Bs.forEach(e,(function(e){return Bs.forEach(e.Hi,(function(r){return n.persistence.Lr.Qo(t,e.targetId,r)})).next((function(){return Bs.forEach(e.Ji,(function(r){return n.persistence.Lr.Wo(t,e.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!Qs(i=r.sent()))throw i;return lr("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,s=e;o<s.length;o++)u=(a=s[o]).targetId,a.fromCache||(c=n.Qa.get(u),l=c.it(c.et),n.Qa=n.Qa.rt(u,l));return[2]}}))}))}(i.Kc,s)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function vl(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i;return Object(r.d)(this,(function(r){switch(r.label){case 0:return(n=yr(t)).currentUser.isEqual(e)?[3,3]:(lr("SyncEngine","User change. New user:",e.Ys()),[4,Gu(n.Kc,e)]);case 1:return i=r.sent(),n.currentUser=e,function(t,e){t.Gh.forEach((function(t){t.forEach((function(t){t.reject(new Ir(Or.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Gh.clear()}(n),n.kh.Xu(e,i.Ja,i.Ya),[4,ml(n,i.Ha)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}function _l(t,e){var n=yr(t),r=n.Kh.get(e);if(r&&r.Fh)return ui().add(r.key);var i=ui(),o=n.qh.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Bh.get(a[s]);i=i.Ot(u.view.Ph)}return i}function bl(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,tc((n=yr(t)).Kc,e.query,!0)];case 1:return i=r.sent(),o=e.view.Nh(i),[2,(n.Jh&&pl(n,e.targetId,o.Dh),o)]}}))}))}function wl(t){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){return[2,nc((e=yr(t)).Kc).then((function(t){return ml(e,t)}))]}))}))}function Cl(t,e,n,i){return Object(r.b)(this,void 0,void 0,(function(){var o,s;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,function(t,e){var n=yr(t),r=yr(n.xi);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jr(t,e).next((function(e){return e?n.Ga.Li(t,e):Bs.resolve(null)}))}))}((o=yr(t)).Kc,e)];case 1:return null===(s=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,Oc(o.Oh)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(hl(o,e,i||null),ll(o,e),function(t,e){yr(yr(t).xi).Zr(e)}(o.Kc,e)):pr(),r.label=4;case 4:return[4,ml(o,s)];case 5:return r.sent(),[3,7];case 6:lr("SyncEngine","Cannot apply mutation batch with id: "+e),r.label=7;case 7:return[2]}}))}))}function El(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c;return Object(r.d)(this,(function(r){switch(r.label){case 0:return Al(n=yr(t)),kl(n),!0!==e||!0===n.Hh?[3,3]:(i=n.kh.$u(),[4,Sl(n,i.O())]);case 1:return o=r.sent(),n.Hh=!0,[4,Rc(n.Oh,!0)];case 2:for(r.sent(),s=0,a=o;s<a.length;s++)dc(n.Oh,a[s]);return[3,7];case 3:return!1!==e||!1===n.Hh?[3,7]:(u=[],c=Promise.resolve(),n.qh.forEach((function(t,e){n.kh.zu(e)?u.push(e):c=c.then((function(){return fl(n,e),Ju(n.Kc,e,!0)})),pc(n.Oh,e)})),[4,c]);case 4:return r.sent(),[4,Sl(n,u)];case 5:return r.sent(),function(t){var e=yr(t);e.Kh.forEach((function(t,n){pc(e.Oh,n)})),e.Wh.wu(),e.Kh=new Map,e.Qh=new Yr(jr.V)}(n),n.Hh=!1,[4,Rc(n.Oh,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function Sl(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,l,h,f,d,p,g;return Object(r.d)(this,(function(r){switch(r.label){case 0:n=yr(t),i=[],o=[],s=0,a=e,r.label=1;case 1:return s<a.length?(c=void 0,(l=n.qh.get(u=a[s]))&&0!==l.length?[4,Zu(n.Kc,gs(l[0]))]:[3,7]):[3,13];case 2:c=r.sent(),h=0,f=l,r.label=3;case 3:return h<f.length?(d=n.Bh.get(f[h]),[4,bl(n,d)]):[3,6];case 4:(p=r.sent()).snapshot&&o.push(p.snapshot),r.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,ec(n.Kc,u)];case 8:return g=r.sent(),[4,Zu(n.Kc,g)];case 9:return c=r.sent(),[4,el(n,Tl(g),u,!1)];case 10:r.sent(),r.label=11;case 11:i.push(c),r.label=12;case 12:return s++,[3,1];case 13:return[2,(n.Lh.Rc(o),i)]}}))}))}function Tl(t){return as(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ol(t){var e=yr(t);return yr(yr(e.Kc).persistence).Ca()}function Il(t,e,n,i){return Object(r.b)(this,void 0,void 0,(function(){var o,s,a;return Object(r.d)(this,(function(r){switch(r.label){case 0:return(o=yr(t)).Hh?(lr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.qh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,nc(o.Kc)];case 3:return s=r.sent(),a=pi.Yt(e,"current"===n),[4,ml(o,s,a)];case 4:return r.sent(),[3,8];case 5:return[4,Ju(o.Kc,e,!0)];case 6:return r.sent(),fl(o,e,i),[3,8];case 7:pr(),r.label=8;case 8:return[2]}}))}))}function xl(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,f;return Object(r.d)(this,(function(d){switch(d.label){case 0:if(!(i=Al(t)).Hh)return[3,10];o=0,s=e,d.label=1;case 1:return o<s.length?i.qh.has(a=s[o])?(lr("SyncEngine","Adding an already active target "+a),[3,5]):[4,ec(i.Kc,a)]:[3,6];case 2:return u=d.sent(),[4,Zu(i.Kc,u)];case 3:return c=d.sent(),[4,el(i,Tl(u),c.targetId,!1)];case 4:d.sent(),dc(i.Oh,c),d.label=5;case 5:return o++,[3,1];case 6:l=function(t){return Object(r.d)(this,(function(e){switch(e.label){case 0:return i.qh.has(t)?[4,Ju(i.Kc,t,!1).then((function(){pc(i.Oh,t),fl(i,t)})).catch(ic)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,d.label=7;case 7:return h<f.length?[5,l(f[h])]:[3,10];case 8:d.sent(),d.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Al(t){var e=yr(t);return e.Oh.jc.nu=il.bind(null,e),e.Oh.jc.Be=_l.bind(null,e),e.Oh.jc.eu=sl.bind(null,e),e.Lh.Rc=aa.bind(null,e.Mh),e.Lh.Xh=ua.bind(null,e.Mh),e}function kl(t){var e=yr(t);return e.Oh.jc.su=al.bind(null,e),e.Oh.jc.iu=ul.bind(null,e),e}var Pl=function(){function t(){}return t.prototype.za=function(t){this.Zh=t},t.prototype.Ui=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.rn.length||1===t.rn.length&&t.rn[0].field.B())}(e)||n.isEqual(Ar.min())?this.tl(t,e):this.Zh.Li(t,r).next((function(s){var a=i.el(e,s);return(cs(e)||ls(e))&&i.ph(e.limitType,a,r,n)?i.tl(t,e):(cr()<=o.a.DEBUG&&lr("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ws(e)),i.Zh.Ui(t,e,n).next((function(t){return a.forEach((function(e){t=t.rt(e.key,e)})),t})))}))},t.prototype.el=function(t,e){var n=new Jr(Es(t));return e.forEach((function(e,r){r instanceof rs&&Cs(t,r)&&(n=n.add(r))})),n},t.prototype.ph=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.A(r)>0)},t.prototype.tl=function(t,e){return cr()<=o.a.DEBUG&&lr("IndexFreeQueryEngine","Using full collection scan to execute query:",ws(e)),this.Zh.Ui(t,e,Ar.min())},t}(),Nl=function(){function t(t,e){this.Fi=t,this.Lr=e,this.xi=[],this.nl=1,this.sl=new Jr(Fc.cu)}return t.prototype.Ur=function(t){return Bs.resolve(0===this.xi.length)},t.prototype.Qr=function(t,e,n,r){var i=this.nl;this.nl++;var o=new ma(i,e,n,r);this.xi.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.sl=this.sl.add(new Fc(u.key,i)),this.Fi.Kr(t,u.key.path.S())}return Bs.resolve(o)},t.prototype.Wr=function(t,e){return Bs.resolve(this.il(e))},t.prototype.Gr=function(t,e){var n=this.rl(e+1),r=n<0?0:n;return Bs.resolve(this.xi.length>r?this.xi[r]:null)},t.prototype.zr=function(){return Bs.resolve(0===this.xi.length?-1:this.nl-1)},t.prototype.Hr=function(t){return Bs.resolve(this.xi.slice())},t.prototype.Mi=function(t,e){var n=this,r=new Fc(e,0),i=new Fc(e,Number.POSITIVE_INFINITY),o=[];return this.sl.Nt([r,i],(function(t){var e=n.il(t.Eu);o.push(e)})),Bs.resolve(o)},t.prototype.qi=function(t,e){var n=this,r=new Jr(_r);return e.forEach((function(t){var e=new Fc(t,0),i=new Fc(t,Number.POSITIVE_INFINITY);n.sl.Nt([e,i],(function(t){r=r.add(t.Eu)}))})),Bs.resolve(this.ol(r))},t.prototype.Gi=function(t,e){var n=e.path,r=n.length+1,i=n;jr.G(i)||(i=i.child(""));var o=new Fc(new jr(i),0),s=new Jr(_r);return this.sl.xt((function(t){var e=t.key.path;return!!n.N(e)&&(e.length===r&&(s=s.add(t.Eu)),!0)}),o),Bs.resolve(this.ol(s))},t.prototype.ol=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.il(t);null!==r&&n.push(r)})),n},t.prototype.Yr=function(t,e){var n=this;gr(0===this.al(e.batchId,"removed")),this.xi.shift();var r=this.sl;return Bs.forEach(e.mutations,(function(i){var o=new Fc(i.key,e.batchId);return r=r.delete(o),n.Lr.eo(t,i.key)})).next((function(){n.sl=r}))},t.prototype.Zr=function(t){},t.prototype.so=function(t,e){var n=new Fc(e,0),r=this.sl.Ft(n);return Bs.resolve(e.isEqual(r&&r.key))},t.prototype.no=function(t){return Bs.resolve()},t.prototype.al=function(t,e){return this.rl(t)},t.prototype.rl=function(t){return 0===this.xi.length?0:t-this.xi[0].batchId},t.prototype.il=function(t){var e=this.rl(t);return e<0||e>=this.xi.length?null:this.xi[e]},t}(),Rl=function(){function t(t,e){this.Fi=t,this.cl=e,this.docs=new Yr(jr.V),this.size=0}return t.prototype.Ri=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.cl(e);return this.docs=this.docs.rt(r,{gi:e,size:s,readTime:n}),this.size+=s-o,this.Fi.Kr(t,r.path.S())},t.prototype.Vi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.yi=function(t,e){var n=this.docs.get(e);return Bs.resolve(n?n.gi:null)},t.prototype.getEntries=function(t,e){var n=this,r=ri();return e.forEach((function(t){var e=n.docs.get(t);r=r.rt(t,e?e.gi:null)})),Bs.resolve(r)},t.prototype.Ui=function(t,e,n){for(var r=oi(),i=new jr(e.path.child("")),o=this.docs._t(i);o.It();){var s=o.Et(),a=s.value,u=a.gi,c=a.readTime;if(!e.path.N(s.key.path))break;c.A(n)<=0||u instanceof rs&&Cs(e,u)&&(r=r.rt(u.key,u))}return Bs.resolve(r)},t.prototype.ul=function(t,e){return Bs.forEach(this.docs,(function(t){return e(t)}))},t.prototype._o=function(t){return new jl(this)},t.prototype.wo=function(t){return Bs.resolve(this.size)},t}(),jl=function(t){function e(e){var n=this;return(n=t.call(this)||this).To=e,n}return Object(r.c)(e,t),e.prototype.bi=function(t){var e=this,n=[];return this.Ii.forEach((function(r,i){i&&i.gi?n.push(e.To.Ri(t,i.gi,e.Ai(r))):e.To.Vi(r)})),Bs.xn(n)},e.prototype.pi=function(t,e){return this.To.yi(t,e)},e.prototype.vi=function(t,e){return this.To.getEntries(t,e)},e}(_a),Dl=function(){function t(t){this.persistence=t,this.hl=new Tr((function(t){return Vr(t)}),qr),this.lastRemoteSnapshotVersion=Ar.min(),this.highestTargetId=0,this.ll=0,this._l=new Mc,this.targetCount=0,this.fl=Nu.po()}return t.prototype.De=function(t,e){return this.hl.forEach((function(t,n){return e(n)})),Bs.resolve()},t.prototype.Co=function(t){return Bs.resolve(this.lastRemoteSnapshotVersion)},t.prototype.No=function(t){return Bs.resolve(this.ll)},t.prototype.bo=function(t){return this.highestTargetId=this.fl.next(),Bs.resolve(this.highestTargetId)},t.prototype.xo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),Bs.resolve()},t.prototype.Oo=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new Nu(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},t.prototype.Fo=function(t,e){return this.Oo(e),this.targetCount+=1,Bs.resolve()},t.prototype.ko=function(t,e){return this.Oo(e),Bs.resolve()},t.prototype.$o=function(t,e){return this.hl.delete(e.target),this._l.du(e.targetId),this.targetCount-=1,Bs.resolve()},t.prototype.Nr=function(t,e,n){var r=this,i=0,o=[];return this.hl.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.hl.delete(s),o.push(r.Lo(t,a.targetId)),i++)})),Bs.xn(o).next((function(){return i}))},t.prototype.Bo=function(t){return Bs.resolve(this.targetCount)},t.prototype.qo=function(t,e){var n=this.hl.get(e)||null;return Bs.resolve(n)},t.prototype.Uo=function(t,e,n){return this._l.lu(e,n),Bs.resolve()},t.prototype.Ko=function(t,e,n){this._l.fu(e,n);var r=this.persistence.Lr,i=[];return r&&e.forEach((function(e){i.push(r.eo(t,e))})),Bs.xn(i)},t.prototype.Lo=function(t,e){return this._l.du(e),Bs.resolve()},t.prototype.jo=function(t,e){var n=this._l.Tu(e);return Bs.resolve(n)},t.prototype.so=function(t,e){return Bs.resolve(this._l.so(e))},t}(),Ml=function(){function t(t){this.serializer=t,this.dl=new Map,this.wl=new Map}return t.prototype.mo=function(t,e){return Bs.resolve(this.dl.get(e))},t.prototype.Ao=function(t,e){var n;return this.dl.set(e.id,{id:(n=e).id,version:n.version,createTime:Yi(n.createTime)}),Bs.resolve()},t.prototype.Ro=function(t,e){return Bs.resolve(this.wl.get(e))},t.prototype.Po=function(t,e){var n;return this.wl.set(e.name,{name:(n=e).name,query:Ga(n.bundledQuery),readTime:Yi(n.readTime)}),Bs.resolve()},t}(),Fl=function(){function t(t,e){var n=this;this.Tl={},this.Jo=new Oa(0),this.Yo=!1,this.Yo=!0,this.Lr=t(this),this.ra=new Dl(this),this.Fi=new su,this.Ni=function(t,e){return new Rl(t,(function(t){return n.Lr.El(t)}))}(this.Fi),this.serializer=new Fa(e),this.oa=new Ml(this.serializer)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.pa=function(){return this.Yo=!1,Promise.resolve()},Object.defineProperty(t.prototype,"yr",{get:function(){return this.Yo},enumerable:!1,configurable:!0}),t.prototype.fa=function(){},t.prototype.da=function(){},t.prototype.Oa=function(){return this.Fi},t.prototype.Na=function(t){var e=this.Tl[t.Ys()];return e||(e=new Nl(this.Fi,this.Lr),this.Tl[t.Ys()]=e),e},t.prototype.xa=function(){return this.ra},t.prototype.Fa=function(){return this.Ni},t.prototype.Ma=function(){return this.oa},t.prototype.runTransaction=function(t,e,n){var r=this;lr("MemoryPersistence","Starting transaction:",t);var i=new Ll(this.Jo.next());return this.Lr.Il(),n(i).next((function(t){return r.Lr.ml(i).next((function(){return t}))})).Cn().then((function(t){return i.Ci(),t}))},t.prototype.Al=function(t,e){return Bs.Fn(Object.values(this.Tl).map((function(n){return function(){return n.so(t,e)}})))},t}(),Ll=function(t){function e(e){var n=this;return(n=t.call(this)||this).Go=e,n}return Object(r.c)(e,t),e}(Ea),Ul=function(){function t(t){this.persistence=t,this.Rl=new Mc,this.Pl=null}return t.gl=function(e){return new t(e)},Object.defineProperty(t.prototype,"Vl",{get:function(){if(this.Pl)return this.Pl;throw pr()},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t,e,n){return this.Rl.Qo(n,e),this.Vl.delete(n.toString()),Bs.resolve()},t.prototype.Wo=function(t,e,n){return this.Rl.Wo(n,e),this.Vl.add(n.toString()),Bs.resolve()},t.prototype.eo=function(t,e){return this.Vl.add(e.toString()),Bs.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Rl.du(e.targetId).forEach((function(t){return n.Vl.add(t.toString())}));var r=this.persistence.xa();return r.jo(t,e.targetId).next((function(t){t.forEach((function(t){return n.Vl.add(t.toString())}))})).next((function(){return r.$o(t,e)}))},t.prototype.Il=function(){this.Pl=new Set},t.prototype.ml=function(t){var e=this,n=this.persistence.Fa()._o();return Bs.forEach(this.Vl,(function(r){var i=jr.K(r);return e.yl(t,i).next((function(t){t||n.Vi(i)}))})).next((function(){return e.Pl=null,n.apply(t)}))},t.prototype.qa=function(t,e){var n=this;return this.yl(t,e).next((function(t){t?n.Vl.delete(e.toString()):n.Vl.add(e.toString())}))},t.prototype.El=function(t){return 0},t.prototype.yl=function(t,e){var n=this;return Bs.Fn([function(){return Bs.resolve(n.Rl.so(e))},function(){return n.persistence.xa().so(t,e)},function(){return n.persistence.Al(t,e)}])},t}(),Vl=function(){function t(t){this.pl=t.pl,this.vl=t.vl}return t.prototype.mc=function(t){this.bl=t},t.prototype.dc=function(t){this.Sl=t},t.prototype.onMessage=function(t){this.Dl=t},t.prototype.close=function(){this.vl()},t.prototype.send=function(t){this.pl(t)},t.prototype.Cl=function(){this.bl()},t.prototype.Nl=function(t){this.Sl(t)},t.prototype.xl=function(t){this.Dl(t)},t}(),ql={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Bl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(r.c)(e,t),e.prototype.Ll=function(t,e,n,r){return new Promise((function(i,o){var s=new ir;s.listenOnce(nr.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case er.NO_ERROR:var e=s.getResponseJson();lr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case er.TIMEOUT:lr("Connection",'RPC "'+t+'" timed out'),o(new Ir(Or.DEADLINE_EXCEEDED,"Request time out"));break;case er.HTTP_ERROR:var n=s.getStatus();if(lr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(Or).indexOf(e)>=0?e:Or.UNKNOWN}(r.status);o(new Ir(a,r.message))}else o(new Ir(Or.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ir(Or.UNAVAILABLE,"Connection failed."));break;default:pr()}}finally{lr("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Ac=function(t,e){var n=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Yn,i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(i.initMessageHeaders,e),Object(s.u)()||Object(s.x)()||Object(s.r)()||Object(s.t)()||Object(s.y)()||Object(s.q)()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");lr("Connection","Creating WebChannel: "+o,i);var a=r.createWebChannel(o,i),u=!1,c=!1,l=new Vl({pl:function(t){c?lr("Connection","Not sending because WebChannel is closed:",t):(u||(lr("Connection","Opening WebChannel transport."),a.open(),u=!0),lr("Connection","WebChannel sending:",t),a.send(t))},vl:function(){return a.close()}}),h=function(t,e){a.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(rr.EventType.OPEN,(function(){c||lr("Connection","WebChannel transport opened.")})),h(rr.EventType.CLOSE,(function(){c||(c=!0,lr("Connection","WebChannel transport closed"),l.Nl())})),h(rr.EventType.ERROR,(function(t){c||(c=!0,fr("Connection","WebChannel transport errored:",t),l.Nl(new Ir(Or.UNAVAILABLE,"The operation could not be completed")))})),h(rr.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];gr(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){lr("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=zr[t];if(void 0!==e)return $r(e)}(i),s=r.message;void 0===o&&(o=Or.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Nl(new Ir(o,s)),a.close()}else lr("Connection","WebChannel received:",n),l.xl(n)}})),setTimeout((function(){l.Cl()}),0),l},e}(function(){function t(t){this.Fl=t,this.t=t.t,this.Ol=(t.ssl?"https":"http")+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.xc=function(t,e,n,r){var i=this.kl(t,e);lr("RestConnection","Sending: ",i,n);var o={};return this.$l(o,r),this.Ll(t,i,o,n).then((function(t){return lr("RestConnection","Received: ",t),t}),(function(e){throw fr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Fc=function(t,e,n,r){return this.xc(t,e,n,r)},t.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.0.2",t["Content-Type"]="text/plain",e)for(var n in e.ti)e.ti.hasOwnProperty(n)&&(t[n]=e.ti[n])},t.prototype.kl=function(t,e){return this.Ol+"/v1/"+e+":"+ql[t]},t}()),Hl=function(){function t(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}return t.prototype.Xc=function(t){this.Kl.push(t)},t.prototype.pa=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},t.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},t.prototype.ql=function(){lr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},t.prototype.Ql=function(){lr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},t.kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),zl=function(){function t(){}return t.prototype.Xc=function(t){},t.prototype.pa=function(){},t}(),Wl=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return this.serializer=ba(t.Fl.t),this.kh=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Kc=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return Qu(this.persistence,new Pl,t.Yl,this.serializer)},t.prototype.Gl=function(t){return new Fl(Ul.gl,this.serializer)},t.prototype.jl=function(t){return new Gc},t.prototype.terminate=function(){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.kh.pa()];case 1:return t.sent(),[4,this.persistence.pa()];case 2:return t.sent(),[2]}}))}))},t}(),Ql=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(r.c)(e,t),e.prototype.initialize=function(e){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,rc(this.Kc)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,kl(this.Xl.gu)];case 4:return n.sent(),[4,Oc(this.Xl.Oh)];case 5:return n.sent(),[2]}}))}))},e.prototype.Jl=function(t){return Qu(this.persistence,new Pl,t.Yl,this.serializer)},e.prototype.Hl=function(t){return new Pa(this.persistence.Lr.Rr,t.rs)},e.prototype.Gl=function(t){var e=zu(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?ka.Tr(this.cacheSizeBytes):ka.mr;return new Uu(this.synchronizeTabs,e,t.clientId,n,t.rs,Zs(),Js(),this.serializer,this.kh,!!this.forceOwnership)},e.prototype.jl=function(t){return new Gc},e}(Wl),Gl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(r.c)(e,t),e.prototype.initialize=function(e){return Object(r.b)(this,void 0,void 0,(function(){var n,i=this;return Object(r.d)(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Xl.gu,this.kh instanceof Qc?(this.kh.gu={_h:Cl.bind(null,n),fh:Il.bind(null,n),dh:xl.bind(null,n),Ca:Ol.bind(null,n),lh:wl.bind(null,n)},[4,this.kh.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence._a((function(t){return Object(r.b)(i,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return[4,El(this.Xl.gu,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.yr?this.zl.start(this.Kc):t||this.zl.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},e.prototype.jl=function(t){var e=Zs();if(!Qc.kn(e))throw new Ir(Or.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=zu(t.Fl.t,t.Fl.persistenceKey);return new Qc(e,t.rs,n,t.clientId,t.Yl)},e}(Ql),Kl=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n=this;return Object(r.d)(this,(function(r){switch(r.label){case 0:return this.Kc?[3,2]:(this.Kc=t.Kc,this.kh=t.kh,this.Wc=this.Zl(e),this.Oh=this.t_(e),this.Mh=this.e_(e),this.gu=this.n_(e,!t.synchronizeTabs),this.kh.Oc=function(t){return ol(n.gu,t,1)},this.Oh.jc.s_=vl.bind(null,this.gu),[4,Rc(this.Oh,this.gu.Jh)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new ia},t.prototype.Zl=function(t){var e=ba(t.Fl.t),n=new Bl(t.Fl);return function(t,e,n){return new uc(t,e,n)}(t.credentials,n,e)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Kc,n=this.Wc,r=t.rs,i=function(t){return ol(s.gu,t,0)},o=Hl.kn()?new Hl:new zl,new lc(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var a=new Jc(t,e,n,r,i,o);return s&&(a.Hh=!0),a}(this.Kc,this.Oh,this.Mh,this.kh,t.Yl,t.$h,e)},t.prototype.terminate=function(){return function(t){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){switch(n.label){case 0:return e=yr(t),lr("RemoteStore","RemoteStore shutting down."),e.Hc.add(5),[4,fc(e)];case 1:return n.sent(),e.Yc.pa(),e.Zc.set("Unknown"),[2]}}))}))}(this.Oh)},t}(),$l=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Yl=function(t){this.o_=t};function Xl(t,e,n){if(!n)throw new Ir(Or.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Zl(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ir(Or.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Jl(t,e,n,r){if(!0===e&&!0===r)throw new Ir(Or.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function th(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":pr()}function eh(t,e){if(t instanceof Yl&&(t=t.o_),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ir(Or.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=th(t);throw new Ir(Or.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function nh(t,e){if(e<=0)throw new Ir(Or.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var rh=function(t){this.a_=t},ih=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.c_=function(t){if(2!==t.u_)throw t.h_(1===t.u_?this.a_+"() can only appear at the top level of your update data":this.a_+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(rh);function oh(t,e,n){return new Ph({u_:3,l_:e.settings.l_,methodName:t.a_,__:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var sh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.c_=function(t){return new Do(t.path,new Oo)},e.prototype.isEqual=function(t){return t instanceof e},e}(rh),ah=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(r.c)(e,t),e.prototype.c_=function(t){var e=oh(this,t,!0),n=this.f_.map((function(t){return Fh(t,e)})),r=new Io(n);return new Do(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(rh),uh=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(r.c)(e,t),e.prototype.c_=function(t){var e=oh(this,t,!0),n=this.f_.map((function(t){return Fh(t,e)})),r=new Ao(n);return new Do(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(rh),ch=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).d_=n,r}return Object(r.c)(e,t),e.prototype.c_=function(t){var e=new Po(t.serializer,Qi(t.serializer,this.d_));return new Do(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(rh),lh=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ir(Or.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ir(Or.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.w_=t,this.T_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.T_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.w_===t.w_&&this.T_===t.T_},t.prototype.toJSON=function(){return{latitude:this.w_,longitude:this.T_}},t.prototype.I=function(t){return _r(this.w_,t.w_)||_r(this.T_,t.T_)},t}(),hh=function(){function t(t){this.E_=t}return t.fromBase64String=function(e){try{return new t(Hr.fromBase64String(e))}catch(e){throw new Ir(Or.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Hr.fromUint8Array(e))},t.prototype.toBase64=function(){return this.E_.toBase64()},t.prototype.toUint8Array=function(){return this.E_.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.E_.isEqual(t.E_)},t}(),fh=new Map,dh=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ir(Or.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ir(Or.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Jl("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}();function ph(){if("undefined"==typeof Uint8Array)throw new Ir(Or.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function gh(){if("undefined"==typeof atob)throw new Ir(Or.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var yh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.fromBase64String=function(t){gh();try{return new e(Hr.fromBase64String(t))}catch(t){throw new Ir(Or.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){return ph(),new e(Hr.fromUint8Array(t))},e.prototype.toBase64=function(){return gh(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return ph(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(hh),mh=function(){function t(){}return t.prototype.I_=function(t,e){switch(void 0===e&&(e="none"),Oi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ri(t.integerValue||t.doubleValue);case 3:return this.m_(t.timestampValue);case 4:return this.A_(t,e);case 5:return t.stringValue;case 6:return this.R_(ji(t.bytesValue));case 7:return this.P_(t.referenceValue);case 8:return this.g_(t.geoPointValue);case 9:return this.V_(t.arrayValue,e);case 10:return this.y_(t.mapValue,e);default:throw pr()}},t.prototype.y_=function(t,e){var n=this,r={};return Er(t.fields||{},(function(t,i){r[t]=n.I_(i,e)})),r},t.prototype.g_=function(t){return new lh(Ri(t.latitude),Ri(t.longitude))},t.prototype.V_=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.I_(t,e)}))},t.prototype.A_=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return Ei(n)?t(n):n}(t);return null==n?null:this.I_(n,e);case"estimate":return this.m_(Si(t));default:return null}},t.prototype.m_=function(t){var e=Ni(t);return new xr(e.seconds,e.nanos)},t.prototype.p_=function(t,e){var n=Pr.k(t);gr(wo(n));var r=new ar(n.get(1),n.get(3)),i=new jr(n.v(5));return r.isEqual(e)||hr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),vh=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(r.c)(e,t),e.prototype.R_=function(t){return new yh(t)},e.prototype.P_=function(t){var e=this.p_(t,this.firestore.v_);return Of.b_(e,this.firestore,null)},e}(mh),_h=function(){function t(t,e,n,r,i){this.S_=t,this.D_=e,this.C_=n,this.N_=r,this.x_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.C_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Eh(this.S_,this.x_,this.C_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.N_},t.prototype.data=function(){if(this.N_){if(this.x_){var t=new bh(this.S_,this.D_,this.C_,this.N_,null);return this.x_.fromFirestore(t)}return this.D_.I_(this.N_.sn())}},t.prototype.get=function(t){if(this.N_){var e=this.N_.data().field(wh("DocumentSnapshot.get",t));if(null!==e)return this.D_.I_(e)}},t}(),bh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(_h);function wh(t,e){return"string"==typeof e?Hh(t,e):e instanceof Yl?e.o_.F_:e.F_}var Ch=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ir(Or.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.F_=new Rr(t)}return t.prototype.isEqual=function(t){return this.F_.isEqual(t.F_)},t}(),Eh=function(){function t(t,e,n){this.x_=e,this.C_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"O_",{get:function(){return this.C_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.C_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.C_.path.M()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Th(this.firestore,this.x_,this.C_.path.S())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Sh=function(){function t(t,e,n){this.x_=e,this.M_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.M_)},t}(),Th=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,us(r))||this).firestore=e,i.O_=r,i.type="collection",i}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.M_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.M_.path.M()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.O_.S();return t.T()?null:new Eh(this.firestore,null,new jr(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.O_)},e}(Sh);function Oh(t){var e=t.k_(),n=ba(t.v_);return new Nh(t.v_,!!e.ignoreUndefinedProperties,n)}var Ih=/^__.*__$/,xh=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.L_=function(t,e){var n=[];return n.push(null!==this.Qe?new Qo(t,this.data,this.Qe,e):new Wo(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Ko(t,this.fieldTransforms)),n},t}(),Ah=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.L_=function(t,e){var n=[new Qo(t,this.data,this.Qe,e)];return this.fieldTransforms.length>0&&n.push(new Ko(t,this.fieldTransforms)),n},t}();function kh(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pr()}}var Ph=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.B_(),this.fieldTransforms=i||[],this.Qe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u_",{get:function(){return this.settings.u_},enumerable:!1,configurable:!0}),t.prototype.q_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.q_({path:n,__:!1});return r.Q_(t),r},t.prototype.K_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.q_({path:n,__:!1});return r.B_(),r},t.prototype.W_=function(t){return this.q_({path:void 0,__:!0})},t.prototype.h_=function(t){return zh(t,this.settings.methodName,this.settings.j_||!1,this.path,this.settings.l_)},t.prototype.contains=function(t){return void 0!==this.Qe.find((function(e){return t.N(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.N(e.field)}))},t.prototype.B_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Q_(this.path.get(t))},t.prototype.Q_=function(t){if(0===t.length)throw this.h_("Document fields must not be empty");if(kh(this.u_)&&Ih.test(t))throw this.h_('Document fields cannot begin and end with "__"')},t}(),Nh=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||ba(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Ph({u_:t,methodName:e,l_:n,path:Rr.$(),__:!1,j_:r},this.t,this.serializer,this.ignoreUndefinedProperties)},t}();function Rh(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Vh("Data must be an object, but it was:",s,r);var a,u,c=Lh(r,s);if(o.merge)a=new jo(s.Qe),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=qh(e,f[h],n);if(!s.contains(d))throw new Ir(Or.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Wh(l,d)||l.push(d)}a=new jo(l),u=s.fieldTransforms.filter((function(t){return a.He(t.field)}))}else a=null,u=s.fieldTransforms;return new xh(new Jo(c),a,u)}function jh(t,e,n,r){var i=t.G_(1,e,n);Vh("Data must be an object, but it was:",i,r);var o=[],s=new ts;Er(r,(function(t,r){var a=Hh(e,t,n);r instanceof Yl&&(r=r.o_);var u=i.K_(a);if(r instanceof ih)o.push(a);else{var c=Fh(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new jo(o);return new Ah(s.Ye(),a,i.fieldTransforms)}function Dh(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[qh(e,r,n)],u=[i];if(o.length%2!=0)throw new Ir(Or.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(qh(e,o[c])),u.push(o[c+1]);for(var l=[],h=new ts,f=a.length-1;f>=0;--f)if(!Wh(l,a[f])){var d=a[f],p=u[f];p instanceof Yl&&(p=p.o_);var g=s.K_(d);if(p instanceof ih)l.push(d);else{var y=Fh(p,g);null!=y&&(l.push(d),h.set(d,y))}}var m=new jo(l);return new Ah(h.Ye(),m,s.fieldTransforms)}function Mh(t,e,n,r){return void 0===r&&(r=!1),Fh(n,t.G_(r?4:3,e))}function Fh(t,e){if(t instanceof Yl&&(t=t.o_),Uh(t))return Vh("Unsupported field value:",e,t),Lh(t,e);if(t instanceof rh)return function(t,e){if(!kh(e.u_))throw e.h_(t.a_+"() can only be used with update() and set()");if(!e.path)throw e.h_(t.a_+"() is not currently supported inside arrays");var n=t.c_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Qe.push(e.path),t instanceof Array){if(e.settings.__&&4!==e.u_)throw e.h_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Fh(o[i],e.W_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Yl&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Qi(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=xr.fromDate(t);return{timestampValue:Gi(e.serializer,n)}}if(t instanceof xr){var r=new xr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Gi(e.serializer,r)}}if(t instanceof lh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hh)return{bytesValue:Ki(e.serializer,t.E_)};if(t instanceof Eh){var i=e.t,o=t.firestore.v_;if(!o.isEqual(i))throw e.h_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Xi(t.firestore.v_||e.t,t.C_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.h_("Unsupported field value: "+th(t))}(t,e)}function Lh(t,e){var n={};return Sr(t)?e.path&&e.path.length>0&&e.Qe.push(e.path):Er(t,(function(t,r){var i=Fh(r,e.U_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Uh(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof xr||t instanceof lh||t instanceof hh||t instanceof Eh||t instanceof rh)}function Vh(t,e,n){if(!Uh(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=th(n);throw e.h_("an object"===r?t+" a custom object":t+" "+r)}}function qh(t,e,n){if(e instanceof Yl&&(e=e.o_),e instanceof Ch)return e.F_;if("string"==typeof e)return Hh(t,e);throw zh("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Bh=new RegExp("[~\\*/\\[\\]]");function Hh(t,e,n){if(e.search(Bh)>=0)throw zh("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Ch.bind.apply(Ch,Object(r.g)([void 0],e.split("."))))).F_}catch(i){throw zh("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function zh(t,e,n,r,i){var o=r&&!r.T(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ir(Or.INVALID_ARGUMENT,(a+=". ")+t+u)}function Wh(t,e){return t.some((function(t){return t.isEqual(e)}))}var Qh=function(){function t(t){this.Wc=t,this.z_=new Map,this.mutations=[],this.H_=!1,this.J_=null,this.Y_=new Set}return t.prototype.X_=function(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n=this;return Object(r.d)(this,(function(i){switch(i.label){case 0:if(this.Z_(),this.mutations.length>0)throw new Ir(Or.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a,u;return Object(r.d)(this,(function(r){switch(r.label){case 0:return n=yr(t),i=ro(n.serializer)+"/documents",o={documents:e.map((function(t){return Ji(n.serializer,t)}))},[4,n.Fc("BatchGetDocuments",i,o)];case 1:return s=r.sent(),a=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){gr(!!e.found);var n=to(t,e.found.name),r=Yi(e.found.updateTime),i=new Jo({mapValue:{fields:e.found.fields}});return new rs(n,r,i,{})}(t,e):"missing"in e?function(t,e){gr(!!e.missing),gr(!!e.readTime);var n=to(t,e.missing),r=Yi(e.readTime);return new is(n,r)}(t,e):pr()}(n.serializer,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());gr(!!e),u.push(e)})),u)]}}))}))}(this.Wc,t)];case 1:return[2,((e=i.sent()).forEach((function(t){t instanceof is||t instanceof rs?n.tf(t):pr()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.L_(t,this.je(t))),this.Y_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.L_(t,this.ef(t)))}catch(t){this.J_=t}this.Y_.add(t.toString())},t.prototype.delete=function(t){this.write([new Xo(t,this.je(t))]),this.Y_.add(t.toString())},t.prototype.commit=function(){return Object(r.b)(this,void 0,void 0,(function(){var t,e=this;return Object(r.d)(this,(function(n){switch(n.label){case 0:if(this.Z_(),this.J_)throw this.J_;return t=this.z_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=jr.K(n);e.mutations.push(new Zo(r,e.je(r)))})),[4,function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o;return Object(r.d)(this,(function(r){switch(r.label){case 0:return n=yr(t),i=ro(n.serializer)+"/documents",o={writes:e.map((function(t){return so(n.serializer,t)}))},[4,n.xc("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.Wc,this.mutations)];case 1:return n.sent(),this.H_=!0,[2]}}))}))},t.prototype.tf=function(t){var e;if(t instanceof rs)e=t.version;else{if(!(t instanceof is))throw pr();e=Ar.min()}var n=this.z_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ir(Or.ABORTED,"Document version changed between two reads.")}else this.z_.set(t.key.toString(),e)},t.prototype.je=function(t){var e=this.z_.get(t.toString());return!this.Y_.has(t.toString())&&e?Fo.updateTime(e):Fo.Ge()},t.prototype.ef=function(t){var e=this.z_.get(t.toString());if(!this.Y_.has(t.toString())&&e){if(e.isEqual(Ar.min()))throw new Ir(Or.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fo.updateTime(e)}return Fo.exists(!0)},t.prototype.write=function(t){this.Z_(),this.mutations=this.mutations.concat(t)},t.prototype.Z_=function(){},t}(),Gh=function(){function t(t,e,n,r){this.rs=t,this.Wc=e,this.updateFunction=n,this.us=r,this.nf=5,this.Ps=new qs(this.rs,"transaction_retry")}return t.prototype.run=function(){this.sf()},t.prototype.sf=function(){var t=this;this.Ps.An((function(){return Object(r.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(r.d)(this,(function(r){return t=new Qh(this.Wc),(e=this.rf(t))&&e.then((function(e){n.rs.fs((function(){return t.commit().then((function(){n.us.resolve(e)})).catch((function(t){n.af(t)}))}))})).catch((function(t){n.af(t)})),[2]}))}))}))},t.prototype.rf=function(t){try{var e=this.updateFunction(t);return!Dr(e)&&e.catch&&e.then?e:(this.us.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.us.reject(t),null}},t.prototype.af=function(t){var e=this;this.nf>0&&this.cf(t)?(this.nf-=1,this.rs.fs((function(){return e.sf(),Promise.resolve()}))):this.us.reject(t)},t.prototype.cf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Kr(e)}return!1},t}(),Kh=function(){function t(t,e,n){var r=this;this.credentials=t,this.rs=e,this.Fl=n,this.user=ha.UNAUTHENTICATED,this.clientId=vr.u(),this.uf=function(){},this.oi=new Vs,this.credentials.si((function(t){lr("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.uf(t)),r.oi.resolve()}))}return t.prototype.getConfiguration=function(){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(t){switch(t.label){case 0:return[4,this.oi.promise];case 1:return[2,(t.sent(),{rs:this.rs,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,$h:100})]}}))}))},t.prototype.hf=function(t){var e=this;this.uf=t,this.oi.promise.then((function(){return e.uf(e.user)}))},t.prototype.lf=function(){if(this.rs.Vs)throw new Ir(Or.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.rs.bs();var e=new Vs;return this.rs.ys((function(){return Object(r.b)(t,void 0,void 0,(function(){var t,n;return Object(r.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this._f?[4,this._f.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.ff?[4,this.ff.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.ii(),e.resolve(),[3,6];case 5:return t=r.sent(),n=na(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function $h(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i=this;return Object(r.d)(this,(function(o){switch(o.label){case 0:return t.rs.Ns(),lr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),t.hf((function(n){return t.rs.Ss((function(){return Object(r.b)(i,void 0,void 0,(function(){return Object(r.d)(this,(function(t){switch(t.label){case 0:return[4,Gu(e.Kc,n)];case 1:return t.sent(),[2]}}))}))}))})),e.persistence.fa((function(){return t.terminate()})),t.ff=e,[2]}}))}))}function Yh(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i;return Object(r.d)(this,(function(o){switch(o.label){case 0:return t.rs.Ns(),[4,Xh(t)];case 1:return n=o.sent(),lr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return i=o.sent(),[4,e.initialize(n,i)];case 3:return o.sent(),t.hf((function(n){return t.rs.Ss((function(){return function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i;return Object(r.d)(this,(function(r){switch(r.label){case 0:return(n=yr(t)).rs.Ns(),lr("RemoteStore","RemoteStore received new credentials"),i=_c(n),n.Hc.add(3),[4,fc(n)];case 1:return r.sent(),i&&n.Zc.set("Unknown"),[4,n.jc.s_(e)];case 2:return r.sent(),n.Hc.delete(3),[4,hc(n)];case 3:return r.sent(),[2]}}))}))}(e.Oh,n)}))})),t._f=e,[2]}}))}))}function Xh(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return t.ff?[3,2]:(lr("FirestoreClient","Using default OfflineComponentProvider"),[4,$h(t,new Wl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.ff]}}))}))}function Zh(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return t._f?[3,2]:(lr("FirestoreClient","Using default OnlineComponentProvider"),[4,Yh(t,new Kl)]);case 1:e.sent(),e.label=2;case 2:return[2,t._f]}}))}))}function Jh(t){return Xh(t).then((function(t){return t.persistence}))}function tf(t){return Xh(t).then((function(t){return t.Kc}))}function ef(t){return Zh(t).then((function(t){return t.Oh}))}function nf(t){return Zh(t).then((function(t){return t.gu}))}function rf(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,Zh(t)];case 1:return e=r.sent(),[2,((n=e.Mh).Ls=tl.bind(null,e.gu),n.Us=nl.bind(null,e.gu),n)]}}))}))}function of(t,e){var n=this,i=new Vs;return t.rs.fs((function(){return Object(r.b)(n,void 0,void 0,(function(){var n;return Object(r.d)(this,(function(r){switch(r.label){case 0:return n=rl,[4,nf(t)];case 1:return[2,n.apply(void 0,[r.sent(),e,i])]}}))}))})),i.promise}function sf(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s;return Object(r.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t,e){var n=yr(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ga.Oi(t,e)}))}(t,e)];case 1:return(i=r.sent())instanceof rs?n.resolve(i):i instanceof is?n.resolve(null):n.reject(new Ir(Or.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=r.sent(),s=na(o,"Failed to get document '"+e+" from cache"),n.reject(s),[3,3];case 3:return[2]}}))}))}function af(t,e,n,r,i){var o=new $l({next:function(o){e.fs((function(){return sa(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ir(Or.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ir(Or.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new la(us(n.path),o,{includeMetadataChanges:!0,Hs:!0});return oa(t,s)}var uf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).yf=new ea,r.df="name"in e?e.name:"[DEFAULT]",r}return Object(r.c)(e,t),e.prototype.Vf=function(){return this.pf||Ef(this),this.pf.terminate()},e}(function(){function t(t,e){this.df="(lite)",this.wf=new dh({}),this.Tf=!1,t instanceof ar?(this.v_=t,this.Ef=new da):(this.If=t,this.v_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ir(Or.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ar(t.options.projectId)}(t),this.Ef=new pa(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.If)throw new Ir(Or.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.If},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mf",{get:function(){return this.Tf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Af",{get:function(){return void 0!==this.Rf},enumerable:!1,configurable:!0}),t.prototype.Pf=function(t){if(this.Tf)throw new Ir(Or.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.wf=new dh(t),void 0!==t.credentials&&(this.Ef=function(t){if(!t)return new da;switch(t.type){case"gapi":var e=t.client;return gr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ya(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Ir(Or.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.gf=function(){return this.wf},t.prototype.k_=function(){return this.Tf=!0,this.wf},t.prototype._delete=function(){return this.Rf||(this.Rf=this.Vf()),this.Rf},t.prototype.Vf=function(){return function(t){var e=fh.get(t);e&&(lr("ComponentProvider","Removing Datastore"),fh.delete(t),e.terminate())}(this),Promise.resolve()},t}());function cf(t,e,n){var i=this,o=new Vs;return t.rs.enqueue((function(){return Object(r.b)(i,void 0,void 0,(function(){var i;return Object(r.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,$h(t,n)];case 1:return r.sent(),[4,Yh(t,e)];case 2:return r.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Or.FAILED_PRECONDITION||t.code===Or.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(i=r.sent()))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),o.reject(i),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function lf(t){if(t.mf||t.Af)throw new Ir(Or.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var hf=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).S_=e,a.vf=e,a.metadata=o,a}return Object(r.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.N_){if(this.x_){var e=new ff(this.S_,this.D_,this.C_,this.N_,this.metadata,null);return this.x_.fromFirestore(e,t)}return this.D_.I_(this.N_.sn(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.N_){var n=this.N_.data().field(wh("DocumentSnapshot.get",t));if(null!==n)return this.D_.I_(n,e.serverTimestamps)}},e}(_h),ff=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(hf),df=function(){function t(t,e,n,r){this.S_=t,this.D_=e,this.bf=r,this.metadata=new xf(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.bf.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.bf.docs.forEach((function(r){t.call(e,new ff(n.S_,n.D_,r.key,r,new xf(n.bf.Qt.has(r.key),n.bf.fromCache),n.query.x_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.bf.Wt)throw new Ir(Or.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Sf&&this.Df===e||(this.Sf=function(t,e){if(t.bf.Ut.T()){var n=0;return t.bf.docChanges.map((function(e){return{type:"added",doc:new ff(t.S_,t.D_,e.doc.key,e.doc,new xf(t.bf.Qt.has(e.doc.key),t.bf.fromCache),t.query.x_),oldIndex:-1,newIndex:n++}}))}var r=t.bf.Ut;return t.bf.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new ff(t.S_,t.D_,e.doc.key,e.doc,new xf(t.bf.Qt.has(e.doc.key),t.bf.fromCache),t.query.x_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:pf(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.Df=e),this.Sf},t}();function pf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pr()}}function gf(t,e){return t instanceof hf&&e instanceof hf?t.S_===e.S_&&t.C_.isEqual(e.C_)&&(null===t.N_?null===e.N_:t.N_.isEqual(e.N_))&&t.x_===e.x_:t instanceof df&&e instanceof df&&t.S_===e.S_&&function(t,e){return t instanceof Sh&&e instanceof Sh&&t.firestore===e.firestore&&_s(t.M_,e.M_)&&t.x_===e.x_}(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.bf.isEqual(e.bf)}var yf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(r.c)(e,t),e.prototype.R_=function(t){return new hh(t)},e.prototype.P_=function(t){var e=this.p_(t,this.firestore.v_);return new Eh(this.firestore,null,e)},e}(mh);function mf(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=eh(t.firestore,uf),s=Oh(o);return e instanceof Yl&&(e=e.o_),vf(o,("string"==typeof e||e instanceof Ch?Dh(s,"updateDoc",t.C_,e,n,r):jh(s,"updateDoc",t.C_,e)).L_(t.C_,Fo.exists(!0)))}function vf(t,e){return of(Cf(t),e)}function _f(t,e,n){var r=n.docs.get(e.C_),i=new yf(t);return new hf(t,i,e.C_,r,new xf(n.hasPendingWrites,n.fromCache),e.x_)}var bf=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){lf(t);var n=Cf(t),r=t.k_(),i=new Kl;return cf(n,i,new Ql(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){lf(t);var e=Cf(t),n=t.k_(),r=new Kl;return cf(e,r,new Gl(r,n.cacheSizeBytes))}(t.o_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.mf&&!t.Af)throw new Ir(Or.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Vs;return t.yf.ys((function(){return Object(r.b)(e,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return Hs.kn()?[4,Hs.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(zu(t.v_,t.df))];case 1:return i.sent(),n.resolve(),[3,3];case 2:return e=i.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.o_)},t}(),wf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Cf=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof ar||(i.Nf=e),i}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"v_",{get:function(){return this.o_.v_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.gf()),t)).merge,this.o_.Pf(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.gf().host&&fr("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.rs.enqueue((function(){return Object(r.b)(e,void 0,void 0,(function(){var e,n;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,Jh(t)];case 1:return e=r.sent(),[4,ef(t)];case 2:return n=r.sent(),[2,(e.da(!0),function(t){var e=yr(t);return e.Hc.delete(0),hc(e)}(n))]}}))}))}))}(Cf(this.o_))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.rs.enqueue((function(){return Object(r.b)(e,void 0,void 0,(function(){var e,n;return Object(r.d)(this,(function(i){switch(i.label){case 0:return[4,Jh(t)];case 1:return e=i.sent(),[4,ef(t)];case 2:return n=i.sent(),[2,(e.da(!1),function(t){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){switch(n.label){case 0:return(e=yr(t)).Hc.add(0),[4,fc(e)];case 1:return n.sent(),e.Zc.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Cf(this.o_))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Jl("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Cf.enableMultiTabIndexedDbPersistence(this):this.Cf.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Cf.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Vs;return t.rs.fs((function(){return Object(r.b)(e,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(r){switch(r.label){case 0:return e=cl,[4,nf(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Cf(this.o_))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){var n=this,i=Cf(t),o=wa(e)?e:{next:e},s=new $l(o);return t.yf.fs((function(){return Object(r.b)(n,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=function(t,e){yr(t).$s.add(e),e.next()},[4,rf(i)];case 1:return t.apply(void 0,[e.sent(),s]),[2]}}))}))})),function(){s.r_(),t.yf.fs((function(){return Object(r.b)(n,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=function(t,e){yr(t).$s.delete(e)},[4,rf(i)];case 1:return t.apply(void 0,[e.sent(),s]),[2]}}))}))}))}}(this.o_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Nf)throw new Ir(Or.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Nf},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){return Xl("Firestore.collection","path",t),Cf(this.o_),new Lf(Pr.k(t),this,null)},e.prototype.doc=function(t){return Xl("Firestore.doc","path",t),Cf(this.o_),Of.xf(Pr.k(t),this,null)},e.prototype.collectionGroup=function(t){if(Xl("Firestore.collectionGroup","collectionId",t),t.indexOf("/")>=0)throw new Ir(Or.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return Cf(this.o_),new Df(function(t){return new ss(Pr.$(),t)}(t),this,null)},e.prototype.runTransaction=function(t){var e=this;return function(t,e){var n=this,i=new Vs;return t.rs.fs((function(){return Object(r.b)(n,void 0,void 0,(function(){var n;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,function(t){return Zh(t).then((function(t){return t.Wc}))}(t)];case 1:return n=r.sent(),new Gh(t.rs,n,e,i).run(),[2]}}))}))})),i.promise}(Cf(this.o_),(function(n){return t(new Sf(e,n))}))},e.prototype.batch=function(){return Cf(this.o_),new Tf(this)},e}(Yl);function Cf(t){return t.pf||Ef(t),t.pf.lf(),t.pf}function Ef(t){var e=t.k_(),n=function(t,e,n){return new sr(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.v_,t.df,e);t.pf=new Kh(t.Ef,t.yf,n)}var Sf=function(){function t(t,e){this.S_=t,this.Ff=e,this.Of=Oh(this.S_.o_)}return t.prototype.get=function(t){var e=this,n=Uf(0,t,this.S_),r=new vh(this.S_);return this.Ff.X_([n.C_]).then((function(t){if(!t||1!==t.length)return pr();var i=t[0];if(i instanceof is)return new Af(e.S_,new hf(e.S_.o_,r,n.C_,null,new xf(!1,!1),n.x_));if(i instanceof rs)return new Af(e.S_,new hf(e.S_.o_,r,n.C_,i,new xf(!1,!1),n.x_));throw pr()}))},t.prototype.set=function(t,e,n){var r=Uf(0,t,this.S_);n=Zl("Transaction.set",n);var i=Vf(r.x_,e,n),o=Rh(this.Of,"Transaction.set",r.C_,i,null!==r.x_,n);return this.Ff.set(r.C_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Uf(0,t,this.S_);return e instanceof Yl&&(e=e.o_),o="string"==typeof e||e instanceof Ch?Dh(this.Of,"Transaction.update",s.C_,e,n,r):jh(this.Of,"Transaction.update",s.C_,e),this.Ff.update(s.C_,o),this},t.prototype.delete=function(t){var e=Uf(0,t,this.S_);return this.Ff.delete(e.C_),this},t}(),Tf=function(){function t(t){this.S_=t,this.Mf=[],this.kf=!1,this.Of=Oh(this.S_.o_)}return t.prototype.set=function(t,e,n){this.$f();var r=Uf(0,t,this.S_);n=Zl("WriteBatch.set",n);var i=Vf(r.x_,e,n),o=Rh(this.Of,"WriteBatch.set",r.C_,i,null!==r.x_,n);return this.Mf=this.Mf.concat(o.L_(r.C_,Fo.Ge())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.$f();var o,s=Uf(0,t,this.S_);return e instanceof Yl&&(e=e.o_),o="string"==typeof e||e instanceof Ch?Dh(this.Of,"WriteBatch.update",s.C_,e,n,r):jh(this.Of,"WriteBatch.update",s.C_,e),this.Mf=this.Mf.concat(o.L_(s.C_,Fo.exists(!0))),this},t.prototype.delete=function(t){this.$f();var e=Uf(0,t,this.S_);return this.Mf=this.Mf.concat(new Xo(e.C_,Fo.Ge())),this},t.prototype.commit=function(){return this.$f(),this.kf=!0,this.Mf.length>0?of(Cf(this.S_.o_),this.Mf):Promise.resolve()},t.prototype.$f=function(){if(this.kf)throw new Ir(Or.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Of=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.D_=new vh(e),r}return Object(r.c)(e,t),e.xf=function(t,n,r){if(t.length%2!=0)throw new Ir(Or.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.M()+" has "+t.length);return new e(n,new Eh(n.o_,r,new jr(t)))},e.b_=function(t,n,r){return new e(n,new Eh(n.o_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Lf(this.o_.O_.S(),this.firestore,this.o_.x_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(Xl("DocumentReference.collection","path",t),!t)throw new Ir(Or.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Pr.k(t);return new Lf(this.o_.O_.child(e),this.firestore,null)},e.prototype.isEqual=function(t){return t instanceof Yl&&(t=t.o_),t instanceof Eh&&(n=t,((e=this.o_)instanceof Eh||e instanceof Th)&&(n instanceof Eh||n instanceof Th)&&e.firestore===n.firestore&&e.path===n.path&&e.x_===n.x_);var e,n},e.prototype.set=function(t,e){e=Zl("DocumentReference.set",e);try{return function(t,e,n){var r=eh(t.firestore,uf),i=Vf(t.x_,e,n);return vf(r,Rh(Oh(r),"setDoc",t.C_,i,null!==t.x_,n).L_(t.C_,Fo.Ge()))}(this.o_,t,e)}catch(t){throw If(t,"setDoc","DocumentReference.set")}},e.prototype.update=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];try{return 1===arguments.length?mf(this.o_,t):mf.apply(void 0,Object(r.g)([this.o_,t,e],n))}catch(t){throw If(t,"updateDoc","DocumentReference.update")}},e.prototype.delete=function(){return vf(eh((t=this.o_).firestore,uf),[new Xo(t.C_,Fo.Ge())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!wa(r))return r}return{}}(e),o=function(e,n){var r,i,o;return{next:function(e){o.next&&o.next(function(e){return new Af(t.firestore,new hf(t.firestore.o_,t.D_,e.C_,e.N_,e.metadata,t.o_.x_))}(e))},error:null===(r=(o=wa(e[0])?e[0]:wa(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===r?void 0:r.bind(o),complete:null===(i=o.complete)||void 0===i?void 0:i.bind(o)}}(e);return function(t){for(var e,n,i,o=this,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var u={includeMetadataChanges:!1},c=0;"object"!=typeof s[c]||wa(s[c])||(u=s[c],c++);var l,h,f,d={includeMetadataChanges:u.includeMetadataChanges};if(wa(s[c])){var p=s[c];s[c]=null===(e=p.next)||void 0===e?void 0:e.bind(p),s[c+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),s[c+2]=null===(i=p.complete)||void 0===i?void 0:i.bind(p)}if(t instanceof Eh)h=eh(t.firestore,uf),f=us(t.C_.path),l={next:function(e){s[c]&&s[c](_f(h,t,e))},error:s[c+1],complete:s[c+2]};else{h=eh(t.firestore,uf),f=t.M_;var g=new yf(h);l={next:function(e){s[c]&&s[c](new df(h,g,t,e))},error:s[c+1],complete:s[c+2]},jf(t.M_)}var y=Cf(h),m=new $l(l),v=new la(f,m,d);return h.yf.fs((function(){return Object(r.b)(o,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=oa,[4,rf(y)];case 1:return[2,t.apply(void 0,[e.sent(),v])]}}))}))})),function(){m.r_(),h.yf.fs((function(){return Object(r.b)(o,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=sa,[4,rf(y)];case 1:return[2,t.apply(void 0,[e.sent(),v])]}}))}))}))}}(this.o_,i,o)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){var e=this,n=eh(t.firestore,uf),i=Cf(n),o=new yf(n),s=new Vs;return n.yf.fs((function(){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return[4,tf(i)];case 1:return[4,sf(e.sent(),t.C_,s)];case 2:return e.sent(),[2]}}))}))})),s.promise.then((function(e){return new hf(n,o,t.C_,e,new xf(e instanceof rs&&e.Je,!0),t.x_)}))}(this.o_):"server"===(null==t?void 0:t.source)?function(t){var e=this,n=eh(t.firestore,uf),i=Cf(n),o=new Vs;return n.yf.fs((function(){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return[4,rf(i)];case 1:return[4,af(e.sent(),n.yf,t.C_,{source:"server"},o)];case 2:return e.sent(),[2]}}))}))})),o.promise.then((function(e){return _f(n,t,e)}))}(this.o_):function(t){var e=this,n=eh(t.firestore,uf),i=Cf(n),o=new Vs;return n.yf.fs((function(){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return[4,rf(i)];case 1:return[4,af(e.sent(),n.yf,t.C_,{source:"default"},o)];case 2:return e.sent(),[2]}}))}))})),o.promise.then((function(e){return _f(n,t,e)}))}(this.o_)).then((function(t){return new Af(e.firestore,new hf(e.firestore.o_,e.D_,t.C_,t.N_,t.metadata,e.o_.x_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(Yl);function If(t,e,n){return t.message=t.message.replace(e+"()",n+"()"),t}var xf=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Af=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).S_=e,r}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Of(this.S_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.o_.data(t)},e.prototype.get=function(t,e){return this.o_.get(t,e)},e.prototype.isEqual=function(t){return gf(this.o_,t.o_)},e}(Yl),kf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.data=function(t){return this.o_.data(t)},e}(Af);function Pf(t,e,n){if(n instanceof Yl&&(n=n.o_),"string"==typeof n){if(""===n)throw new Ir(Or.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ds(e)&&-1!==n.indexOf("/"))throw new Ir(Or.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Pr.k(n));if(!jr.G(r))throw new Ir(Or.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Di(t,new jr(r))}if(n instanceof Eh)return Di(t,n.C_);throw new Ir(Or.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+th(n)+".")}function Nf(t,e){if(!Array.isArray(t)||0===t.length)throw new Ir(Or.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ir(Or.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Rf(t,e,n){if(!n.isEqual(e))throw new Ir(Or.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function jf(t){if(ls(t)&&0===t.rn.length)throw new Ir(Or.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Df=function(){function t(t,e,n){this.M_=t,this.firestore=e,this.x_=n,this.Lf=Oh(e.o_),this.D_=new vh(e)}return t.prototype.where=function(e,n,r){var i=qh("Query.where",e),o=function(t,e,n,r,i,o,s){var a;if(i.B()){if("array-contains"===o||"array-contains-any"===o)throw new Ir(Or.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Nf(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Pf(r,t,l[c]));a={arrayValue:{values:u}}}else a=Pf(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Nf(s,o),a=Mh(n,"Query.where",s,"in"===o||"not-in"===o);var h=Ss.create(i,o,a);return function(t,e){if(e.cn()){var n=fs(t);if(null!==n&&!n.isEqual(e.field))throw new Ir(Or.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=hs(t);null!==r&&Rf(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Ir(Or.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(this.M_,0,this.Lf,this.firestore.v_,i,n,r);return new t(function(t,e){var n=t.filters.concat([e]);return new ss(t.path,t.collectionGroup,t.rn.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(this.M_,o),this.firestore,this.x_)},t.prototype.orderBy=function(e,n){var r;if(void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new Ir(Or.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=qh("Query.orderBy",e),o=function(t,e,n){if(null!==t.startAt)throw new Ir(Or.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ir(Or.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Fs(e,n);return function(t,e){if(null===hs(t)){var n=fs(t);null!==n&&Rf(0,n,e.field)}}(t,r),r}(this.M_,i,r);return new t(function(t,e){var n=t.rn.concat([e]);return new ss(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(this.M_,o),this.firestore,this.x_)},t.prototype.limit=function(e){return nh("Query.limit",e),new t(ys(this.M_,e,"F"),this.firestore,this.x_)},t.prototype.limitToLast=function(e){return nh("Query.limitToLast",e),new t(ys(this.M_,e,"L"),this.firestore,this.x_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Bf("Query.startAt",e,n,!0);return new t(ms(this.M_,i),this.firestore,this.x_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Bf("Query.startAfter",e,n,!1);return new t(ms(this.M_,i),this.firestore,this.x_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Bf("Query.endBefore",e,n,!0);return new t(vs(this.M_,i),this.firestore,this.x_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Bf("Query.endAt",e,n,!1);return new t(vs(this.M_,i),this.firestore,this.x_)},t.prototype.isEqual=function(e){return e instanceof t&&this.firestore===e.firestore&&_s(this.M_,e.M_)&&this.x_===e.x_},t.prototype.withConverter=function(e){return new t(this.M_,this.firestore,e)},t.prototype.Bf=function(t,e,n,r){if(e instanceof Af)return function(t,e,n,r,i){if(!r)throw new Ir(Or.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=ps(t);s<a.length;s++){var u=a[s];if(u.field.B())o.push(Di(e,r.key));else{var c=r.field(u.field);if(Ei(c))throw new Ir(Or.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.M();throw new Ir(Or.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Rs(o,i)}(this.M_,this.firestore.v_,t,e.o_.N_,r);var i=[e].concat(n);return function(t,e,n,r,i,o){var s=t.rn;if(i.length>s.length)throw new Ir(Or.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.B()){if("string"!=typeof c)throw new Ir(Or.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ds(t)&&-1!==c.indexOf("/"))throw new Ir(Or.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Pr.k(c));if(!jr.G(l))throw new Ir(Or.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new jr(l);a.push(Di(e,h))}else{var f=Mh(n,r,c);a.push(f)}}return new Rs(a,o)}(this.M_,this.firestore.v_,this.Lf,t,i,r)},t.prototype.onSnapshot=function(){for(var t,e,n,i=this,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a={},u=0;if("object"!=typeof o[u]||wa(o[u])||(a=o[u],u++),wa(o[u])){var c=o[u];o[u]=null===(t=c.next)||void 0===t?void 0:t.bind(c),o[u+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),o[u+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}var l={next:function(t){o[u]&&o[u](new Ff(i.firestore,new df(i.firestore.o_,i.D_,new Sh(i.firestore.o_,i.x_,i.M_),t)))},error:o[u+1],complete:o[u+2]};return jf(this.M_),function(t,e,n,i){var o=this,s=new $l(i),a=new la(e,s,n);return t.rs.fs((function(){return Object(r.b)(o,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){switch(n.label){case 0:return e=oa,[4,rf(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){s.r_(),t.rs.fs((function(){return Object(r.b)(o,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){switch(n.label){case 0:return e=sa,[4,rf(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(Cf(this.firestore.o_),this.M_,a,l)},t.prototype.get=function(t){var e=this;jf(this.M_);var n=Cf(this.firestore.o_);return(t&&"cache"===t.source?function(t,e){var n=this,i=new Vs;return t.rs.fs((function(){return Object(r.b)(n,void 0,void 0,(function(){var n;return Object(r.d)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(r.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,tc(t,e,!0)];case 1:return i=r.sent(),o=new Yc(e,i.Xa),s=o.gh(i.documents),a=o.bi(s,!1),n.resolve(a.snapshot),[3,3];case 2:return u=r.sent(),c=na(u,"Failed to execute query '"+e+" against cache"),n.reject(c),[3,3];case 3:return[2]}}))}))},[4,tf(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,i])]}}))}))})),i.promise}(n,this.M_):function(t,e,n){var i=this;void 0===n&&(n={});var o=new Vs;return t.rs.fs((function(){return Object(r.b)(i,void 0,void 0,(function(){var i;return Object(r.d)(this,(function(r){switch(r.label){case 0:return i=function(t,e,n,r,i){var o=new $l({next:function(n){e.fs((function(){return sa(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Ir(Or.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new la(n,o,{includeMetadataChanges:!0,Hs:!0});return oa(t,s)},[4,rf(t)];case 1:return[2,i.apply(void 0,[r.sent(),t.rs,e,n,o])]}}))}))})),o.promise}(n,this.M_,t)).then((function(t){return new Ff(e.firestore,new df(e.firestore.o_,e.D_,new Sh(e.firestore.o_,e.x_,e.M_),t))}))},t}(),Mf=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).S_=e,r}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new kf(this.S_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),e}(Yl),Ff=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).S_=e,r}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Df(this.o_.query.M_,this.S_,this.o_.query.x_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.o_.docs.map((function(e){return new kf(t.S_,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map((function(t){return new Mf(e.S_,t)}))},e.prototype.forEach=function(t,e){var n=this;this.o_.forEach((function(r){t.call(e,new kf(n.S_,r))}))},e.prototype.isEqual=function(t){return gf(this.o_,t.o_)},e}(Yl),Lf=function(t){function e(e,n,r){var i=this;if((i=t.call(this,us(e),n,r)||this).O_=e,e.length%2!=1)throw new Ir(Or.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.M()+" has "+e.length);return i}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.M_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.M_.path.S();return t.T()?null:Of.xf(t,this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.M_.path.M()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){0===arguments.length&&(t=vr.u()),Xl("CollectionReference.doc","path",t);var e=Pr.k(t);return Of.xf(this.M_.path.child(e),this.firestore,this.x_)},e.prototype.add=function(t){var e=this.x_?this.x_.toFirestore(t):t,n=this.doc();return Of.b_(n.o_.C_,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.O_,this.firestore,t)},e}(Df);function Uf(t,e,n){var r=eh(e,Eh);if(r.firestore!==n.o_)throw new Ir(Or.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Vf(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var qf=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Ch.bind.apply(Ch,Object(r.g)([void 0],e))))||this}return Object(r.c)(e,t),e.documentId=function(){return new e(Rr.q().M())},e.prototype.isEqual=function(t){return t instanceof Yl&&(t=t.o_),t instanceof Ch&&this.o_.F_.isEqual(t.F_)},e}(Yl),Bf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.serverTimestamp=function(){var t=new sh("serverTimestamp");return t.a_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new ih("deleteField");return t.a_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ah("arrayUnion",t)}).apply(void 0,t);return r.a_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new uh("arrayRemove",t)}).apply(void 0,t);return r.a_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new ch("increment",t)}(t);return n.a_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},e}(Yl),Hf={Firestore:wf,GeoPoint:lh,Timestamp:xr,Blob:yh,Transaction:Sf,WriteBatch:Tf,DocumentReference:Of,DocumentSnapshot:Af,Query:Df,QueryDocumentSnapshot:kf,QuerySnapshot:Ff,CollectionReference:Lf,FieldPath:qf,FieldValue:Bf,setLogLevel:function(t){ur.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function zf(t){!function(t,e){t.INTERNAL.registerComponent(new or.a("firestore",(function(t){return function(t,e){return new wf(t,new uf(t,e),new bf)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Hf)))}(t),t.registerVersion("@firebase/firestore","2.0.2")}zf(i.a)},zIRd:function(t,e,n){"use strict";var r,i,o=n("mAIw"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.k)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return u}),"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.i)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(u.join(" "))}c(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.i)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return p.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.l)(f,a.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,a.multipleInstances?t:[])}}try{for(var d=Object(o.h)(Object.keys(e)),g=d.next();!g.done;g=d.next())e[g.value]._addComponent(a)}catch(y){u={error:y}}finally{try{g&&!g.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.l)(e,t)},createSubscribe:s.j,ErrorFactory:s.b,deepExtend:s.l}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var b=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new m(t)}),"PRIVATE")),t.registerVersion(h,"0.6.13",void 0),t.registerVersion("fire-js","")}(b),e.a=b},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let i=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function s(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete(){}},u=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function c(t){return null!==t&&"object"==typeof t}const l=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(a){e=a instanceof l?f(a.errors):[a]}}if(u(s)){let t=-1,n=s.length;for(;++t<n;){const n=s[t];if(c(n))try{n.unsubscribe()}catch(a){e=e||[],a instanceof l?e=e.concat(f(a.errors)):e.push(a)}}}if(e)throw new l(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function f(t){return t.reduce((t,e)=>t.concat(e instanceof l?e.errors:e),[])}const d=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof p?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[d](){return this}static create(t,e,n){const r=new p(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends p{constructor(t,e,n,i){let o;super(),this._parentSubscriber=t;let s=this;r(e)?o=e:e&&(o=e.next,n=e.error,i=e.complete,e!==a&&(s=Object.create(e),r(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(s(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const y=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function m(t){return t}let v=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof p)return t;if(t[d])return t[d]()}return t||e||n?new p(t,e,n):new p(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof p?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=_(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[y](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?m:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=_(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function _(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const b=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class w extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class C extends p{constructor(t){super(t),this.destination=t}}let E=(()=>{class t extends v{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[d](){return new C(this)}lift(t){const e=new S(this,this);return e.operator=t,e}next(t){if(this.closed)throw new b;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new b;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new b;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new b;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new b;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new w(this,t))}asObservable(){const t=new v;return t.source=this,t}}return t.create=(t,e)=>new S(t,e),t})();class S extends E{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function T(t){return t&&"function"==typeof t.schedule}function O(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new I(t,e))}}class I{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new x(t,this.project,this.thisArg))}}class x extends p{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const A=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function k(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const P=k(),N=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function R(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const j=t=>{if(t&&"function"==typeof t[y])return r=t,t=>{const e=r[y]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(N(t))return A(t);if(R(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,s),t);if(t&&"function"==typeof t[P])return e=t,t=>{const n=e[P]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=c(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,r};function D(t,e){return new v(n=>{const r=new h;let i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}function M(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[y]}(t))return function(t,e){return new v(n=>{const r=new h;return r.add(e.schedule(()=>{const i=t[y]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(R(t))return function(t,e){return new v(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(N(t))return D(t,e);if(function(t){return t&&"function"==typeof t[P]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new v(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[P](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof v?t:new v(j(t))}class F extends p{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class L extends p{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function U(t,e){if(!e.closed)return t instanceof v?t.subscribe(e):j(t)(e)}function V(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(V((n,r)=>M(t(n,r)).pipe(O((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new q(t,n)))}class q{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new B(t,this.project,this.concurrent))}}class B extends L{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new F(this),n=this.destination;n.add(e);const r=U(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function H(t=Number.POSITIVE_INFINITY){return V(m,t)}function z(t,e){return e?D(t,e):new v(A(t))}function W(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return T(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof v?t[0]:H(e)(z(t,n))}function Q(){return function(t){return t.lift(new G(t))}}class G{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new K(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class K extends p{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class $ extends v{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new X(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return Q()(this)}}const Y=(()=>{const t=$.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class X extends C{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function Z(){return new E}function J(){return t=>{return Q()((e=Z,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,Y);return r.source=t,r.subjectFactory=n,r})(t));var e}}function tt(t){return{toString:t}.toString()}const et="__annotations__",nt="__parameters__",rt="__prop__metadata__";function it(t,e,n){return tt(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(nt)?t[nt]:Object.defineProperty(t,nt,{value:[]})[nt];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const ot=it("Inject",t=>({token:t})),st=it("Optional"),at=it("Self"),ut=it("SkipSelf");var ct=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function lt(t){for(let e in t)if(t[e]===lt)return e;throw Error("Could not find renamed property on target object.")}function ht(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ft(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function dt(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function pt(t){return gt(t,t[mt])||gt(t,t[bt])}function gt(t,e){return e&&e.token===t?e:null}function yt(t){return t&&(t.hasOwnProperty(vt)||t.hasOwnProperty(wt))?t[vt]:null}const mt=lt({"\u0275prov":lt}),vt=lt({"\u0275inj":lt}),_t=lt({"\u0275provFallback":lt}),bt=lt({ngInjectableDef:lt}),wt=lt({ngInjectorDef:lt});function Ct(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ct).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Et(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const St=lt({__forward_ref__:lt});function Tt(t){return t.__forward_ref__=Tt,t.toString=function(){return Ct(this())},t}function Ot(t){return It(t)?t():t}function It(t){return"function"==typeof t&&t.hasOwnProperty(St)&&t.__forward_ref__===Tt}const xt="undefined"!=typeof globalThis&&globalThis,At="undefined"!=typeof window&&window,kt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Pt="undefined"!=typeof global&&global,Nt=xt||Pt||At||kt,Rt=lt({"\u0275cmp":lt}),jt=lt({"\u0275dir":lt}),Dt=lt({"\u0275pipe":lt}),Mt=lt({"\u0275mod":lt}),Ft=lt({"\u0275loc":lt}),Lt=lt({"\u0275fac":lt}),Ut=lt({__NG_ELEMENT_ID__:lt});class Vt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ft({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const qt=new Vt("INJECTOR",-1),Bt={},Ht=/\n/gm,zt="__source",Wt=lt({provide:String,useValue:lt});let Qt,Gt=void 0;function Kt(t){const e=Gt;return Gt=t,e}function $t(t){const e=Qt;return Qt=t,e}function Yt(t,e=ct.Default){if(void 0===Gt)throw new Error("inject() must be called from an injection context");return null===Gt?Zt(t,void 0,e):Gt.get(t,e&ct.Optional?null:void 0,e)}function Xt(t,e=ct.Default){return(Qt||Yt)(Ot(t),e)}function Zt(t,e,n){const r=pt(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&ct.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${Ct(t)}]`)}function Jt(t){const e=[];for(let n=0;n<t.length;n++){const r=Ot(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=ct.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof st||"Optional"===i.ngMetadataName||i===st?n|=ct.Optional:i instanceof ut||"SkipSelf"===i.ngMetadataName||i===ut?n|=ct.SkipSelf:i instanceof at||"Self"===i.ngMetadataName||i===at?n|=ct.Self:t=i instanceof ot||i===ot?i.token:i}e.push(Xt(t,n))}else e.push(Xt(r))}return e}class te{get(t,e=Bt){if(e===Bt){const e=new Error(`NullInjectorError: No provider for ${Ct(t)}!`);throw e.name="NullInjectorError",e}return e}}class ee{}class ne{}function re(t,e){t.forEach(t=>Array.isArray(t)?re(t,e):e(t))}function ie(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function oe(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function se(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function ae(t,e,n){let r=ce(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function ue(t,e){const n=ce(t,e);if(n>=0)return t[1|n]}function ce(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}var le=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),he=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const fe={},de=[];let pe=0;function ge(t){return tt(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===le.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||de,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||he.Emulated,id:"c",styles:t.styles||de,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=pe++,n.inputs=be(t.inputs,e),n.outputs=be(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(ye):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(me):null,n})}function ye(t){return Ce(t)||function(t){return t[jt]||null}(t)}function me(t){return function(t){return t[Dt]||null}(t)}const ve={};function _e(t){const e={type:t.type,bootstrap:t.bootstrap||de,declarations:t.declarations||de,imports:t.imports||de,exports:t.exports||de,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&tt(()=>{ve[t.id]=t.type}),e}function be(t,e){if(null==t)return fe;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const we=ge;function Ce(t){return t[Rt]||null}function Ee(t,e){return t.hasOwnProperty(Lt)?t[Lt]:null}function Se(t,e){const n=t[Mt]||null;if(!n&&!0===e)throw new Error(`Type ${Ct(t)} does not have '\u0275mod' property.`);return n}const Te=20,Oe=10;function Ie(t){return Array.isArray(t)&&"object"==typeof t[1]}function xe(t){return Array.isArray(t)&&!0===t[1]}function Ae(t){return 0!=(8&t.flags)}function ke(t){return 2==(2&t.flags)}function Pe(t){return 1==(1&t.flags)}function Ne(t){return null!==t.template}function Re(t){return 0!=(512&t[2])}function je(t){return"string"==typeof t?t:null==t?"":""+t}function De(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():je(t)}const Me=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Nt))();function Fe(t){return t instanceof Function?t():t}function Le(t,e){const n=e?" in "+e:"";throw new Error(`No provider for ${De(t)} found${n}`)}class Ue{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ve(){return qe}function qe(t){return t.type.prototype.ngOnChanges&&(t.setInput=He),Be}function Be(){const t=ze(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===fe)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function He(t,e,n,r){const i=ze(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:fe,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new Ue(u&&u.currentValue,e,s===fe),t[r]=e}function ze(t){return t.__ngSimpleChanges__||null}Ve.ngInherit=!0;let We=void 0;function Qe(){return void 0!==We?We:"undefined"!=typeof document?document:void 0}function Ge(t){return!!t.listen}const Ke={createRenderer:(t,e)=>Qe()};function $e(t){for(;Array.isArray(t);)t=t[0];return t}function Ye(t,e){return $e(e[t+Te])}function Xe(t,e){return $e(e[t.index])}function Ze(t,e){return t.data[e+Te]}function Je(t,e){const n=e[t];return Ie(n)?n:n[0]}function tn(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function en(t){return 128==(128&t[2])}function nn(t,e){return null===t||null==e?null:t[e]}function rn(t){t[18]=0}function on(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const sn={lFrame:Sn(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function an(){return sn.bindingsEnabled}function un(){return sn.lFrame.lView}function cn(){return sn.lFrame.tView}function ln(t){sn.lFrame.contextLView=t}function hn(){return sn.lFrame.currentTNode}function fn(t,e){sn.lFrame.currentTNode=t,sn.lFrame.isParent=e}function dn(){return sn.lFrame.isParent}function pn(){return sn.isInCheckNoChangesMode}function gn(t){sn.isInCheckNoChangesMode=t}function yn(){return sn.lFrame.bindingIndex++}function mn(t){const e=sn.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function vn(t,e){const n=sn.lFrame;n.bindingIndex=n.bindingRootIndex=t,_n(e)}function _n(t){sn.lFrame.currentDirectiveIndex=t}function bn(t){sn.lFrame.currentQueryIndex=t}function wn(t,e){const n=En();sn.lFrame=n,n.currentTNode=e,n.lView=t}function Cn(t){const e=En(),n=t[1];sn.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex}function En(){const t=sn.lFrame,e=null===t?null:t.child;return null===e?Sn(t):e}function Sn(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function Tn(){const t=sn.lFrame;return sn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const On=Tn;function In(){const t=Tn();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function xn(){return sn.lFrame.selectedIndex}function An(t){sn.lFrame.selectedIndex=t}function kn(){const t=sn.lFrame;return Ze(t.tView,t.selectedIndex)}function Pn(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Nn(t,e,n){Dn(t,e,3,n)}function Rn(t,e,n,r){(3&t[2])===n&&Dn(t,e,n,r)}function jn(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Dn(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(Mn(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Mn(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const Fn=-1;class Ln{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Un(t,e,n){const r=Ge(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];qn(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Vn(t){return 3===t||4===t||6===t}function qn(t){return 64===t.charCodeAt(0)}function Bn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Hn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Hn(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function zn(t){return t!==Fn}function Wn(t){return 32767&t}function Qn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Gn=!0;function Kn(t){const e=Gn;return Gn=t,e}let $n=0;function Yn(t,e){const n=Zn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Xn(r.data,t),Xn(e,null),Xn(r.blueprint,null));const i=Jn(t,e),o=t.injectorIndex;if(zn(i)){const t=Wn(i),n=Qn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Xn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Zn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Jn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Fn;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Fn}function tr(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ut)&&(r=n[Ut]),null==r&&(r=n[Ut]=$n++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function er(t,e,n,r=ct.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ut)?t[Ut]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){wn(e,t);try{const t=i();if(null!=t||r&ct.Optional)return t;Le(n)}finally{On()}}else if("number"==typeof i){if(-1===i)return new ar(t,e);let o=null,s=Zn(t,e),a=Fn,u=r&ct.Host?e[16][6]:null;for((-1===s||r&ct.SkipSelf)&&(a=-1===s?Jn(t,e):e[s+8],a!==Fn&&sr(r,!1)?(o=e[1],s=Wn(a),e=Qn(a,e)):s=-1);-1!==s;){const t=e[1];if(or(i,s,t.data)){const t=rr(s,e,n,o,r,u);if(t!==nr)return t}a=e[s+8],a!==Fn&&sr(r,e[1].data[s+8]===u)&&or(i,s,e)?(o=t,s=Wn(a),e=Qn(a,e)):s=-1}}}if(r&ct.Optional&&void 0===i&&(i=null),0==(r&(ct.Self|ct.Host))){const t=e[9],o=$t(void 0);try{return t?t.get(n,i,r&ct.Optional):Zt(n,i,r&ct.Optional)}finally{$t(o)}}if(r&ct.Optional)return i;Le(n,"NodeInjector")}const nr={};function rr(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=function(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&Ne(t)&&t.type===n)return u}return null}(a,s,n,null==r?ke(a)&&Gn:r!=s&&2===a.type,i&ct.Host&&o===a);return null!==u?ir(e,s,u,a):nr}function ir(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Ln){const s=i;s.resolving&&function(t,e){throw new Error("Circular dependency in DI detected for "+t)}(De(o[n]));const a=Kn(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?$t(s.injectImpl):null;wn(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=qe(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&$t(u),Kn(a),s.resolving=!1,On()}}return i}function or(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function sr(t,e){return!(t&ct.Self||t&ct.Host&&e)}class ar{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return er(this._tNode,this._lView,t,void 0,e)}}function ur(t){const e=t;if(It(t))return()=>{const t=ur(Ot(e));return t?t():null};let n=Ee(e);if(null===n){const t=yt(e);n=t&&t.factory}return n||null}function cr(t){return tt(()=>{const e=t.prototype.constructor,n=e[Lt]||ur(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Lt]||ur(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function lr(t){return t.ngDebugContext}function hr(t){return t.ngOriginalError}function fr(t,...e){t.error(...e)}class dr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||fr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?lr(t)?lr(t):this._findContext(hr(t)):null}_findOriginalError(t){let e=hr(t);for(;e&&hr(e);)e=hr(e);return e}}class pr{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class gr extends pr{getTypeName(){return"HTML"}}class yr extends pr{getTypeName(){return"Style"}}class mr extends pr{getTypeName(){return"Script"}}class vr extends pr{getTypeName(){return"URL"}}class _r extends pr{getTypeName(){return"ResourceURL"}}function br(t){return t instanceof pr?t.changingThisBreaksApplicationSecurity:t}function wr(t,e){const n=Cr(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function Cr(t){return t instanceof pr&&t.getTypeName()||null}let Er=!1;function Sr(){return Er=!0,true}class Tr{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class Or{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Ir=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,xr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ar(t){return(t=String(t)).match(Ir)||t.match(xr)?t:(Sr()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function kr(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Pr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Nr=kr("area,br,col,hr,img,wbr"),Rr=kr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),jr=kr("rp,rt"),Dr=Pr(jr,Rr),Mr=Pr(Nr,Pr(Rr,kr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pr(jr,kr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Dr),Fr=kr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Lr=kr("srcset"),Ur=Pr(Fr,Lr,kr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),kr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Vr=kr("script,style,template");class qr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Mr.hasOwnProperty(e))return this.sanitizedSomething=!0,!Vr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Ur.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Fr[o]&&(s=Ar(s)),Lr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Ar(t.trim())).join(", ")),this.buf.push(" ",e,'="',zr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Mr.hasOwnProperty(e)&&!Nr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(zr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const Br=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Hr=/([^\#-~ |!])/g;function zr(t){return t.replace(/&/g,"&amp;").replace(Br,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(Hr,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Wr;function Qr(t,e){let n=null;try{Wr=Wr||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Tr:new Or(t)}(t);let r=e?String(e):"";n=Wr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Wr.getInertBodyElement(r)}while(r!==o);const s=new qr,a=s.sanitizeChildren(Gr(n)||n);return Sr()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=Gr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Gr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Kr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function $r(t){const e=Xr();return e?e.sanitize(Kr.HTML,t)||"":wr(t,"HTML")?br(t):Qr(Qe(),je(t))}function Yr(t){const e=Xr();return e?e.sanitize(Kr.URL,t)||"":wr(t,"URL")?br(t):Ar(je(t))}function Xr(){const t=un();return t&&t[12]}function Zr(t,e){t.__ngContext__=e}function Jr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const ti="ng-template";function ei(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Jr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ni(t){return 0===t.type&&t.tagName!==ti}function ri(t,e,n){return e===(0!==t.type||n?t.tagName:ti)}function ii(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Vn(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!ri(t,u,n)||""===u&&1===e.length){if(oi(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!ei(t.attrs,c,n)){if(oi(r))return!1;s=!0}continue}const l=si(8&r?"class":u,i,ni(t),n);if(-1===l){if(oi(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Jr(e,c,0)||2&r&&c!==t){if(oi(r))return!1;s=!0}}}}else{if(!s&&!oi(r)&&!oi(u))return!1;if(s&&oi(u))continue;s=!1,r=u|1&r}}return oi(r)||s}function oi(t){return 0==(1&t)}function si(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ai(t,e,n=!1){for(let r=0;r<e.length;r++)if(ii(t,e[r],n))return!0;return!1}function ui(t,e){return t?":not("+e.trim()+")":e}function ci(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||oi(s)||(e+=ui(o,i),i=""),r=s,o=o||!oi(r);n++}return""!==i&&(e+=ui(o,i)),e}const li={};function hi(t){const e=t[3];return xe(e)?e[3]:e}function fi(t){return pi(t[13])}function di(t){return pi(t[4])}function pi(t){for(;null!==t&&!xe(t);)t=t[4];return t}function gi(t){yi(cn(),un(),xn()+t,pn())}function yi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Nn(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Rn(e,r,0,n)}An(n)}function mi(t,e){return t<<17|e<<2}function vi(t){return t>>17&32767}function _i(t){return 2|t}function bi(t){return(131068&t)>>2}function wi(t,e){return-131069&t|e<<2}function Ci(t){return 1|t}function Ei(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];bn(i),n.contentQueries(2,e[o],o)}}}function Si(t,e,n){return Ge(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Ti(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,rn(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Oi(t,e,n,r,i){const o=e+Te,s=t.data[o]||function(t,e,n,r,i){const o=hn(),s=dn(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s&&null==o.child&&null!==a.parent?o.child=a:s||(o.next=a)),a}(t,o,n,r,i);return fn(s,!0),s}function Ii(t,e,n){Cn(e);try{const r=t.viewQuery;null!==r&&no(1,r,n);const i=t.template;null!==i&&ki(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ei(t,e),t.staticViewQueries&&no(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Xi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,In()}}function xi(t,e,n,r){const i=e[2];if(256==(256&i))return;Cn(e);const o=pn();try{rn(e),sn.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&ki(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Nn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Rn(e,n,0,null),jn(e,0)}if(function(t){for(let e=fi(t);null!==e;e=di(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&on(r,1),n[2]|=1024}}}(e),function(t){for(let e=fi(t);null!==e;e=di(e))for(let t=Oe;t<e.length;t++){const n=e[t],r=n[1];en(n)&&xi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Ei(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Nn(e,n)}else{const n=t.contentHooks;null!==n&&Rn(e,n,1),jn(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,An(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(vn(r,i),s(2,e[i])),i++)}}}finally{An(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Yi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&no(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Nn(e,n)}else{const n=t.viewHooks;null!==n&&Rn(e,n,2),jn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,on(e[3],-1))}finally{In()}}function Ai(t,e,n,r){const i=e[10],o=!pn(),s=4==(4&e[2]);try{o&&!s&&i.begin&&i.begin(),s&&Ii(t,e,r),xi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function ki(t,e,n,r,i){const o=xn();try{An(-1),2&r&&e.length>Te&&yi(t,e,0,pn()),n(r,i)}finally{An(o)}}function Pi(t,e,n){an()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Yn(n,e),Zr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=Ne(r);o&&Qi(e,n,r);const u=ir(e,t,a,n);Zr(u,e),null!==s&&Gi(0,a-i,u,r,0,s),o&&(Je(n.index,e)[8]=u)}}(t,e,n,Xe(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-Te,u=sn.lFrame.currentDirectiveIndex;try{An(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];_n(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?Vi(r,i):s&&o.push(null)}}finally{An(-1),_n(u)}}(t,e,n))}function Ni(t,e,n=Xe){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Ri(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ji(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ji(t,e,n,r,i,o,s,a,u,c){const l=Te+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:li);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Di(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Mi(t,e,n,r,i,o,s,a){const u=Xe(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(so(t,n,c,r,i),ke(e)&&function(t,e){const n=Je(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):2===e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.tagName||"",r):i,Ge(o)?o.setProperty(u,r,i):qn(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Fi(t,e,n,r){let i=!1;if(an()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];ai(n,s.selectors,!1)&&(i||(i=[]),tr(Yn(n,e),t,s.type),Ne(s)?(Bi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,zi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}qi(t,n,o.length);let a=!1,u=!1;for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Bn(n.mergedAttrs,c.hostAttrs),Wi(t,e,c),Hi(t.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!a&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-Te),a=!0),u||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-Te),u=!0),Li(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||ni(e)?null:Ki(n,i);o.push(c),s=Di(n,u,s),a=Di(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),Ui(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Bn(n.mergedAttrs,n.attrs),i}function Li(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function Ui(t,e,n){for(let r=0;r<n;r++)e.push(li),t.blueprint.push(li),t.data.push(null)}function Vi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function qi(t,e,n){const r=Te-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function Bi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Hi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ne(e)&&(n[""]=t)}}function zi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Wi(t,e,n){t.data.push(n);const r=n.factory||(n.factory=Ee(n.type)),i=new Ln(r,Ne(n),null);t.blueprint.push(i),e.push(i)}function Qi(t,e,n){const r=Xe(e,t),i=Ri(n),o=t[10],s=Zi(t,Ti(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Gi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Ki(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function $i(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Yi(t,e){const n=Je(e,t);if(en(n)){const t=n[1];80&n[2]?xi(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=fi(e);null!==r;r=di(r))for(let e=Oe;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];xi(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Je(n[r],e);en(i)&&i[5]>0&&t(i)}}(n)}}function Xi(t,e){const n=Je(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Ii(r,n,n[8])}function Zi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ji(t){for(;t;){t[2]|=64;const e=hi(t);if(Re(t)&&!e)return t;t=e}return null}function to(t,e,n){const r=e[10];r.begin&&r.begin();try{xi(t,e,t.template,n)}catch(i){throw oo(e,i),i}finally{r.end&&r.end()}}function eo(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=tn(n),i=r[1];Ai(i,r,i.template,n)}}(t[8])}function no(t,e,n){bn(0),e(t,n)}const ro=(()=>Promise.resolve(null))();function io(t){return t[7]||(t[7]=[])}function oo(t,e){const n=t[9],r=n?n.get(dr,null):null;r&&r.handleError(e)}function so(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function ao(t,e,n){const r=Ye(e,t),i=t[11];Ge(i)?i.setValue(r,n):r.textContent=n}function uo(t,e,n,r,i){if(null!=r){let o,s=!1;xe(r)?o=r:Ie(r)&&(s=!0,r=r[0]);const a=$e(r);0===t&&null!==n?null==i?go(e,n,a):po(e,n,a,i||null):1===t&&null!==n?po(e,n,a,i||null):2===t?function(t,e,n){const r=mo(t,e);r&&function(t,e,n,r){Ge(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==$e(n)&&uo(e,t,r,o,i);for(let s=Oe;s<n.length;s++){const i=n[s];bo(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function co(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,on(i,-1)),n.splice(r,1)}function lo(t,e){if(t.length<=Oe)return;const n=Oe+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&co(o,r),e>0&&(t[n-1][4]=r[4]);const s=oe(t,Oe+e);bo(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function ho(t,e){if(!(256&e[2])){const n=e[11];Ge(n)&&n.destroyNode&&bo(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return fo(t[1],t);for(;e;){let n=null;if(Ie(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Ie(e)&&fo(e[1],e),e=e[3];null===e&&(e=t),Ie(e)&&fo(e[1],e),n=e&&e[4]}e=n}}(e)}}function fo(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ln)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):$e(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e),1===e[1].type&&Ge(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&xe(e[3])){n!==e[3]&&co(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function po(t,e,n,r){Ge(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function go(t,e,n){Ge(t)?t.appendChild(e,n):e.appendChild(n)}function yo(t,e,n,r){null!==r?po(t,e,n,r):go(t,e,n)}function mo(t,e){return Ge(t)?t.parentNode(e):e.parentNode}function vo(t,e,n,r){const i=function(t,e,n){let r=e.parent;for(;null!=r&&(3===r.type||4===r.type);)r=(e=r).parent;if(null===r)return n[0];if(e&&4===e.type&&4&e.flags)return Xe(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==he.ShadowDom&&n!==he.Native)return null}return Xe(r,n)}(t,r,e);if(null!=i){const t=e[11],o=function(t,e){return 3===t.type||4===t.type?Xe(t,e):null}(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)yo(t,i,n[e],o);else yo(t,i,n,o)}}function _o(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;s&&0===e&&(a&&Zr($e(a),r),n.flags|=4),64!=(64&n.flags)&&(3===u||4===u?(_o(t,e,n.child,r,i,o,!1),uo(e,t,i,a,o)):1===u?wo(t,e,r,n,i,o):uo(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function bo(t,e,n,r,i,o){_o(n,r,t.firstChild,e,i,o,!1)}function wo(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)uo(e,t,i,a[u],o);else _o(t,e,a,s[3],i,o,!0)}function Co(t,e,n){Ge(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Eo(t,e,n){Ge(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class So{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return function t(e,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push($e(s)),xe(s))for(let e=Oe;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(3===a||4===a)t(e,n,r.child,i);else if(1===a){const e=n[16],o=e[6].projection[r.projection];if(Array.isArray(o))i.push(...o);else{const n=hi(e);t(n[1],n,o,i,!0)}}r=o?r.projectionNext:r.next}return i}(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}ho(this._lView[1],this._lView)}onDestroy(t){!function(t,e,n,r){const i=io(e);i.push(null),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}(this._lView[1],this._lView,0,t)}markForCheck(){Ji(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){to(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){gn(!0);try{to(t,e,n)}finally{gn(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,bo(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class To extends So{constructor(t){super(t),this._view=t}detectChanges(){eo(this._view)}checkNoChanges(){!function(t){gn(!0);try{eo(t)}finally{gn(!1)}}(this._view)}get context(){return null}}let Oo,Io,xo;function Ao(t,e,n){return Oo||(Oo=class extends t{}),new Oo(Xe(e,n))}let ko=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Po(),t})();const Po=function(t=!1){return function(t,e,n){if(!n&&ke(t)){const n=Je(t.index,e);return new So(n,n)}return 2===t.type||0===t.type||3===t.type||4===t.type?new So(e[16],e):null}(hn(),un(),t)},No=Function;function Ro(t){return"function"==typeof t}const jo=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|[^()]+\(arguments\))\)/,Do=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,Mo=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Fo=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{\s*super\(\.\.\.arguments\)/;class Lo{constructor(t){this._reflect=t||Nt.Reflect}isReflectionEnabled(){return!0}factory(t){return(...e)=>new t(...e)}_zipTypesAndAnnotations(t,e){let n;n=se(void 0===t?e.length:t.length);for(let r=0;r<n.length;r++)n[r]=void 0===t?[]:t[r]&&t[r]!=Object?[t[r]]:[],e&&null!=e[r]&&(n[r]=n[r].concat(e[r]));return n}_ownParameters(t,e){if(n=t.toString(),jo.test(n)||Fo.test(n)||Do.test(n)&&!Mo.test(n))return null;var n;if(t.parameters&&t.parameters!==e.parameters)return t.parameters;const r=t.ctorParameters;if(r&&r!==e.ctorParameters){const t="function"==typeof r?r():r,e=t.map(t=>t&&t.type),n=t.map(t=>t&&Uo(t.decorators));return this._zipTypesAndAnnotations(e,n)}const i=t.hasOwnProperty(nt)&&t[nt],o=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return o||i?this._zipTypesAndAnnotations(o,i):se(t.length)}parameters(t){if(!Ro(t))return[];const e=Vo(t);let n=this._ownParameters(t,e);return n||e===Object||(n=this.parameters(e)),n||[]}_ownAnnotations(t,e){if(t.annotations&&t.annotations!==e.annotations){let e=t.annotations;return"function"==typeof e&&e.annotations&&(e=e.annotations),e}return t.decorators&&t.decorators!==e.decorators?Uo(t.decorators):t.hasOwnProperty(et)?t[et]:null}annotations(t){if(!Ro(t))return[];const e=Vo(t),n=this._ownAnnotations(t,e)||[];return(e!==Object?this.annotations(e):[]).concat(n)}_ownPropMetadata(t,e){if(t.propMetadata&&t.propMetadata!==e.propMetadata){let e=t.propMetadata;return"function"==typeof e&&e.propMetadata&&(e=e.propMetadata),e}if(t.propDecorators&&t.propDecorators!==e.propDecorators){const e=t.propDecorators,n={};return Object.keys(e).forEach(t=>{n[t]=Uo(e[t])}),n}return t.hasOwnProperty(rt)?t[rt]:null}propMetadata(t){if(!Ro(t))return{};const e=Vo(t),n={};if(e!==Object){const t=this.propMetadata(e);Object.keys(t).forEach(e=>{n[e]=t[e]})}const r=this._ownPropMetadata(t,e);return r&&Object.keys(r).forEach(t=>{const e=[];n.hasOwnProperty(t)&&e.push(...n[t]),e.push(...r[t]),n[t]=e}),n}ownPropMetadata(t){return Ro(t)&&this._ownPropMetadata(t,Vo(t))||{}}hasLifecycleHook(t,e){return t instanceof No&&e in t.prototype}guards(t){return{}}getter(t){return new Function("o","return o."+t+";")}setter(t){return new Function("o","v","return o."+t+" = v;")}method(t){return new Function("o","args",`if (!o.${t}) throw new Error('"${t}" is undefined');\n        return o.${t}.apply(o, args);`)}importUri(t){return"object"==typeof t&&t.filePath?t.filePath:"./"+Ct(t)}resourceUri(t){return"./"+Ct(t)}resolveIdentifier(t,e,n,r){return r}resolveEnum(t,e){return t[e]}}function Uo(t){return t?t.map(t=>new(0,t.type.annotationCls)(...t.args?t.args:[])):[]}function Vo(t){const e=t.prototype?Object.getPrototypeOf(t.prototype):null;return(e?e.constructor:null)||Object}const qo=new Vt("Set Injector scope."),Bo={},Ho={},zo=[];let Wo=void 0;function Qo(){return void 0===Wo&&(Wo=new te),Wo}function Go(t,e=null,n=null,r){return new Ko(t,n,e||Qo(),r)}class Ko{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&re(e,n=>this.processProvider(n,t,e)),re([t],t=>this.processInjectorType(t,[],i)),this.records.set(qt,Xo(void 0,this));const o=this.records.get(qo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:Ct(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Bt,n=ct.Default){this.assertNotDestroyed();const r=Kt(this);try{if(!(n&ct.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Vt)&&pt(t);e=n&&this.injectableDefInScope(n)?Xo($o(t),Bo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&ct.Self?Qo():this.parent).get(t,e=n&ct.Optional&&e===Bt?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(Ct(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[zt]&&i.unshift(e[zt]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=Ct(e);if(Array.isArray(e))i=e.map(Ct).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):Ct(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Ht,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Kt(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(Ct(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=Ot(t)))return!1;let r=yt(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=yt(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{re(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];re(r,t=>this.processProvider(t,n,r||zo))}}this.injectorDefTypes.add(o),this.records.set(o,Xo(r.factory,Bo));const a=r.providers;if(null!=a&&!s){const e=t;re(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Jo(t=Ot(t))?t:Ot(t&&t.provide);const i=function(t,e,n){return Zo(t)?Xo(void 0,t.useValue):Xo(Yo(t),Bo)}(t);if(Jo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Xo(void 0,Bo,!0),e.factory=()=>Jt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Bo&&(e.value=Ho,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function $o(t){const e=pt(t),n=null!==e?e.factory:Ee(t);if(null!==n)return n;const r=yt(t);if(null!==r)return r.factory;if(t instanceof Vt)throw new Error(`Token ${Ct(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=se(e,"?");throw new Error(`Can't resolve all parameters for ${Ct(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[mt]||t[bt]||t[_t]&&t[_t]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Yo(t,e,n){let r=void 0;if(Jo(t)){const e=Ot(t);return Ee(e)||$o(e)}if(Zo(t))r=()=>Ot(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Jt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Xt(Ot(t.useExisting));else{const e=Ot(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Ee(e)||$o(e);r=()=>new e(...Jt(t.deps))}var i;return r}function Xo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Zo(t){return null!==t&&"object"==typeof t&&Wt in t}function Jo(t){return"function"==typeof t}const ts=function(t,e,n){return function(t,e=null,n=null,r){const i=Go(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let es=(()=>{class t{static create(t,e){return Array.isArray(t)?ts(t,e,""):ts(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Bt,t.NULL=new te,t.\u0275prov=ft({token:t,providedIn:"any",factory:()=>Xt(qt)}),t.__NG_ELEMENT_ID__=-1,t})();function ns(t){return t.length>1?" ("+function(t){const e=[];for(let n=0;n<t.length;++n){if(e.indexOf(t[n])>-1)return e.push(t[n]),e;e.push(t[n])}return e}(t.slice().reverse()).map(t=>Ct(t.token)).join(" -> ")+")":""}function rs(t,e,n,r){const i=[e],o=n(i),s=r?function(t,e){const n=`${t} caused by: ${e instanceof Error?e.message:e}`,r=Error(n);return r.ngOriginalError=e,r}(o,r):Error(o);return s.addKey=is,s.keys=i,s.injectors=[t],s.constructResolvingMessage=n,s.ngOriginalError=r,s}function is(t,e){this.injectors.push(t),this.keys.push(e),this.message=this.constructResolvingMessage(this.keys)}function os(t,e){const n=[];for(let r=0,i=e.length;r<i;r++){const t=e[r];n.push(t&&0!=t.length?t.map(Ct).join(" "):"?")}return Error("Cannot resolve all parameters for '"+Ct(t)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+Ct(t)+"' is decorated with Injectable.")}class ss{constructor(t,e){if(this.token=t,this.id=e,!t)throw new Error("Token must be defined!");this.displayName=Ct(this.token)}static get(t){return us.get(Ot(t))}static get numberOfKeys(){return us.numberOfKeys}}class as{constructor(){this._allKeys=new Map}get(t){if(t instanceof ss)return t;if(this._allKeys.has(t))return this._allKeys.get(t);const e=new ss(t,ss.numberOfKeys);return this._allKeys.set(t,e),e}get numberOfKeys(){return this._allKeys.size}}const us=new as;class cs{constructor(t){this.reflectionCapabilities=t}updateCapabilities(t){this.reflectionCapabilities=t}factory(t){return this.reflectionCapabilities.factory(t)}parameters(t){return this.reflectionCapabilities.parameters(t)}annotations(t){return this.reflectionCapabilities.annotations(t)}propMetadata(t){return this.reflectionCapabilities.propMetadata(t)}hasLifecycleHook(t,e){return this.reflectionCapabilities.hasLifecycleHook(t,e)}getter(t){return this.reflectionCapabilities.getter(t)}setter(t){return this.reflectionCapabilities.setter(t)}method(t){return this.reflectionCapabilities.method(t)}importUri(t){return this.reflectionCapabilities.importUri(t)}resourceUri(t){return this.reflectionCapabilities.resourceUri(t)}resolveIdentifier(t,e,n,r){return this.reflectionCapabilities.resolveIdentifier(t,e,n,r)}resolveEnum(t,e){return this.reflectionCapabilities.resolveEnum(t,e)}}const ls=new cs(new Lo);class hs{constructor(t,e,n){this.key=t,this.optional=e,this.visibility=n}static fromKey(t){return new hs(t,!1,null)}}const fs=[];class ds{constructor(t,e,n){this.key=t,this.resolvedFactories=e,this.multiProvider=n,this.resolvedFactory=this.resolvedFactories[0]}}class ps{constructor(t,e){this.factory=t,this.dependencies=e}}function gs(t){let e,n;if(t.useClass){const r=Ot(t.useClass);e=ls.factory(r),n=ms(r)}else t.useExisting?(e=t=>t,n=[hs.fromKey(ss.get(t.useExisting))]):t.useFactory?(e=t.useFactory,n=function(t,e){if(e){const n=e.map(t=>[t]);return e.map(e=>vs(t,e,n))}return ms(t)}(t.useFactory,t.deps)):(e=()=>t.useValue,n=fs);return new ps(e,n)}function ys(t){return new ds(ss.get(t.provide),[gs(t)],t.multi||!1)}function ms(t){const e=ls.parameters(t);if(!e)return[];if(e.some(t=>null==t))throw os(t,e);return e.map(n=>vs(t,n,e))}function vs(t,e,n){let r=null,i=!1;if(!Array.isArray(e))return _s(e instanceof ot?e.token:e,i,null);let o=null;for(let s=0;s<e.length;++s){const t=e[s];t instanceof No?r=t:t instanceof ot?r=t.token:t instanceof st?i=!0:t instanceof at||t instanceof ut?o=t:t instanceof Vt&&(r=t)}if(r=Ot(r),null!=r)return _s(r,i,o);throw os(t,n)}function _s(t,e,n){return new hs(ss.get(t),e,n)}const bs={};class ws{static resolve(t){return function(t){const e=function(t,e){for(let n=0;n<t.length;n++){const r=t[n],i=e.get(r.key.id);if(i){if(r.multiProvider!==i.multiProvider)throw Error(`Cannot mix multi providers and regular providers, got: ${i} ${r}`);if(r.multiProvider)for(let t=0;t<r.resolvedFactories.length;t++)i.resolvedFactories.push(r.resolvedFactories[t]);else e.set(r.key.id,r)}else{let t;t=r.multiProvider?new ds(r.key,r.resolvedFactories.slice(),r.multiProvider):r,e.set(r.key.id,t)}}return e}(function t(e,n){return e.forEach(e=>{if(e instanceof No)n.push({provide:e,useClass:e});else if(e&&"object"==typeof e&&void 0!==e.provide)n.push(e);else{if(!Array.isArray(e))throw Error("Invalid provider - only instances of Provider and Type are allowed, got: "+e);t(e,n)}}),n}(t,[]).map(ys),new Map);return Array.from(e.values())}(t)}static resolveAndCreate(t,e){const n=ws.resolve(t);return ws.fromResolvedProviders(n,e)}static fromResolvedProviders(t,e){return new Cs(t,e)}}let Cs=(()=>{class t{constructor(t,e){this._constructionCounter=0,this._providers=t,this.parent=e||null;const n=t.length;this.keyIds=[],this.objs=[];for(let r=0;r<n;r++)this.keyIds[r]=t[r].key.id,this.objs[r]=bs}get(t,e=Bt){return this._getByKey(ss.get(t),null,e)}resolveAndCreateChild(t){const e=ws.resolve(t);return this.createChildFromResolved(e)}createChildFromResolved(e){const n=new t(e);return n.parent=this,n}resolveAndInstantiate(t){return this.instantiateResolved(ws.resolve([t])[0])}instantiateResolved(t){return this._instantiateProvider(t)}getProviderAtIndex(t){if(t<0||t>=this._providers.length)throw function(t){return Error(`Index ${t} is out-of-bounds.`)}(t);return this._providers[t]}_new(t){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw rs(this,t.key,(function(t){return"Cannot instantiate cyclic dependency!"+ns(t)}));return this._instantiateProvider(t)}_getMaxNumberOfObjects(){return this.objs.length}_instantiateProvider(t){if(t.multiProvider){const e=[];for(let n=0;n<t.resolvedFactories.length;++n)e[n]=this._instantiate(t,t.resolvedFactories[n]);return e}return this._instantiate(t,t.resolvedFactories[0])}_instantiate(t,e){const n=e.factory;let r,i;try{r=e.dependencies.map(t=>this._getByReflectiveDependency(t))}catch(s){throw s.addKey&&s.addKey(this,t.key),s}try{i=n(...r)}catch(s){throw rs(this,t.key,(function(t){const e=Ct(t[0].token);return`${o.message}: Error during instantiation of ${e}!${ns(t)}.`}),o=s)}var o;return i}_getByReflectiveDependency(t){return this._getByKey(t.key,t.visibility,t.optional?null:Bt)}_getByKey(e,n,r){return e===t.INJECTOR_KEY?this:n instanceof at?this._getByKeySelf(e,r):this._getByKeyDefault(e,r,n)}_getObjByKeyId(t){for(let e=0;e<this.keyIds.length;e++)if(this.keyIds[e]===t)return this.objs[e]===bs&&(this.objs[e]=this._new(this._providers[e])),this.objs[e];return bs}_throwOrNull(t,e){if(e!==Bt)return e;throw function(t,e){return rs(t,e,(function(t){return`No provider for ${Ct(t[0].token)}!${ns(t)}`}))}(this,t)}_getByKeySelf(t,e){const n=this._getObjByKeyId(t.id);return n!==bs?n:this._throwOrNull(t,e)}_getByKeyDefault(e,n,r){let i;for(i=r instanceof ut?this.parent:this;i instanceof t;){const t=i,n=t._getObjByKeyId(e.id);if(n!==bs)return n;i=t.parent}return null!==i?i.get(e.token,n):this._throwOrNull(e,n)}get displayName(){return`ReflectiveInjector(providers: [${function(t,e){const n=[];for(let r=0;r<t._providers.length;++r)n[r]=' "'+t.getProviderAtIndex(r).key.displayName+'" ';return n}(this).join(", ")}])`}toString(){return this.displayName}}return t.INJECTOR_KEY=ss.get(es),t})();const Es=new Vt("AnalyzeForEntryComponents");function Ss(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=Et(i,t):2==o&&(r=Et(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Ts(t,e){const n=tn(t)[1],r=n.data.length-1;Pn(n,{directiveStart:r,directiveEnd:r+1})}function Os(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(Ne(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Is(t.inputs),e.declaredInputs=Is(t.declaredInputs),e.outputs=Is(t.outputs);const n=i.hostBindings;n&&ks(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&xs(t,o),s&&As(t,s),ht(t.inputs,i.inputs),ht(t.declaredInputs,i.declaredInputs),ht(t.outputs,i.outputs),Ne(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Os&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Bn(i.hostAttrs,n=Bn(n,i.hostAttrs))}}(r)}function Is(t){return t===fe?{}:t===de?[]:t}function xs(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function As(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function ks(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Ps=null;function Ns(){if(!Ps){const t=Nt.Symbol;if(t&&t.iterator)Ps=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ps=n)}}}return Ps}function Rs(t){return!!js(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ns()in t)}function js(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ds(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ms(t,e,n,r){const i=un();return Ds(i,yn(),e)&&(cn(),function(t,e,n,r,i,o){const s=Xe(t,e),a=e[11];if(null==r)Ge(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==i?je(r):i(r,t.tagName||"",n);Ge(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}(kn(),i,t,e,n,r)),Ms}function Fs(t,e,n,r){return Ds(t,yn(),n)?e+je(n)+r:li}function Ls(t,e,n,r,i,o,s,a){const u=un(),c=cn(),l=t+Te,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Oi(e,t,0,s||null,nn(c,a));Fi(e,n,l,nn(c,u)),Pn(e,l);const h=l.tViews=ji(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,o,s):c.data[l];fn(h,!1);const f=u[11].createComment("");vo(c,u,f,h),Zr(f,u),Zi(u,u[l]=$i(f,u,f,h)),Pe(h)&&Pi(c,u,h),null!=s&&Ni(u,h,a)}function Us(t){return function(t,e){return t[e+Te]}(sn.lFrame.contextLView,t)}function Vs(t,e=ct.Default){const n=un();return null===n?Xt(t,e):er(hn(),n,Ot(t),e)}function qs(t,e,n){const r=un();return Ds(r,yn(),e)&&Mi(cn(),kn(),r,t,e,r[11],n,!1),qs}function Bs(t,e,n,r,i){const o=i?"class":"style";so(t,n,e.inputs[o],o,r)}function Hs(t,e,n,r){const i=un(),o=cn(),s=Te+t,a=i[11],u=i[s]=Si(e,a,sn.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Oi(e,t,2,i,nn(a,o));return Fi(e,n,u,nn(a,s)),null!==u.attrs&&Ss(u,u.attrs,!1),null!==u.mergedAttrs&&Ss(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(t,o,i,0,e,n,r):o.data[s];fn(c,!0);const l=c.mergedAttrs;null!==l&&Un(a,u,l);const h=c.classes;null!==h&&Eo(a,u,h);const f=c.styles;null!==f&&Co(a,u,f),vo(o,i,u,c),0===sn.lFrame.elementDepthCount&&Zr(u,i),sn.lFrame.elementDepthCount++,Pe(c)&&(Pi(o,i,c),function(t,e,n){if(Ae(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&Ni(i,c)}function zs(){let t=hn();dn()?sn.lFrame.isParent=!1:(t=t.parent,fn(t,!1));const e=t;sn.lFrame.elementDepthCount--;const n=cn();n.firstCreatePass&&(Pn(n,t),Ae(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Bs(n,e,un(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Bs(n,e,un(),e.stylesWithoutHost,!1)}function Ws(t,e,n,r){Hs(t,e,n,r),zs()}function Qs(){return un()}function Gs(t){return!!t&&"function"==typeof t.then}function Ks(t){return!!t&&"function"==typeof t.subscribe}function $s(t,e,n=!1,r){const i=un(),o=cn(),s=hn();return function(t,e,n,r,i,o,s=!1,a){const u=Pe(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=io(e);let h=!0;if(2===r.type){const f=Xe(r,e),d=a?a(f):fe,p=d.target||f,g=l.length,y=a?t=>a($e(t[r.index])).target:r.index;if(Ge(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Xs(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=Xs(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),$s}function Ys(t,e,n){try{return!1!==e(n)}catch(r){return oo(t,r),!1}}function Xs(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Je(t.index,e):e;0==(32&e[2])&&Ji(s);let a=Ys(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Ys(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Zs(t=1){return function(t){return(sn.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,sn.lFrame.contextLView))[8]}(t)}function Js(t,e,n){return ta(t,"",e,"",n),Js}function ta(t,e,n,r,i){const o=un(),s=Fs(o,e,n,r);return s!==li&&Mi(cn(),kn(),o,t,s,o[11],i,!1),ta}const ea=[];function na(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?vi(o):bi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];ra(t[a],e)&&(u=!0,t[a+1]=r?Ci(n):_i(n)),a=r?vi(n):bi(n)}u&&(t[n+1]=r?_i(o):Ci(o))}function ra(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ce(t,e)>=0}const ia={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function oa(t){return t.substring(ia.key,ia.keyEnd)}function sa(t,e){const n=ia.textEnd;return n===e?-1:(e=ia.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ia.key=e,n),aa(t,e,n))}function aa(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function ua(t,e){return function(t,e,n,r){const i=un(),o=cn(),s=mn(2);o.firstUpdatePass&&fa(o,t,s,true),e!==li&&Ds(i,s,e)&&ga(o,o.data[xn()+Te],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=Ct(br(t))),t}(e),true,s)}(t,e),ua}function ca(t,e){for(let n=function(t){return function(t){ia.key=0,ia.keyEnd=0,ia.value=0,ia.valueEnd=0,ia.textEnd=t.length}(t),sa(t,aa(t,0,ia.textEnd))}(e);n>=0;n=sa(e,n))ae(t,oa(e),!0)}function la(t,e,n,r){const i=cn(),o=mn(2);i.firstUpdatePass&&fa(i,null,o,r);const s=un();if(n!==li&&Ds(s,o,n)){const a=i.data[xn()+Te];if(va(a,r)&&!ha(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=Et(t,n||"")),Bs(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===li&&(i=ea);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const f=u<i.length?i[u+1]:void 0,d=c<o.length?o[c+1]:void 0;let p=null,g=void 0;l===h?(u+=2,c+=2,f!==d&&(p=h,g=d)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,g=d),null!==p&&ga(t,e,n,r,p,g,s,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return ea;const r=[],i=br(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function ha(t,e){return e>=t.expandoStartIndex}function fa(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[xn()+Te],s=ha(t,n);va(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=sn.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=pa(n=da(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=da(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==bi(r))return t[vi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=da(null,t,e,n[1],r),n=pa(n,e.attrs,r),function(t,e,n,r){t[vi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=pa(r,t[o].hostAttrs,n);return pa(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=vi(s),u=bi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||ce(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=vi(t[a+1]);t[r+1]=mi(e,a),0!==e&&(t[e+1]=wi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=mi(a,0),0!==a&&(t[a+1]=wi(t[a+1],r)),a=r;else t[r+1]=mi(u,0),0===a?a=r:t[u+1]=wi(t[u+1],r),u=r;l&&(t[r+1]=_i(t[r+1])),na(t,c,r,!0),na(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&ce(o,e)>=0&&(n[r+1]=Ci(n[r+1]))}(e,c,t,r,o),s=mi(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function da(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=pa(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function pa(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ae(t,s,!!n||e[++o]))}return void 0===t?null:t}function ga(t,e,n,r,i,o,s,a){if(2!==e.type)return;const u=t.data,c=u[a+1];ma(1==(1&c)?ya(u,e,n,i,bi(c),s):void 0)||(ma(o)||2==(2&c)&&(o=ya(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Ge(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{const e=-1==r.indexOf("-")?void 0:2;null==i?o?t.removeStyle(n,r,e):n.style.removeProperty(r):o?t.setStyle(n,r,i,e):n.style.setProperty(r,i)}}(r,s,Ye(xn(),n),i,o))}function ya(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===li&&(l=c?ea:void 0);let h=c?ue(l,r):u===r?l:void 0;if(o&&!ma(h)&&(h=ue(e,r)),ma(h)&&(a=h,s))return a;const f=t[i+1];i=s?vi(f):bi(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=ue(t,r))}return a}function ma(t){return void 0!==t}function va(t,e){return 0!=(t.flags&(e?16:32))}function _a(t,e=""){const n=un(),r=cn(),i=t+Te,o=r.firstCreatePass?Oi(r,t,2,null,null):r.data[i],s=n[i]=function(t,e){return Ge(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);vo(r,n,s,o),fn(o,!1)}function ba(t){return wa("",t,""),ba}function wa(t,e,n){const r=un(),i=Fs(r,t,e,n);return i!==li&&ao(r,xn(),i),wa}function Ca(t,e,n,r,i){const o=un(),s=function(t,e,n,r,i,o){const s=function(t,e,n,r){const i=Ds(t,e,n);return Ds(t,e+1,r)||i}(t,sn.lFrame.bindingIndex,n,i);return mn(2),s?e+je(n)+r+je(i)+o:li}(o,t,e,n,r,i);return s!==li&&ao(o,xn(),s),Ca}function Ea(t,e,n){la(ae,ca,Fs(un(),t,e,n),!0)}const Sa=void 0;var Ta=["en",[["a","p"],["AM","PM"],Sa],[["AM","PM"],Sa,Sa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Sa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Sa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Sa,"{1} 'at' {0}",Sa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Oa={};function Ia(t){return t in Oa||(Oa[t]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[t]),Oa[t]}var xa=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Aa="en-US";let ka=Aa;function Pa(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(ka=t.toLowerCase().replace(/_/g,"-"))}function Na(t,e,n,r,i){if(t=Ot(t),Array.isArray(t))for(let o=0;o<t.length;o++)Na(t[o],e,n,r,i);else{const o=cn(),s=un();let a=Jo(t)?t:Ot(t.provide),u=Yo(t);const c=hn(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(Jo(t)||!t.multi){const r=new Ln(u,i,Vs),d=Da(a,e,i?l:l+f,h);-1===d?(tr(Yn(c,s),o,a),Ra(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=Da(a,e,l+f,h),p=Da(a,e,l,l+f),g=d>=0&&n[d],y=p>=0&&n[p];if(i&&!y||!i&&!g){tr(Yn(c,s),o,a);const l=function(t,e,n,r,i){const o=new Ln(t,n,Vs);return o.multi=[],o.index=e,o.componentProviders=0,ja(o,i,r&&!n),o}(i?Fa:Ma,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),Ra(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Ra(o,t,d>-1?d:p,ja(n[i?p:d],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function Ra(t,e,n,r){const i=Jo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ja(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Da(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Ma(t,e,n,r){return La(this.multi,[])}function Fa(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=ir(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),La(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],La(i,o);return o}function La(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ua(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=cn();if(r.firstCreatePass){const i=Ne(t);Na(n,r.data,r.blueprint,i,!0),Na(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Va{}class qa{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${Ct(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ba=(()=>{class t{}return t.NULL=new qa,t})(),Ha=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>za(t),t})();const za=function(t){return Ao(t,hn(),un())};class Wa{}var Qa=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Ga=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ka(),t})();const Ka=function(){const t=un(),e=Je(hn().index,t);return function(t){const e=t[11];if(Ge(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Ie(e)?e:t)};let $a=(()=>{class t{}return t.\u0275prov=ft({token:t,providedIn:"root",factory:()=>null}),t})();class Ya{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Xa=new Ya("10.2.3");class Za{constructor(){}supports(t){return Rs(t)}create(t){return new tu(t)}}const Ja=(t,e)=>e;class tu{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ja}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<iu(n,r,i)?e:n,s=iu(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Rs(t))throw new Error(`Error trying to diff '${Ct(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ns()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new eu(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ru),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ru),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class eu{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class nu{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ru{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new nu,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iu(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ou{constructor(){}supports(t){return t instanceof Map||js(t)}create(){return new su}}class su{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||js(t)))throw new Error(`Error trying to diff '${Ct(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new au(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class au{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let uu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ut,new st]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=ft({token:t,providedIn:"root",factory:()=>new t([new Za])}),t})(),cu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ut,new st]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ft({token:t,providedIn:"root",factory:()=>new t([new ou])}),t})();const lu=[new ou],hu=new uu([new Za]),fu=new cu(lu);let du=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>pu(t,Ha),t})();const pu=function(t,e){return function(t,e,n,r){return Io||(Io=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Ti(this._declarationView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Ii(e,n,t),new So(n)}}),0===n.type?new Io(r,n,Ao(e,n,r)):null}(t,e,hn(),un())};let gu=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>yu(t,Ha),t})();const yu=function(t,e){return function(t,e,n,r){let i;xo||(xo=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return Ao(e,this._hostTNode,this._hostView)}get injector(){return new ar(this._hostTNode,this._hostView)}get parentInjector(){const t=Jn(this._hostTNode,this._hostView);if(zn(t)){const e=Qn(t,this._hostView),n=Wn(t);return new ar(e[1].data[n+8],e)}return new ar(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-Oe}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ee,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),xe(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new xo(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=Oe+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-Oe?(e[4]=n[i],ie(n,Oe+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=function t(e,n){const r=Oe+e+1;if(r<n.length){const e=n[r],i=e[1].firstChild;if(null!==i)return function e(n,r){if(null!==r){const i=r.type;if(2===i)return Xe(r,n);if(0===i)return t(-1,n[r.index]);if(3===i||4===i){const i=r.child;if(null!==i)return e(n,i);{const e=n[r.index];return xe(e)?t(-1,e):$e(e)}}{const t=n[16],i=t[6],o=hi(t),s=i.projection[r.projection];return null!=s?e(o,s):e(n,r.next)}}return null}(e,i)}return n[7]}(i,o),a=n[11],u=mo(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,bo(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(this),ie(o[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=lo(this._lContainer,e);n&&(oe(this._lContainer[8],e),ho(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=lo(this._lContainer,e);return n&&null!=oe(this._lContainer[8],e)?new So(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(xe(o))i=o;else{let t;if(3===n.type)t=$e(o);else if(t=r[11].createComment(""),Re(r)){const e=r[11],i=Xe(n,r);po(e,mo(e,i),t,function(t,e){return Ge(t)?t.nextSibling(e):e.nextSibling}(e,i))}else vo(r[1],r,t,n);r[n.index]=i=$i(o,r,t,n),Zi(r,i)}return new xo(i,n,r)}(t,e,hn(),un())},mu={};class vu extends Ba{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ce(t);return new wu(e,this.ngModule)}}function _u(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const bu=new Vt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Me});class wu extends Va{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ci).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return _u(this.componentDef.inputs)}get outputs(){return _u(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,mu,i);return o!==mu||r===mu?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Wa,Ke),s=i.get($a,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Ge(t))return t.selectRootElement(e,n===he.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Si(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Me,clean:ro,playerHandler:null,flags:0},f=ji(0,null,null,1,0,null,null,null,null,null),d=Ti(null,f,h,l,null,null,o,a,s,i);let p,g;Cn(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Oi(s,0,2,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Ss(a,u,!0),null!==t&&(Un(i,t,u),null!==a.classes&&Eo(i,t,a.classes),null!==a.styles&&Co(i,t,a.styles)));const c=r.createRenderer(t,e),l=Ti(n,Ri(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(tr(Yn(a,n),s,e.type),Bi(s,a),zi(a,n.length,1)),Zi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Un(a,c,["ng-version",Xa.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!oi(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Un(a,c,t),e&&e.length>0&&Eo(a,c,e.join(" "))}if(g=Ze(f,0),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=hn();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),qi(t,r,1),Wi(t,e,n));const i=ir(e,t,e.length-1,r);Zr(i,e);const o=Xe(r,e);return o&&Zr(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=hn();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){An(a.index-Te);const t=n[1];Li(t,e),Ui(t,n,e.hostVars),Vi(e,s)}return s}(t,this.componentDef,d,h,[Ts]),Ii(f,d,null)}finally{In()}return new Cu(this.componentType,p,Ao(Ha,g,d),d,g)}}class Cu extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new To(r),this.componentType=t}get injector(){return new ar(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const Eu=new Map;class Su extends ee{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new vu(this);const n=Se(t),r=t[Ft]||null;r&&Pa(r),this._bootstrapComponents=Fe(n.bootstrap),this._r3Injector=Go(t,e,[{provide:ee,useValue:this},{provide:Ba,useValue:this.componentFactoryResolver}],Ct(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=es.THROW_IF_NOT_FOUND,n=ct.Default){return t===es||t===ee||t===qt?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Tu extends ne{constructor(t){super(),this.moduleType=t,null!==Se(t)&&function(t){const e=new Set;!function t(n){const r=Se(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${Ct(e)} vs ${Ct(e.name)}`)}(i,Eu.get(i),n),Eu.set(i,n));const o=Fe(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Su(this.moduleType,t)}}function Ou(t,e,n,r){return function(t,e,n,r,i,o){const s=e+n;return Ds(t,s,i)?function(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===li?void 0:n}(t,s+1)}(un(),function(){const t=sn.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),t,e,n,r)}const Iu=class extends E{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,i=t=>null,o=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(i=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(o=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(r,i,o);return t instanceof h&&t.add(s),s}},xu=new Vt("Application Initializer");let Au=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Gs(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Xt(xu,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const ku=new Vt("AppId"),Pu={provide:ku,useFactory:function(){return`${Nu()}${Nu()}${Nu()}`},deps:[]};function Nu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ru=new Vt("Platform Initializer"),ju=new Vt("Platform ID"),Du=new Vt("appBootstrapListener");let Mu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Fu=new Vt("LocaleId"),Lu=new Vt("DefaultCurrencyCode");class Uu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Vu=function(t){return new Tu(t)},qu=Vu,Bu=function(t){return Promise.resolve(Vu(t))},Hu=function(t){const e=Vu(t),n=Fe(Se(t).declarations).reduce((t,e)=>{const n=Ce(e);return n&&t.push(new wu(n)),t},[]);return new Uu(e,n)},zu=Hu,Wu=function(t){return Promise.resolve(Hu(t))};let Qu=(()=>{class t{constructor(){this.compileModuleSync=qu,this.compileModuleAsync=Bu,this.compileModuleAndAllComponentsSync=zu,this.compileModuleAndAllComponentsAsync=Wu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Gu=(()=>Promise.resolve(0))();function Ku(t){"undefined"==typeof Zone?Gu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class $u{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Iu(!1),this.onMicrotaskEmpty=new Iu(!1),this.onStable=new Iu(!1),this.onError=new Iu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.wtfZoneSpec&&(n._inner=n._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=Nt.requestAnimationFrame,e=Nt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Nt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ju(t),Zu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ju(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return tc(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),ec(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return tc(t),e.invoke(r,i,o,s,a)}finally{ec(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Ju(t),Zu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$u.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if($u.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Xu,Yu,Yu);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Yu(){}const Xu={};function Zu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ju(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function tc(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ec(t){t._nesting--,Zu(t)}class nc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Iu,this.onMicrotaskEmpty=new Iu,this.onStable=new Iu,this.onError=new Iu}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let rc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$u.assertNotInAngularZone(),Ku(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ku(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Xt($u))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),ic=(()=>{class t{constructor(){this._applications=new Map,ac.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return ac.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class oc{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let sc,ac=new oc;const uc=new Vt("AllowMultipleToken");class cc{constructor(t,e){this.name=t,this.token=e}}function lc(t,e,n=[]){const r="Platform: "+e,i=new Vt(r);return(e=[])=>{let o=hc();if(!o||o.injector.get(uc,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:qo,useValue:"platform"});!function(t){if(sc&&!sc.destroyed&&!sc.injector.get(uc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");sc=t.get(fc);const e=t.get(Ru,null);e&&e.forEach(t=>t())}(es.create({providers:t,name:r}))}return function(t){const e=hc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function hc(){return sc&&!sc.destroyed?sc:null}let fc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new nc:("zone.js"===t?void 0:t)||new $u({enableLongStackTrace:Sr(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:$u,useValue:n}];return n.run(()=>{const e=es.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(dr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>gc(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return Gs(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Au);return t.runInitializers(),t.donePromise.then(()=>(Pa(i.injector.get(Fu,Aa)||Aa),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=dc({},e);return function(t,e,n){const r=new Tu(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(pc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${Ct(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Xt(es))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function dc(t,e){return Array.isArray(e)?e.reduce(dc,t):Object.assign(Object.assign({},t),e)}let pc=(()=>{class t{constructor(t,e,n,r,i,o){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Sr(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new v(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new v(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{$u.assertNotInAngularZone(),Ku(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{$u.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=W(s,a.pipe(J()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Va?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ee),i=n.create(es.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(rc,null);return o&&i.injector.get(ic).registerApplication(i.location.nativeElement,o),this._loadComponent(i),Sr()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;gc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Du,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),gc(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Xt($u),Xt(Mu),Xt(es),Xt(dr),Xt(Ba),Xt(Au))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function gc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class yc{}class mc{}const vc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let _c=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||vc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>bc(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>bc(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Xt(Qu),Xt(mc,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function bc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const wc=lc(null,"core",[{provide:ju,useValue:"unknown"},{provide:fc,deps:[es]},{provide:ic,deps:[]},{provide:Mu,deps:[]}]),Cc=[{provide:pc,useClass:pc,deps:[$u,Mu,es,dr,Ba,Au]},{provide:bu,deps:[$u],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Au,useClass:Au,deps:[[new st,xu]]},{provide:Qu,useClass:Qu,deps:[]},Pu,{provide:uu,useFactory:function(){return hu},deps:[]},{provide:cu,useFactory:function(){return fu},deps:[]},{provide:Fu,useFactory:function(t){return Pa(t=t||"undefined"!=typeof $localize&&$localize.locale||Aa),t},deps:[[new ot(Fu),new st,new ut]]},{provide:Lu,useValue:"USD"}];let Ec=(()=>{class t{constructor(t){}}return t.\u0275mod=_e({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)(Xt(pc))},providers:Cc}),t})();const Sc={apiKey:"AIzaSyCNkFNuzAq_9sBg9vAfPY3BqtTVkV1s7xU",authDomain:"simple-chat-fc506.firebaseapp.com",databaseURL:"https://simple-chat-fc506.firebaseio.com",projectId:"simple-chat-fc506",storageBucket:"simple-chat-fc506.appspot.com",messagingSenderId:"711428330120",appId:"1:711428330120:web:27e976813c11343b8a453d",measurementId:"G-SP1DP0DM51"};let Tc=null;function Oc(){return Tc}const Ic=new Vt("DocumentToken");let xc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:Ac,token:t,providedIn:"platform"}),t})();function Ac(){return Xt(Pc)}const kc=new Vt("Location Initialized");let Pc=(()=>{class t extends xc{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=Oc().getLocation(),this._history=Oc().getHistory()}getBaseHrefFromDOM(){return Oc().getBaseHref(this._doc)}onPopState(t){Oc().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){Oc().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Nc()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Nc()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Xt(Ic))},t.\u0275prov=ft({factory:Rc,token:t,providedIn:"platform"}),t})();function Nc(){return!!window.history.pushState}function Rc(){return new Pc(Xt(Ic))}function jc(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Dc(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Mc(t){return t&&"?"!==t[0]?"?"+t:t}let Fc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:Lc,token:t,providedIn:"root"}),t})();function Lc(t){const e=Xt(Ic).location;return new Vc(Xt(xc),e&&e.origin||"")}const Uc=new Vt("appBaseHref");let Vc=(()=>{class t extends Fc{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return jc(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Mc(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+Mc(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+Mc(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Xt(xc),Xt(Uc,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),qc=(()=>{class t extends Fc{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=jc(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+Mc(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+Mc(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Xt(xc),Xt(Uc,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),Bc=(()=>{class t{constructor(t,e){this._subject=new Iu,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Dc(zc(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Mc(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,zc(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mc(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mc(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(Xt(Fc),Xt(xc))},t.normalizeQueryParams=Mc,t.joinWithSlash=jc,t.stripTrailingSlash=Dc,t.\u0275prov=ft({factory:Hc,token:t,providedIn:"root"}),t})();function Hc(){return new Bc(Xt(Fc),Xt(xc))}function zc(t){return t.replace(/\/index.html$/,"")}var Wc=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class Qc{}let Gc=(()=>{class t extends Qc{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ia(e);if(n)return n;const r=e.split("-")[0];if(n=Ia(r),n)return n;if("en"===r)return Ta;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[xa.PluralCase]}(e||this.locale)(t)){case Wc.Zero:return"zero";case Wc.One:return"one";case Wc.Two:return"two";case Wc.Few:return"few";case Wc.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Xt(Fu))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),Kc=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Rs(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Ct(t.item));this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(Vs(uu),Vs(cu),Vs(Ha),Vs(Ga))},t.\u0275dir=we({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class $c{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Yc=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Sr()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new $c(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new Xc(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new Xc(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Vs(gu),Vs(du),Vs(uu))},t.\u0275dir=we({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Xc{constructor(t,e){this.record=t,this.view=e}}let Zc=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new Jc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){tl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){tl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Vs(gu),Vs(du))},t.\u0275dir=we({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Jc{constructor(){this.$implicit=null,this.ngIf=null}}function tl(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Ct(e)}'.`)}class el{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let nl=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=we({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),rl=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new el(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(Vs(gu),Vs(du),Vs(nl,1))},t.\u0275dir=we({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),il=(()=>{class t{constructor(t,e,n){n._addDefault(new el(t,e))}}return t.\u0275fac=function(e){return new(e||t)(Vs(gu),Vs(du),Vs(nl,1))},t.\u0275dir=we({type:t,selectors:[["","ngSwitchDefault",""]]}),t})(),ol=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(Vs(Ha),Vs(cu),Vs(Ga))},t.\u0275dir=we({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),sl=(()=>{class t{}return t.\u0275mod=_e({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},providers:[{provide:Qc,useClass:Gc}]}),t})();function al(t){return"server"===t}let ul=(()=>{class t{}return t.\u0275prov=ft({token:t,providedIn:"root",factory:()=>new cl(Xt(Ic),window,Xt(dr))}),t})();class cl{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=ll(this.window.history)||ll(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function ll(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class hl extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new hl,Tc||(Tc=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=dl||(dl=document.querySelector("base"),dl)?dl.getAttribute("href"):null;return null==e?null:(n=e,fl||(fl=document.createElement("a")),fl.setAttribute("href",n),"/"===fl.pathname.charAt(0)?fl.pathname:"/"+fl.pathname);var n}resetBaseElement(){dl=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let fl,dl=null;const pl=new Vt("TRANSITION_ID"),gl=[{provide:xu,useFactory:function(t,e,n){return()=>{n.get(Au).donePromise.then(()=>{const n=Oc();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[pl,Ic,es],multi:!0}];class yl{static init(){var t;t=new yl,ac=t}addToWindow(t){Nt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},Nt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Nt.getAllAngularRootElements=()=>t.getAllRootElements(),Nt.frameworkStabilizers||(Nt.frameworkStabilizers=[]),Nt.frameworkStabilizers.push(t=>{const e=Nt.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach((function(t){t.whenStable(i)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Oc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const ml=new Vt("EventManagerPlugins");let vl=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(Xt(ml),Xt($u))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class _l{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Oc().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let bl=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),wl=(()=>{class t extends bl{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Oc().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(Xt(Ic))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Cl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},El=/%COMP%/g;function Sl(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Sl(t,i,n):(i=i.replace(El,t),n.push(i))}return n}function Tl(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ol=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Il(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case he.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new xl(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case he.Native:case he.ShadowDom:return new Al(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Sl(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Xt(vl),Xt(wl),Xt(ku))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class Il{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Cl[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Cl[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Cl[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&Qa.DashCase?t.style.setProperty(e,n,r&Qa.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Qa.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Tl(n)):this.eventManager.addEventListener(t,e,Tl(n))}}class xl extends Il{constructor(t,e,n,r){super(t),this.component=n;const i=Sl(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(El,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(El,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Al extends Il{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===he.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=Sl(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let kl=(()=>{class t extends _l{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Xt(Ic))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Pl=["alt","control","meta","shift"],Nl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Rl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},jl={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Dl=(()=>{class t extends _l{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Oc().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(Pl.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Rl.hasOwnProperty(e)&&(e=Rl[e]))}return Nl[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Pl.forEach(r=>{r!=n&&(0,jl[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Xt(Ic))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),Ml=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:function(){return Xt(Fl)},token:t,providedIn:"root"}),t})(),Fl=(()=>{class t extends Ml{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case Kr.NONE:return e;case Kr.HTML:return wr(e,"HTML")?br(e):Qr(this._doc,String(e));case Kr.STYLE:return wr(e,"Style")?br(e):e;case Kr.SCRIPT:if(wr(e,"Script"))return br(e);throw new Error("unsafe value used in a script context");case Kr.URL:return Cr(e),wr(e,"URL")?br(e):Ar(String(e));case Kr.RESOURCE_URL:if(wr(e,"ResourceURL"))return br(e);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return new gr(t)}bypassSecurityTrustStyle(t){return new yr(t)}bypassSecurityTrustScript(t){return new mr(t)}bypassSecurityTrustUrl(t){return new vr(t)}bypassSecurityTrustResourceUrl(t){return new _r(t)}}return t.\u0275fac=function(e){return new(e||t)(Xt(Ic))},t.\u0275prov=ft({factory:function(){return t=Xt(qt),new Fl(t.get(Ic));var t},token:t,providedIn:"root"}),t})();const Ll=lc(wc,"browser",[{provide:ju,useValue:"browser"},{provide:Ru,useValue:function(){hl.makeCurrent(),yl.init()},multi:!0},{provide:Ic,useFactory:function(){return function(t){We=t}(document),document},deps:[]}]),Ul=[[],{provide:qo,useValue:"root"},{provide:dr,useFactory:function(){return new dr},deps:[]},{provide:ml,useClass:kl,multi:!0,deps:[Ic,$u,ju]},{provide:ml,useClass:Dl,multi:!0,deps:[Ic]},[],{provide:Ol,useClass:Ol,deps:[vl,wl,ku]},{provide:Wa,useExisting:Ol},{provide:bl,useExisting:wl},{provide:wl,useClass:wl,deps:[Ic]},{provide:rc,useClass:rc,deps:[$u]},{provide:vl,useClass:vl,deps:[ml,$u]},[]];let Vl=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:ku,useValue:e.appId},{provide:pl,useExisting:ku},gl]}}}return t.\u0275mod=_e({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)(Xt(t,12))},providers:Ul,imports:[sl,Ec]}),t})();"undefined"!=typeof window&&window;class ql{}const Bl="*";function Hl(t,e){return{type:7,name:t,definitions:e,options:{}}}function zl(t,e=null){return{type:4,styles:e,timings:t}}function Wl(t,e=null){return{type:2,steps:t,options:e}}function Ql(t){return{type:6,styles:t,offset:null}}function Gl(t,e,n){return{type:0,name:t,styles:e,options:n}}function Kl(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function $l(t){Promise.resolve(null).then(t)}class Yl{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){$l(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Xl{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?$l(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function Zl(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Jl(t){switch(t.length){case 0:return new Yl;case 1:return t[0];default:return new Xl(t)}}function th(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case Bl:a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function eh(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&nh(n,"start",t)));break;case"done":t.onDone(()=>r(n&&nh(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&nh(n,"destroy",t)))}}function nh(t,e,n){const r=n.totalTime,i=rh(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function rh(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function ih(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function oh(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let sh=(t,e)=>!1,ah=(t,e)=>!1,uh=(t,e,n)=>[];const ch=Zl();(ch||"undefined"!=typeof Element)&&(sh=(t,e)=>t.contains(e),ah=(()=>{if(ch||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):ah}})(),uh=(t,e,n)=>{let r=[];if(n)r.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&r.push(n)}return r});let lh=null,hh=!1;function fh(t){lh||(lh=("undefined"!=typeof document?document.body:null)||{},hh=!!lh.style&&"WebkitAppearance"in lh.style);let e=!0;return lh.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in lh.style,!e&&hh)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in lh.style),e}const dh=ah,ph=sh,gh=uh;function yh(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let mh=(()=>{class t{validateStyleProperty(t){return fh(t)}matchesElement(t,e){return dh(t,e)}containsElement(t,e){return ph(t,e)}query(t,e,n){return gh(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new Yl(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),vh=(()=>{class t{}return t.NOOP=new mh,t})();const _h="ng-enter",bh="ng-leave",wh="ng-trigger",Ch=".ng-trigger",Eh="ng-animating",Sh=".ng-animating";function Th(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Oh(parseFloat(e[1]),e[2])}function Oh(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Ih(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Oh(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=Oh(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function xh(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Ah(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else xh(t,n);return n}function kh(t,e,n){return n?e+":"+n+";":""}function Ph(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=kh(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=kh(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Nh(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Vh(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),Zl()&&Ph(t))}function Rh(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Vh(e);t.style[n]=""}),Zl()&&Ph(t))}function jh(t){return Array.isArray(t)?1==t.length?t[0]:Wl(t):t}const Dh=new RegExp("{{\\s*(.+?)\\s*}}","g");function Mh(t){let e=[];if("string"==typeof t){let n;for(;n=Dh.exec(t);)e.push(n[1]);Dh.lastIndex=0}return e}function Fh(t,e,n){const r=t.toString(),i=r.replace(Dh,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function Lh(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Uh=/-+([a-z0-9])/g;function Vh(t){return t.replace(Uh,(...t)=>t[1].toUpperCase())}function qh(t,e){return 0===t||0===e}function Bh(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach((function(e){n[e]=zh(t,e)}))}}return e}function Hh(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function zh(t,e){return window.getComputedStyle(t)[e]}const Wh="*";function Qh(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push($h(i,s)),"<"!=o[0]||i==Wh&&s==Wh||e.push($h(s,i))}(t,n,e)):n.push(t),n}const Gh=new Set(["true","1"]),Kh=new Set(["false","0"]);function $h(t,e){const n=Gh.has(t)||Kh.has(t),r=Gh.has(e)||Kh.has(e);return(i,o)=>{let s=t==Wh||t==i,a=e==Wh||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?Gh.has(t):Kh.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?Gh.has(e):Kh.has(e)),s&&a}}const Yh=new RegExp("s*:selfs*,?","g");function Xh(t,e,n){return new Zh(t).build(e,n)}class Zh{constructor(t){this._driver=t}build(t,e){const n=new Jh(e);return this._resetContextStyleTimingState(n),Hh(this,jh(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(tf(t)){const e=t;Object.keys(e).forEach(t=>{Mh(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Lh(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Hh(this,jh(t.animation),e);return{type:1,matchers:Qh(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:ef(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Hh(this,t,e)),options:ef(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=Hh(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:ef(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return nf(Ih(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=nf(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||Ih(r,e),nf(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Ql({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=Ql(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==Bl?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(tf(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=Mh(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(tf(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(tf(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,f=e.currentTime,d=e.currentAnimateTimings,p=d.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=f+d.delay+s,d.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Hh(this,jh(t.animation),e),options:ef(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:ef(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:ef(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(Yh,"")),[t=t.replace(/@\*/g,Ch).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,Sh),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,ih(e.collectedStyles,e.currentQuerySelector,{});const s=Hh(this,jh(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:ef(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Ih(t.timings,e.errors,!0);return{type:12,animation:Hh(this,jh(t.animation),e),timings:n,options:null}}}class Jh{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function tf(t){return!Array.isArray(t)&&"object"==typeof t}function ef(t){var e;return t?(t=xh(t)).params&&(t.params=(e=t.params)?xh(e):null):t={},t}function nf(t,e,n){return{duration:t,delay:e,easing:n}}function rf(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class of{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const sf=new RegExp(":enter","g"),af=new RegExp(":leave","g");function uf(t,e,n,r,i,o={},s={},a,u,c=[]){return(new cf).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class cf{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new of;const l=new hf(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),Hh(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[rf(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Th(n.duration):null,o=null!=n.delay?Th(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Hh(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=lf);const t=Th(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Hh(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Th(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),Hh(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Ih(e.params?Fh(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Th(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=lf);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),Hh(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;Hh(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const lf={};class hf{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=lf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new ff(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Th(n.duration)),null!=n.delay&&(r.delay=Th(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Fh(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new hf(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=lf,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new df(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(sf,"."+this._enterClassName)).replace(af,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class ff{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new ff(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Bl,this._currentKeyframe[t]=Bl}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=Bl})):Ah(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=Fh(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:Bl),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=Ah(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):r==Bl&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?Lh(t.values()):[],o=e.size?Lh(e.values()):[];if(n){const t=r[0],e=xh(t);t.offset=0,e.offset=1,r=[t,e]}return rf(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class df extends ff{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=Ah(t[0],!1);a.offset=0,i.push(a);const u=Ah(t[0],!1);u.offset=pf(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=Ah(t[r],!1);s.offset=pf((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return rf(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function pf(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class gf{}class yf extends gf{normalizePropertyName(t,e){return Vh(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(mf[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const mf=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function vf(t,e,n,r,i,o,s,a,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}const _f={};class bf{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||_f,f=this.buildStyles(n,s&&s.params||_f,l),d=a&&a.params||_f,p=this.buildStyles(r,d,l),g=new Set,y=new Map,m=new Map,v="void"===r,_={params:Object.assign(Object.assign({},h),d)},b=c?[]:uf(t,e,this.ast.animation,i,o,f,p,_,u,l);let w=0;if(b.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return vf(e,this._triggerName,n,r,v,f,p,[],[],y,m,w,l);b.forEach(t=>{const n=t.element,r=ih(y,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=ih(m,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const C=Lh(g.values());return vf(e,this._triggerName,n,r,v,f,p,b,C,y,m,w)}}class wf{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=xh(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=Fh(o,r,e)),n[t]=o})}}),n}}class Cf{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new wf(t.style,t.options&&t.options.params||{})}),Ef(this.states,"true","1"),Ef(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new bf(t,e,this.states))}),this.fallbackTransition=new bf(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Ef(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Sf=new of;class Tf{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=Xh(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=th(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=uf(this._driver,e,i,_h,bh,{},{},n,Sf,r),o.forEach(t=>{const e=ih(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error("Unable to create the animation due to the following errors: "+r.join("\n"));s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,Bl)})});const a=Jl(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}listen(t,e,n,r){const i=rh(e,"","","");return eh(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Of="ng-animate-queued",If="ng-animate-disabled",xf=".ng-animate-disabled",Af=[],kf={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Pf={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Nf{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=xh(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Rf="void",jf=new Nf(Rf);class Df{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Bf(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=ih(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=ih(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Bf(t,wh),Bf(t,"ng-trigger-"+e),a[e]=jf),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new Ff(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(Bf(t,wh),Bf(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new Nf(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=jf),u.value!==Rf&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Rh(t,n),Nh(t,r)})}return}const c=ih(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(Bf(t,Of),o.onStart(()=>{Hf(t,Of)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Ch,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,Rf,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&Jl(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,o=this._engine.statesByElement.get(t)[r]||jf,s=new Nf(Rf),a=new Ff(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:o,toState:s,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==kf||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Bf(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=rh(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,eh(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Mf{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new Df(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(Lf(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!Lf(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Bf(t,If)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Hf(t,If))}removeNode(t,e,n,r){if(Lf(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return Lf(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,Ch,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Sh,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Jl(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=kf,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,xf)&&this.markElementAsDisabled(t,!1),this.driver.query(t,xf,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Bf(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?Jl(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}_flushAnimations(t,e){const n=new of,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=qf(h,this.collectedEnterElements),d=new Map;let p=0;f.forEach((t,e)=>{const n=_h+p++;d.set(e,n),t.forEach(t=>Bf(t,n))});const g=[],y=new Set,m=new Set;for(let k=0;k<this.collectedLeaveElements.length;k++){const t=this.collectedLeaveElements[k],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),y.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>y.add(t)):m.add(t))}const v=new Map,_=qf(h,Array.from(y));_.forEach((t,e)=>{const n=bh+p++;v.set(e,n),t.forEach(t=>Bf(t,n))}),t.push(()=>{f.forEach((t,e)=>{const n=d.get(e);t.forEach(t=>Hf(t,n))}),_.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>Hf(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const b=[],w=[];for(let k=this._namespaceList.length-1;k>=0;k--)this._namespaceList[k].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(b.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),f=d.get(i),p=this._buildInstruction(t,n,f,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>Rh(i,p.fromStyles)),e.onDestroy(()=>Nh(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>Rh(i,p.fromStyles)),e.onDestroy(()=>Nh(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>ih(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),b.forEach(t=>t.destroy()),this.reportError(t)}const C=new Map,E=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(E.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,C))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{ih(C,e,[]).push(t),t.destroy()})});const S=g.filter(t=>Wf(t,a,u)),T=new Map;Vf(T,this.driver,m,u,Bl).forEach(t=>{Wf(t,a,u)&&S.push(t)});const O=new Map;f.forEach((t,e)=>{Vf(O,this.driver,new Set(t),a,"!")}),S.forEach(t=>{const e=T.get(t),n=O.get(t);T.set(t,Object.assign(Object.assign({},e),n))});const I=[],x=[],A={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>Nh(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=A;if(E.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=E.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>E.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,C,i,O,T);if(o.setRealPlayer(n),t===A)I.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=Jl(e)),r.push(o)}}else Rh(e,s.fromStyles),o.onDestroy(()=>Nh(e,s.toStyles)),x.push(o),c.has(e)&&r.push(o)}),x.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=Jl(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let k=0;k<g.length;k++){const t=g[k],e=t.__ng_removed;if(Hf(t,bh),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,Sh,!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?zf(this,t,r):this.processLeaveNode(t)}return g.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==Rf;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=ih(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}Rh(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const f=h.__ng_removed;if(f&&f.removedBeforeQueried)return new Yl(e.duration,e.delay);const d=h!==a,p=function(t){const e=[];return function t(e,n){for(let r=0;r<e.length;r++){const i=e[r];i instanceof Xl?t(i.players,n):n.push(i)}}(t,e),e}((n.get(h)||Af).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),y=o.get(h),m=th(0,this._normalizer,0,e.keyframes,g,y),v=this._buildPlayer(e,m,p);if(e.subTimeline&&r&&l.add(h),d){const e=new Ff(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{ih(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>Bf(t,Eh));const f=Jl(h);return f.onDestroy(()=>{c.forEach(t=>Hf(t,Eh)),Nh(a,e.toStyles)}),l.forEach(t=>{ih(r,t,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Yl(t.duration,t.delay)}}class Ff{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Yl,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>eh(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ih(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Lf(t){return t&&1===t.nodeType}function Uf(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Vf(t,e,n,r,i){const o=[];n.forEach(t=>o.push(Uf(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Pf,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>Uf(t,o[a++])),s}function qf(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let o=i.get(e);if(o)return o;const s=e.parentNode;return o=n.has(s)?s:r.has(s)?1:t(s),i.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}function Bf(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Hf(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function zf(t,e,n){Jl(n).onDone(()=>t.processLeaveNode(e))}function Wf(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class Qf{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Mf(t,e,n),this._timelineEngine=new Tf(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=Xh(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new Cf(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=oh(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=oh(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Gf(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=$f(e[0]),e.length>1&&(r=$f(e[e.length-1]))):e&&(n=$f(e)),n||r?new Kf(t,n,r):null}let Kf=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Nh(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Nh(this._element,this._initialStyles),this._endStyles&&(Nh(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Rh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Rh(this._element,this._endStyles),this._endStyles=null),Nh(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function $f(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];Yf(i)&&(e=e||{},e[i]=t[i])}return e}function Yf(t){return"display"===t||"position"===t}const Xf="animation",Zf="animationend";class Jf{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=od(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),id(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),rd(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){td(this._element,this._name,"paused")}resume(){td(this._element,this._name,"running")}setPosition(t){const e=ed(this._element,this._name);this._position=t*this._duration,id(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),rd(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=od(t,"").split(","),r=nd(n,e);r>=0&&(n.splice(r,1),id(t,"",n.join(",")))}(this._element,this._name))}}function td(t,e,n){id(t,"PlayState",n,ed(t,e))}function ed(t,e){const n=od(t,"");return n.indexOf(",")>0?nd(n.split(","),e):nd([n],e)}function nd(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function rd(t,e,n){n?t.removeEventListener(Zf,e):t.addEventListener(Zf,e)}function id(t,e,n,r){const i=Xf+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function od(t,e){return t.style[Xf+e]}class sd{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Jf(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:zh(this.element,n))})}this.currentSnapshot=t}}class ad extends Yl{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=yh(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class ud{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return fh(t)}matchesElement(t,e){return dh(t,e)}containsElement(t,e){return ph(t,e)}query(t,e,n){return gh(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>yh(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=i+"}\n"}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){s&&this._notifyFaultyScrubber();const a=o.filter(t=>t instanceof sd),u={};qh(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Bh(t,e,u));if(0==n)return new ad(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const f=Gf(t,e),d=new sd(t,e,l,n,r,i,c,f);return d.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),d}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class cd{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:zh(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class ld{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(hd().toString()),this._cssKeyframesDriver=new ud}validateStyleProperty(t){return fh(t)}matchesElement(t,e){return dh(t,e)}containsElement(t,e){return ph(t,e)}query(t,e,n){return gh(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof cd);qh(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=Gf(t,e=Bh(t,e=e.map(t=>Ah(t,!1)),u));return new cd(t,e,a,l)}}function hd(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let fd=(()=>{class t extends ql{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:he.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Wl(t):t;return gd(this._renderer,null,e,"register",[n]),new dd(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(Xt(Wa),Xt(Ic))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class dd extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new pd(this._id,t,e||{},this._renderer)}}class pd{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return gd(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function gd(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const yd="@",md="@.disabled";let vd=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new _d("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new bd(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(Xt(Wa),Xt(Qf),Xt($u))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class _d{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==yd&&e==md?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class bd extends _d{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==yd?"."==e.charAt(1)&&e==md?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==yd){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return i.charAt(0)!=yd&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let wd=(()=>{class t extends Qf{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(Xt(Ic),Xt(vh),Xt(gf))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Cd=[{provide:vh,useFactory:function(){return"function"==typeof hd()?new ld:new ud}},{provide:new Vt("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:ql,useClass:fd},{provide:gf,useFactory:function(){return new yf}},{provide:Qf,useClass:wd},{provide:Wa,useFactory:function(t,e,n){return new vd(t,e,n)},deps:[Ol,Qf,$u]}];let Ed=(()=>{class t{}return t.\u0275mod=_e({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},providers:Cd,imports:[Vl]}),t})();function Sd(t,e){return new v(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=M(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const Td=new Vt("NgValueAccessor"),Od={provide:Td,useExisting:Tt(()=>Id),multi:!0};let Id=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Vs(Ga),Vs(Ha))},t.\u0275dir=we({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&$s("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[Ua([Od])]}),t})();const xd={provide:Td,useExisting:Tt(()=>kd),multi:!0},Ad=new Vt("CompositionEventMode");let kd=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Oc()?Oc().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(Vs(Ga),Vs(Ha),Vs(Ad,8))},t.\u0275dir=we({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&$s("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[Ua([xd])]}),t})(),Pd=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=we({type:t}),t})(),Nd=(()=>{class t extends Pd{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Rd(e||t)},t.\u0275dir=we({type:t,features:[Os]}),t})();const Rd=cr(Nd);class jd extends Pd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){}get asyncValidator(){}}class Dd{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let Md=(()=>{class t extends Dd{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Vs(jd,2))},t.\u0275dir=we({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&ua("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[Os]}),t})(),Fd=(()=>{class t extends Dd{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Vs(Nd,2))},t.\u0275dir=we({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&ua("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[Os]}),t})();function Ld(t){return null==t||0===t.length}function Ud(t){return null!=t&&"number"==typeof t.length}const Vd=new Vt("NgValidators"),qd=new Vt("NgAsyncValidators"),Bd=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Hd{static min(t){return e=>{if(Ld(e.value)||Ld(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Ld(e.value)||Ld(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Ld(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Ld(t.value)||Bd.test(t.value)?null:{email:!0}}static minLength(t){return e=>Ld(e.value)||!Ud(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>Ud(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return Hd.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Ld(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(zd);return 0==e.length?null:function(t){return Qd(Gd(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(zd);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(u(e))return Sd(e,null);if(c(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Sd(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Sd(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(O(t=>e(...t)))}return Sd(t,null)}(Gd(t,e).map(Wd)).pipe(O(Qd))}}}function zd(t){return null!=t}function Wd(t){const e=Gs(t)?M(t):t;return Ks(e),e}function Qd(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Gd(t,e){return e.map(e=>e(t))}function Kd(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}const $d={provide:Td,useExisting:Tt(()=>Yd),multi:!0};let Yd=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Vs(Ga),Vs(Ha))},t.\u0275dir=we({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&$s("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[Ua([$d])]}),t})();const Xd={provide:Td,useExisting:Tt(()=>Jd),multi:!0};let Zd=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),Jd=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(jd),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(Vs(Ga),Vs(Ha),Vs(Zd),Vs(es))},t.\u0275dir=we({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&$s("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Ua([Xd])]}),t})();const tp={provide:Td,useExisting:Tt(()=>ep),multi:!0};let ep=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Vs(Ga),Vs(Ha))},t.\u0275dir=we({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&$s("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[Ua([tp])]}),t})();const np={provide:Td,useExisting:Tt(()=>rp),multi:!0};let rp=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(Vs(Ga),Vs(Ha))},t.\u0275dir=we({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&$s("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Ua([np])]}),t})();const ip={provide:Td,useExisting:Tt(()=>op),multi:!0};let op=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(Vs(Ga),Vs(Ha))},t.\u0275dir=we({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&$s("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Ua([ip])]}),t})();function sp(t,e){return[...e.path,t]}function ap(t,e){t.validator=Hd.compose([t.validator,e.validator]),t.asyncValidator=Hd.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&up(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&up(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function up(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function cp(t,e){t.validator=Hd.compose([t.validator,e.validator]),t.asyncValidator=Hd.composeAsync([t.asyncValidator,e.asyncValidator])}function lp(t){return null!=t?Hd.compose(Kd(t)):null}function hp(t){return null!=t?Hd.composeAsync(Kd(t)):null}function fp(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}const dp=[Id,ep,Yd,rp,op,Jd];function pp(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function gp(t,e){if(!e)return null;Array.isArray(e);let n=void 0,r=void 0,i=void 0;return e.forEach(t=>{var e;t.constructor===kd?n=t:(e=t,dp.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}function yp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const mp="VALID",vp="INVALID",_p="PENDING",bp="DISABLED";function wp(t){return(Tp(t)?t.validators:t)||null}function Cp(t){return Array.isArray(t)?lp(t):t||null}function Ep(t,e){return(Tp(e)?e.asyncValidators:t)||null}function Sp(t){return Array.isArray(t)?hp(t):t||null}function Tp(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Op{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Cp(this._rawValidators),this._composedAsyncValidatorFn=Sp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===mp}get invalid(){return this.status===vp}get pending(){return this.status==_p}get disabled(){return this.status===bp}get enabled(){return this.status!==bp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Cp(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Sp(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=_p,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=bp,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=mp,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==mp&&this.status!==_p||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bp:mp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=_p,this._hasOwnPendingAsyncValidator=!0;const e=Wd(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof xp?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Ap&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Iu,this.statusChanges=new Iu}_calculateStatus(){return this._allControlsDisabled()?bp:this.errors?vp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_p)?_p:this._anyControlsHaveStatus(vp)?vp:mp}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Tp(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Ip extends Op{constructor(t=null,e,n){super(wp(e),Ep(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class xp extends Op{constructor(t,e,n){super(wp(e),Ep(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Ip?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Ap extends Op{constructor(t,e,n){super(wp(e),Ep(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Ip?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const kp={provide:Nd,useExisting:Tt(()=>Np)},Pp=(()=>Promise.resolve(null))();let Np=(()=>{class t extends Nd{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Iu,this.form=new xp({},lp(t),hp(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Pp.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),ap(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Pp.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),yp(this._directives,t)})}addFormGroup(t){Pp.then(()=>{const e=this._findContainer(t.path),n=new xp({});cp(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Pp.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Pp.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,pp(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(Vs(Vd,10),Vs(qd,10))},t.\u0275dir=we({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&$s("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ua([kp]),Os]}),t})();const Rp={provide:jd,useExisting:Tt(()=>Dp)},jp=(()=>Promise.resolve(null))();let Dp=(()=>{class t extends jd{constructor(t,e,n,r){super(),this.control=new Ip,this._registered=!1,this.update=new Iu,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=gp(0,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),fp(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?sp(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return lp(this._rawValidators)}get asyncValidator(){return hp(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ap(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){jp.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;jp.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(Vs(Nd,9),Vs(Vd,10),Vs(qd,10),Vs(Td,10))},t.\u0275dir=we({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ua([Rp]),Os,Ve]}),t})(),Mp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=we({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const Fp=new Vt("NgModelWithFormControlWarning"),Lp={provide:Nd,useExisting:Tt(()=>Up)};let Up=(()=>{class t extends Nd{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new Iu}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return ap(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){yp(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);cp(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);cp(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,pp(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){const n=()=>{};e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&ap(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=lp(this._validators);this.form.validator=Hd.compose([this.form.validator,t]);const e=hp(this._asyncValidators);this.form.asyncValidator=Hd.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(Vs(Vd,10),Vs(qd,10))},t.\u0275dir=we({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&$s("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ua([Lp]),Os,Ve]}),t})();const Vp={provide:jd,useExisting:Tt(()=>qp)};let qp=(()=>{class t extends jd{constructor(t,e,n,r,i){super(),this._ngModelWarningConfig=i,this._added=!1,this.update=new Iu,this._ngModelWarningSent=!1,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=gp(0,r)}set isDisabled(t){}ngOnChanges(e){var n,r;this._added||this._setUpControl(),fp(e,this.viewModel)&&(n=t,this,r=this._ngModelWarningConfig,Sr()&&"never"!==r&&((null!==r&&"once"!==r||n._ngModelWarningSentOnce)&&("always"!==r||this._ngModelWarningSent)||(n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return sp(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return lp(this._rawValidators)}get asyncValidator(){return hp(this._rawAsyncValidators)}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(Vs(Nd,13),Vs(Vd,10),Vs(qd,10),Vs(Td,10),Vs(Fp,8))},t.\u0275dir=we({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Ua([Vp]),Os,Ve]}),t._ngModelWarningSentOnce=!1,t})();const Bp={provide:Vd,useExisting:Tt(()=>Hp),multi:!0};let Hp=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&""+t!="false",this._onChange&&this._onChange()}validate(t){return this.required?Hd.required(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=we({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&Ms("required",e.required?"":null)},inputs:{required:"required"},features:[Ua([Bp])]}),t})();const zp={provide:Vd,useExisting:Tt(()=>Wp),multi:!0};let Wp=(()=>{class t{constructor(){this._enabled=!1}set email(t){this._enabled=""===t||!0===t||"true"===t,this._onChange&&this._onChange()}validate(t){return this._enabled?Hd.email(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=we({type:t,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[Ua([zp])]}),t})(),Qp=(()=>{class t{}return t.\u0275mod=_e({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)}}),t})(),Gp=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new xp(n,{asyncValidators:i,updateOn:o,validators:r})}control(t,e,n){return new Ip(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Ap(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Ip||t instanceof xp||t instanceof Ap?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),Kp=(()=>{class t{}return t.\u0275mod=_e({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},providers:[Zd],imports:[Qp]}),t})(),$p=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Fp,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=_e({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},providers:[Gp,Zd],imports:[Qp]}),t})();function Yp(...t){let e=t[t.length-1];return T(e)?(t.pop(),D(t,e)):z(t)}class Xp extends E{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new b;return this._value}next(t){super.next(this._value=t)}}class Zp extends p{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Jp extends p{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function tg(t,e,n,r,i=new Jp(t,n,r)){if(!i.closed)return e instanceof v?e.subscribe(i):j(e)(i)}const eg={};class ng{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new rg(t,this.resultSelector))}}class rg extends Zp{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(eg),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(tg(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===eg?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const ig=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),og=new v(t=>t.complete());function sg(t){return t?function(t){return new v(e=>t.schedule(()=>e.complete()))}(t):og}function ag(t){return new v(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?M(n):sg()).subscribe(e)})}function ug(){return H(1)}function cg(t,e){return function(n){return n.lift(new lg(t,e))}}class lg{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new hg(t,this.predicate,this.thisArg))}}class hg extends p{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const fg=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function dg(t){return function(e){return 0===t?sg():e.lift(new pg(t))}}class pg{constructor(t){if(this.total=t,this.total<0)throw new fg}call(t,e){return e.subscribe(new gg(t,this.total))}}class gg extends p{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function yg(t=_g){return e=>e.lift(new mg(t))}class mg{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new vg(t,this.errorFactory))}}class vg extends p{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function _g(){return new ig}function bg(t=null){return e=>e.lift(new wg(t))}class wg{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Cg(t,this.defaultValue))}}class Cg extends p{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Eg(t,e){return"function"==typeof e?n=>n.pipe(Eg((n,r)=>M(t(n,r)).pipe(O((t,i)=>e(n,t,r,i))))):e=>e.lift(new Sg(t))}class Sg{constructor(t){this.project=t}call(t,e){return e.subscribe(new Tg(t,this.project))}}class Tg extends L{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new F(this),r=this.destination;r.add(n),this.innerSubscription=U(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function Og(t){return e=>0===t?sg():e.lift(new Ig(t))}class Ig{constructor(t){if(this.total=t,this.total<0)throw new fg}call(t,e){return e.subscribe(new xg(t,this.total))}}class xg extends p{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Ag(...t){return ug()(Yp(...t))}function kg(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Pg(t,e,n))}}class Pg{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Ng(t,this.accumulator,this.seed,this.hasSeed))}}class Ng extends p{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Rg(t){return function(e){const n=new jg(t),r=e.lift(n);return n.caught=r}}class jg{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Dg(t,this.selector,this.caught))}}class Dg extends L{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new F(this);this.add(r);const i=U(n,r);i!==r&&this.add(i)}}}function Mg(t,e){return V(t,e,1)}function Fg(t,e){const n=arguments.length>=2;return r=>r.pipe(t?cg((e,n)=>t(e,n,r)):m,Og(1),n?bg(e):yg(()=>new ig))}function Lg(){}function Ug(t,e,n){return function(r){return r.lift(new Vg(t,e,n))}}class Vg{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new qg(t,this.nextOrObserver,this.error,this.complete))}}class qg extends p{constructor(t,e,n,i){super(t),this._tapNext=Lg,this._tapError=Lg,this._tapComplete=Lg,this._tapError=n||Lg,this._tapComplete=i||Lg,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||Lg,this._tapError=e.error||Lg,this._tapComplete=e.complete||Lg)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}function Bg(t){return e=>e.lift(new Hg(t))}class Hg{constructor(t){this.callback=t}call(t,e){return e.subscribe(new zg(t,this.callback))}}class zg extends p{constructor(t,e){super(t),this.add(new h(e))}}class Wg{constructor(t,e){this.id=t,this.url=e}}class Qg extends Wg{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Gg extends Wg{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Kg extends Wg{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $g extends Wg{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Yg extends Wg{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xg extends Wg{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zg extends Wg{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Jg extends Wg{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ty extends Wg{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ey{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ny{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ry{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iy{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oy{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sy{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ay{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const uy="primary";class cy{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function ly(t){return new cy(t)}function hy(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function fy(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function dy(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!py(t[i],e[i]))return!1;return!0}function py(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function gy(t){return Array.prototype.concat.apply([],t)}function yy(t){return t.length>0?t[t.length-1]:null}function my(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function vy(t){return Ks(t)?t:Gs(t)?M(Promise.resolve(t)):Yp(t)}function _y(t,e,n){return n?function(t,e){return dy(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Ey(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>py(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Ey(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Ey(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!Ey(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,o)}}(e,n,n.segments)}(t.root,e.root)}class by{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ly(this.queryParams)),this._queryParamMap}toString(){return Iy.serialize(this)}}class wy{constructor(t,e){this.segments=t,this.children=e,this.parent=null,my(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xy(this)}}class Cy{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=ly(this.parameters)),this._parameterMap}toString(){return jy(this)}}function Ey(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function Sy(t,e){let n=[];return my(t.children,(t,r)=>{r===uy&&(n=n.concat(e(t,r)))}),my(t.children,(t,r)=>{r!==uy&&(n=n.concat(e(t,r)))}),n}class Ty{}class Oy{parse(t){const e=new Uy(t);return new by(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return xy(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return my(e.children,(e,n)=>{n!==uy&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=Sy(e,(n,r)=>r===uy?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${xy(e)}/${n[0]}`:`${xy(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${ky(e)}=${ky(t)}`).join("&"):`${ky(e)}=${ky(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const Iy=new Oy;function xy(t){return t.segments.map(t=>jy(t)).join("/")}function Ay(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ky(t){return Ay(t).replace(/%3B/gi,";")}function Py(t){return Ay(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ny(t){return decodeURIComponent(t)}function Ry(t){return Ny(t.replace(/\+/g,"%20"))}function jy(t){return`${Py(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Py(t)}=${Py(e[t])}`).join("")}`;var e}const Dy=/^[^\/()?;=#]+/;function My(t){const e=t.match(Dy);return e?e[0]:""}const Fy=/^[^=?&#]+/,Ly=/^[^?&#]+/;class Uy{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wy([],{}):new wy([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new wy(t,e)),n}parseSegment(){const t=My(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Cy(Ny(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=My(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=My(this.remaining);t&&(n=t,this.capture(n))}t[Ny(e)]=Ny(n)}parseQueryParam(t){const e=function(t){const e=t.match(Fy);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Ly);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Ry(e),i=Ry(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=My(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=uy);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new wy([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Vy{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=qy(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=qy(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=By(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return By(t,this._root).map(t=>t.value)}}function qy(t,e){if(t===e.value)return e;for(const n of e.children){const e=qy(t,n);if(e)return e}return null}function By(t,e){if(t===e.value)return[e];for(const n of e.children){const r=By(t,n);if(r.length)return r.unshift(e),r}return[]}class Hy{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function zy(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Wy extends Vy{constructor(t,e){super(t),this.snapshot=e,Xy(this,t)}toString(){return this.snapshot.toString()}}function Qy(t,e){const n=function(t,e){const n=new $y([],{},{},"",{},uy,e,null,t.root,-1,{});return new Yy("",new Hy(n,[]))}(t,e),r=new Xp([new Cy("",{})]),i=new Xp({}),o=new Xp({}),s=new Xp({}),a=new Xp(""),u=new Gy(r,i,s,a,o,uy,e,n.root);return u.snapshot=n.root,new Wy(new Hy(u,[]),n)}class Gy{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(O(t=>ly(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(O(t=>ly(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ky(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class $y{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ly(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ly(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Yy extends Vy{constructor(t,e){super(e),this.url=t,Xy(this,e)}toString(){return Zy(this._root)}}function Xy(t,e){e.value._routerState=t,e.children.forEach(e=>Xy(t,e))}function Zy(t){const e=t.children.length>0?` { ${t.children.map(Zy).join(", ")} } `:"";return`${t.value}${e}`}function Jy(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,dy(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),dy(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!dy(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),dy(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function tm(t,e){var n,r;return dy(t.params,e.params)&&Ey(n=t.url,r=e.url)&&n.every((t,e)=>dy(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||tm(t.parent,e.parent))}function em(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function nm(t){return"object"==typeof t&&null!=t&&t.outlets}function rm(t,e,n,r,i){let o={};return r&&my(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new by(n.root===t?e:function t(e,n,r){const i={};return my(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new wy(e.segments,i)}(n.root,t,e),o,i)}class im{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&em(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(nm);if(r&&r!==yy(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class om{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function sm(t,e,n){if(t||(t=new wy([],{})),0===t.segments.length&&t.hasChildren())return am(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(nm(s))break;const a=""+s,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!hm(a,u,e))return o;r+=2}else{if(!hm(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new wy(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new wy(t.segments.slice(r.pathIndex),t.children),am(e,0,i)}return r.match&&0===i.length?new wy(t.segments,{}):r.match&&!t.hasChildren()?um(t,e,n):r.match?am(t,0,i):um(t,e,n)}function am(t,e,n){if(0===n.length)return new wy(t.segments,{});{const r=function(t){return nm(t[0])?t[0].outlets:{[uy]:t}}(n),i={};return my(r,(n,r)=>{null!==n&&(i[r]=sm(t.children[r],e,n))}),my(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new wy(t.segments,i)}}function um(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(nm(o)){const t=cm(o.outlets);return new wy(r,t)}if(0===i&&em(n[0])){r.push(new Cy(t.segments[e].path,n[0])),i++;continue}const s=nm(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&em(a)?(r.push(new Cy(s,lm(a))),i+=2):(r.push(new Cy(s,{})),i++)}return new wy(r,{})}function cm(t){const e={};return my(t,(t,n)=>{null!==t&&(e[n]=um(new wy([],{}),0,t))}),e}function lm(t){const e={};return my(t,(t,n)=>e[n]=""+t),e}function hm(t,e,n){return t==n.path&&dy(e,n.parameters)}class fm{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Jy(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=zy(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),my(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=zy(t),i=t.value.component?n.children:e;my(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=zy(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new sy(t.value.snapshot))}),t.children.length&&this.forwardEvent(new iy(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Jy(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),dm(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function dm(t){Jy(t.value),t.children.forEach(dm)}class pm{constructor(t,e){this.routes=t,this.module=e}}function gm(t){return"function"==typeof t}function ym(t){return t instanceof by}const mm=Symbol("INITIAL_VALUE");function vm(){return Eg(t=>function(...t){let e=void 0,n=void 0;return T(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),z(t,n).lift(new ng(e))}(...t.map(t=>t.pipe(Og(1),function(...t){const e=t[t.length-1];return T(e)?(t.pop(),n=>Ag(t,n,e)):e=>Ag(t,e)}(mm)))).pipe(kg((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==mm)return t;if(r===mm&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||ym(r))return r}return t},t)},mm),cg(t=>t!==mm),O(t=>ym(t)?t:!0===t),Og(1)))}class _m{constructor(t){this.segmentGroup=t||null}}class bm{constructor(t){this.urlTree=t}}function wm(t){return new v(e=>e.error(new _m(t)))}function Cm(t){return new v(e=>e.error(new bm(t)))}function Em(t){return new v(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Sm{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(ee)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,uy).pipe(O(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Rg(t=>{if(t instanceof bm)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof _m)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,uy).pipe(O(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Rg(t=>{if(t instanceof _m)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new wy([],{[uy]:t}):t;return new by(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(O(t=>new wy([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Yp({});const n=[],r=[],i={};return my(t,(t,o)=>{const s=e(o,t).pipe(O(t=>i[o]=t));o===uy?n.push(s):r.push(s)}),Yp.apply(null,n.concat(r)).pipe(ug(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?cg((e,n)=>t(e,n,r)):m,dg(1),n?bg(e):yg(()=>new ig))}(),O(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){return Yp(...n).pipe(Mg(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Rg(t=>{if(t instanceof _m)return Yp(null);throw t}))),Fg(t=>!!t),Rg((t,n)=>{if(t instanceof ig||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Yp(new wy([],{}));throw new _m(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return xm(r)!==o?wm(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):wm(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Cm(i):this.lineralizeSegments(n,i).pipe(V(n=>{const i=new wy(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Tm(e,r,i);if(!s)return wm(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Cm(l):this.lineralizeSegments(r,l).pipe(V(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(O(t=>(n._loadedConfig=t,new wy(r,{})))):Yp(new wy(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=Tm(e,n,r);if(!i)return wm(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(V(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>Im(t,e,n)&&xm(n)!==uy)}(t,n,r)?{segmentGroup:Om(new wy(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&xm(r)!==uy&&(n[xm(r)]=new wy([],{}));return n}(r,new wy(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Im(t,e,n))}(t,n,r)?{segmentGroup:Om(new wy(t.segments,function(t,e,n,r){const i={};for(const o of n)Im(t,e,o)&&!r[xm(o)]&&(i[xm(o)]=new wy([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(O(t=>new wy(o,t))):0===r.length&&0===s.length?Yp(new wy(o,{})):this.expandSegment(n,i,r,s,uy,!0).pipe(O(t=>new wy(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Yp(new pm(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Yp(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(V(n=>n?this.configLoader.load(t.injector,e).pipe(O(t=>(e._loadedConfig=t,t))):function(t){return new v(e=>e.error(hy(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Yp(new pm([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?Yp(r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&gm(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!gm(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return vy(o)})).pipe(vm(),Ug(t=>{if(!ym(t))return;const e=hy(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),O(t=>!0===t)):Yp(!0)}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Yp(n);if(r.numberOfChildren>1||!r.children.primary)return Em(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new by(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return my(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return my(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new wy(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Tm(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||fy)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Om(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new wy(t.segments.concat(e.segments),e.children)}return t}function Im(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function xm(t){return t.outlet||uy}class Am{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class km{constructor(t,e){this.component=t,this.route=e}}function Pm(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=zy(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Ey(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ey(t.url,e.url)||!dy(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tm(t,e)||!dy(t.queryParams,e.queryParams);case"paramsChange":default:return!tm(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Am(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:r,i,o),c&&u&&u.outlet&&u.outlet.isActivated&&o.canDeactivateChecks.push(new km(u.outlet.component,a))}else a&&Rm(n,u,o),o.canActivateChecks.push(new Am(i)),t(e,null,s.component?u?u.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),my(s,(t,e)=>Rm(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function Nm(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Rm(t,e,n){const r=zy(t),i=t.value;my(r,(t,r)=>{Rm(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new km(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function jm(t,e){return null!==t&&e&&e(new oy(t)),Yp(!0)}function Dm(t,e){return null!==t&&e&&e(new ry(t)),Yp(!0)}function Mm(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Yp(r.map(r=>ag(()=>{const i=Nm(r,e,n);let o;if(function(t){return t&&gm(t.canActivate)}(i))o=vy(i.canActivate(e,t));else{if(!gm(i))throw new Error("Invalid CanActivate guard");o=vy(i(e,t))}return o.pipe(Fg())}))).pipe(vm()):Yp(!0)}function Fm(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>ag(()=>Yp(e.guards.map(i=>{const o=Nm(i,e.node,n);let s;if(function(t){return t&&gm(t.canActivateChild)}(o))s=vy(o.canActivateChild(r,t));else{if(!gm(o))throw new Error("Invalid CanActivateChild guard");s=vy(o(r,t))}return s.pipe(Fg())})).pipe(vm())));return Yp(i).pipe(vm())}class Lm{}class Um{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=Bm(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,uy),n=new $y([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},uy,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Hy(n,e),i=new Yy(this.url,r);return this.inheritParamsAndData(i._root),Yp(i)}catch(t){return new v(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=Ky(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=Sy(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===uy?-1:e.value.outlet===uy?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const o of t)try{return this.processSegmentAgainstRoute(o,e,n,r)}catch(i){if(!(i instanceof Lm))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new Lm}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Lm;if((t.outlet||uy)!==r)throw new Lm;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?yy(n).parameters:{};i=new $y(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Wm(t),r,t.component,t,Vm(e),qm(e)+n.length,Qm(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Lm;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||fy)(n,t,e);if(!r)throw new Lm;const i={};my(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new $y(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Wm(t),r,t.component,t,Vm(e),qm(e)+o.length,Qm(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Bm(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new Hy(i,t)]}if(0===a.length&&0===c.length)return[new Hy(i,[])];const l=this.processSegment(a,u,c,uy);return[new Hy(i,l)]}}function Vm(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function qm(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Bm(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>Hm(t,e,n)&&zm(n)!==uy)}(t,n,r)){const i=new wy(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&zm(o)!==uy){const n=new wy([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[zm(o)]=n}return i}(t,e,r,new wy(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Hm(t,e,n))}(t,n,r)){const o=new wy(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Hm(t,n,a)&&!i[zm(a)]){const n=new wy([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[zm(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new wy(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Hm(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function zm(t){return t.outlet||uy}function Wm(t){return t.data||{}}function Qm(t){return t.resolve||{}}function Gm(t){return function(e){return e.pipe(Eg(e=>{const n=t(e);return n?M(n).pipe(O(()=>e)):M([e])}))}}class Km extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}let $m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=ge({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Ws(0,"router-outlet")},directives:function(){return[cv]},encapsulation:2}),t})();function Ym(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Xm(r,Zm(e,r))}}function Xm(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==uy)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&Ym(t.children,e)}function Zm(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Jm(t){const e=t.children&&t.children.map(Jm),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==uy&&(n.component=$m),n}const tv=new Vt("ROUTES");class ev{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(O(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new pm(gy(r.injector.get(tv)).map(Jm),r)}))}loadModuleFactory(t){return"string"==typeof t?M(this.loader.load(t)):vy(t()).pipe(V(t=>t instanceof ne?Yp(t):M(this.compiler.compileModuleAsync(t))))}}class nv{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new rv,this.attachRef=null}}class rv{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new nv,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class iv{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function ov(t){throw t}function sv(t,e,n){return e.parse("/")}function av(t,e){return Yp(null)}let uv=(()=>{class t{constructor(t,e,n,r,i,o,s,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new E,this.errorHandler=ov,this.malformedUriErrorHandler=sv,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:av,afterPreactivation:av},this.urlHandlingStrategy=new iv,this.routeReuseStrategy=new Km,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(ee),this.console=i.get(Mu);const u=i.get($u);this.isNgZoneEnabled=u instanceof $u,this.resetConfig(a),this.currentUrlTree=new by(new wy([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ev(o,s,t=>this.triggerEvent(new ey(t)),t=>this.triggerEvent(new ny(t))),this.routerState=Qy(this.currentUrlTree,this.rootComponentType),this.transitions=new Xp({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(cg(t=>0!==t.id),O(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Eg(t=>{let n=!1,r=!1;return Yp(t).pipe(Ug(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Eg(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Yp(t).pipe(Eg(t=>{const n=this.transitions.getValue();return e.next(new Qg(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?og:[t]}),Eg(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(Eg(t=>function(t,e,n,r,i){return new Sm(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(O(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Ug(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(V(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new Um(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(O(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ug(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Ug(t=>{const n=new Yg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Qg(n,this.serializeUrl(r),i,o);e.next(a);const u=Qy(r,this.rootComponentType).snapshot;return Yp(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),og}),Gm(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Ug(t=>{const e=new Xg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),O(t=>Object.assign(Object.assign({},t),{guards:Pm(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(V(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Yp(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return M(t).pipe(V(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Yp(o.map(o=>{const s=Nm(o,e,i);let a;if(function(t){return t&&gm(t.canDeactivate)}(s))a=vy(s.canDeactivate(t,e,n,r));else{if(!gm(s))throw new Error("Invalid CanDeactivate guard");a=vy(s(t,e,n,r))}return a.pipe(Fg())})).pipe(vm()):Yp(!0)}(t.component,t.route,n,e,r)),Fg(t=>!0!==t,!0))}(s,r,i,t).pipe(V(n=>n&&"boolean"==typeof n?function(t,e,n,r){return M(e).pipe(Mg(e=>M([Dm(e.route.parent,r),jm(e.route,r),Fm(t,e.path,n),Mm(t,e.route,n)]).pipe(ug(),Fg(t=>!0!==t,!0))),Fg(t=>!0!==t,!0))}(r,o,t,e):Yp(n)),O(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Ug(t=>{if(ym(t.guardsResult)){const e=hy(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Ug(t=>{const e=new Zg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),cg(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Kg(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Gm(t=>{if(t.guards.canActivateChecks.length)return Yp(t).pipe(Ug(t=>{const e=new Jg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Eg(t=>{let n=!1;return Yp(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(V(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Yp(t);let o=0;return M(n).pipe(Mg(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Yp({});const o={};return M(i).pipe(V(i=>function(t,e,n,r){const i=Nm(t,e,r);return vy(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Ug(t=>{o[i]=t}))),dg(1),V(()=>Object.keys(o).length===i.length?Yp(o):og))}(t._resolve,t,e,r).pipe(O(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Ky(t,n).resolve),null)))}(t.route,e,r,i)),Ug(()=>o++),dg(1),V(e=>o===n.length?Yp(t):og))}))}),Ug({next:()=>n=!0,complete:()=>{if(!n){const n=new Kg(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Ug(t=>{const e=new ty(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Gm(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),O(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new Hy(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new Gy(new Xp((i=n.value).url),new Xp(i.params),new Xp(i.queryParams),new Xp(i.fragment),new Xp(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new Hy(r,o)}}var i}(t,e._root,n?n._root:void 0);return new Wy(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Ug(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),O(t=>(new fm(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),Ug({next(){n=!0},complete(){n=!0}}),Bg(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Kg(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),Rg(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=ym(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Kg(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new $g(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return og}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ym(t),this.config=t.map(Jm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,preserveQueryParams:o,queryParamsHandling:s,preserveFragment:a}=e;Sr()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const u=n||this.routerState.root,c=a?this.currentUrlTree.fragment:i;let l=null;if(s)switch(s){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}else l=o?this.currentUrlTree.queryParams:r||null;return null!==l&&(l=this.removeEmptyProps(l)),function(t,e,n,r,i){if(0===n.length)return rm(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new im(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return my(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new im(n,e,r)}(n);if(o.toRoot())return rm(e.root,new wy([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new om(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new om(t,t===e.root,0)}const r=em(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new om(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?am(s.segmentGroup,s.index,o.commands):sm(s.segmentGroup,s.index,o.commands);return rm(s.segmentGroup,a,e,r,i)}(u,this.currentUrlTree,t,l,c)}navigateByUrl(t,e={skipLocationChange:!1}){Sr()&&this.isNgZoneEnabled&&!$u.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=ym(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(ym(t))return _y(this.currentUrlTree,t,e);const n=this.parseUrl(t);return _y(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Gg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(Xt(No),Xt(Ty),Xt(rv),Xt(Bc),Xt(es),Xt(yc),Xt(Qu),Xt(void 0))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),cv=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Iu,this.deactivateEvents=new Iu,this.name=r||uy,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new lv(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(Vs(rv),Vs(gu),Vs(Ba),("name",function(t,e){const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Vn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(hn(),"name")),Vs(ko))},t.\u0275dir=we({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class lv{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Gy?this.route:t===rv?this.childContexts:this.parent.get(t,e)}}class hv{}class fv{preload(t,e){return Yp(null)}}let dv=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new ev(e,n,e=>t.triggerEvent(new ey(e)),e=>t.triggerEvent(new ny(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(cg(t=>t instanceof Gg),Mg(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(ee);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return M(n).pipe(H(),O(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(V(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Xt(uv),Xt(yc),Xt(Qu),Xt(es),Xt(hv))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),pv=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Qg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Gg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ay&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new ay(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Xt(uv),Xt(ul),Xt(void 0))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const gv=new Vt("ROUTER_CONFIGURATION"),yv=new Vt("ROUTER_FORROOT_GUARD"),mv=[Bc,{provide:Ty,useClass:Oy},{provide:uv,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new uv(null,t,e,n,r,i,o,gy(s));if(u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),a.errorHandler&&(l.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(l.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const t=Oc();l.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return a.onSameUrlNavigation&&(l.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(l.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(l.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(l.relativeLinkResolution=a.relativeLinkResolution),l},deps:[Ty,rv,Bc,es,yc,Qu,tv,gv,[class{},new st],[class{},new st]]},rv,{provide:Gy,useFactory:function(t){return t.routerState.root},deps:[uv]},{provide:yc,useClass:_c},dv,fv,class{preload(t,e){return e().pipe(Rg(()=>Yp(null)))}},{provide:gv,useValue:{enableTracing:!1}}];function vv(){return new cc("Router",uv)}let _v=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[mv,Ev(e),{provide:yv,useFactory:Cv,deps:[[uv,new st,new ut]]},{provide:gv,useValue:n||{}},{provide:Fc,useFactory:wv,deps:[xc,[new ot(Uc),new st],gv]},{provide:pv,useFactory:bv,deps:[uv,ul,gv]},{provide:hv,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:fv},{provide:cc,multi:!0,useFactory:vv},[Sv,{provide:xu,multi:!0,useFactory:Tv,deps:[Sv]},{provide:Iv,useFactory:Ov,deps:[Sv]},{provide:Du,multi:!0,useExisting:Iv}]]}}static forChild(e){return{ngModule:t,providers:[Ev(e)]}}}return t.\u0275mod=_e({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)(Xt(yv,8),Xt(uv,8))}}),t})();function bv(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new pv(t,e,n)}function wv(t,e,n={}){return n.useHash?new qc(t,e):new Vc(t,e)}function Cv(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Ev(t){return[{provide:Es,multi:!0,useValue:t},{provide:tv,multi:!0,useValue:t}]}let Sv=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new E}appInitializer(){return this.injector.get(kc,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(uv),r=this.injector.get(gv);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Yp(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(gv),n=this.injector.get(dv),r=this.injector.get(pv),i=this.injector.get(uv),o=this.injector.get(pc);t===o.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(Xt(es))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function Tv(t){return t.appInitializer.bind(t)}function Ov(t){return t.bootstrapListener.bind(t)}const Iv=new Vt("Router Initializer");function xv(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}let Av=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Yp(this.value);case"E":return t=this.error,new v(e=>e.error(t));case"C":return sg()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function kv(t,e=0){return function(n){return n.lift(new Pv(t,e))}}class Pv{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new Nv(t,this.scheduler,this.delay))}}class Nv extends p{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(Nv.dispatch,this.delay,new Rv(t,this.destination)))}_next(t){this.scheduleMessage(Av.createNext(t))}_error(t){this.scheduleMessage(Av.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(Av.createComplete()),this.unsubscribe()}}class Rv{constructor(t,e){this.notification=t,this.destination=e}}class jv extends h{constructor(t,e){super()}schedule(t,e=0){return this}}class Dv extends jv{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}class Mv extends Dv{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}let Fv=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class Lv extends Fv{constructor(t,e=Fv.now){super(t,()=>Lv.delegate&&Lv.delegate!==this?Lv.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return Lv.delegate&&Lv.delegate!==this?Lv.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}class Uv extends Lv{}const Vv=new Uv(Mv),qv=Vv;class Bv extends E{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Hv(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new b;if(this.isStopped||this.hasError?o=h.EMPTY:(this.observers.push(t),o=new w(this,t)),r&&t.add(t=new Nv(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||qv).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Hv{constructor(t,e){this.time=t,this.value=e}}const zv=new Lv(Dv);let Wv=1;const Qv=(()=>Promise.resolve())(),Gv={};function Kv(t){return t in Gv&&(delete Gv[t],!0)}const $v={setImmediate(t){const e=Wv++;return Gv[e]=!0,Qv.then(()=>Kv(e)&&t()),e},clearImmediate(t){Kv(t)}};class Yv extends Dv{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=$v.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&($v.clearImmediate(e),t.scheduled=void 0)}}class Xv extends Lv{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const Zv=new Xv(Yv);class Jv extends v{constructor(t,e=0,n=Zv){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,(u(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=Zv)}static create(t,e=0,n=Zv){return new Jv(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(Jv.dispatch,this.delayTime,{source:this.source,subscriber:t})}}class t_{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new Jv(e,this.delay,this.scheduler).subscribe(t)}}var e_=n("zIRd");function n_(){}e_.a.registerVersion("firebase","8.0.2","app");class r_{constructor(t,e=Vv){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class i_{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",n_,{},n_,n_)),e.pipe(Ug({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class o_{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new r_(Zone.current)),this.insideAngular=t.run(()=>new r_(Zone.current,zv))}}function s_(t){return function(e){return(e=e.lift(new i_(t.ngZone))).pipe(function(t,e=0){return function(n){return n.lift(new t_(t,e))}}(t.outsideAngular),kv(t.insideAngular))}}const a_=["ngOnDestroy"],u_=new Vt("angularfire2.app.options"),c_=new Vt("angularfire2.app.nameOrConfig"),l_=new Ya("6.0.5");function h_(t,e,n){const r="object"==typeof n&&n||{};return r.name=r.name||"string"==typeof n&&n||"[DEFAULT]",e_.a.apps.filter(t=>t&&t.name===r.name)[0]||e.runOutsideAngular(()=>e_.a.initializeApp(t,r))}const f_={provide:class{},useFactory:h_,deps:[u_,$u,[new st,c_]]};let d_=(()=>{class t{constructor(t){e_.a.registerVersion("angularfire",l_.full,t.toString()),e_.a.registerVersion("angular",Xa.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:u_,useValue:e},{provide:c_,useValue:n}]}}}return t.\u0275mod=_e({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)(Xt(ju))},providers:[f_]}),t})(),p_=(()=>{class t{constructor(t,e,r,i){const o=new o_(i),s=s_(o),a=Yp(void 0).pipe(kv(o.outsideAngular),Eg(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),O(()=>h_(t,i,e)),O(t=>i.runOutsideAngular(()=>t.auth())),function(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:void 0,refCount:!1,scheduler:void 0},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Bv(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}})):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}({bufferSize:1,refCount:!1}));return al(r)?this.authState=this.user=this.idToken=this.idTokenResult=Yp(null):(a.pipe(Fg()).subscribe(),this.authState=a.pipe(Eg(t=>t.getRedirectResult().then(()=>t,()=>t)),Eg(t=>i.runOutsideAngular(()=>new v(t.onAuthStateChanged.bind(t)))),s),this.user=a.pipe(Eg(t=>t.getRedirectResult().then(()=>t,()=>t)),Eg(t=>i.runOutsideAngular(()=>new v(t.onIdTokenChanged.bind(t)))),s),this.idToken=this.user.pipe(Eg(t=>t?M(t.getIdToken()):Yp(null))),this.idTokenResult=this.user.pipe(Eg(t=>t?M(t.getIdTokenResult()):Yp(null)))),((t,e,n)=>new Proxy(t,{get:(r,i)=>n.runOutsideAngular(()=>{if(t[i])return t[i];if(a_.indexOf(i)>-1)return()=>{};const r=e.toPromise().then(t=>{const e=t&&t[i];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>r[e],apply:(t,e,n)=>r.then(t=>t&&t(...n))})})}))(this,a,i)}}return t.\u0275fac=function(e){return new(e||t)(Xt(u_),Xt(c_,8),Xt(ju),Xt($u))},t.\u0275prov=ft({factory:function(){return new t(Xt(u_),Xt(c_,8),Xt(ju),Xt($u))},token:t,providedIn:"any"}),t})();function g_(t,e){return function(t,e=zv){return new v(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot(n)}):r=t.onSnapshot(n),()=>{null!=r&&r()}})}(t,e)}function y_(t,e){return g_(t,e).pipe(O(t=>({payload:t,type:"query"})))}function m_(t,e){return y_(t,e).pipe(O(t=>t.payload.docChanges().map(t=>({type:t.type,payload:t}))))}function v_(t,e,n){return y_(t,n).pipe(O(t=>t.payload.docChanges()),kg((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e),[]),O(t=>t.map(t=>({type:t.type,payload:t}))))}function __(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}n("xsWp");class b_{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){return t&&0!==t.length?m_(this.query,this.afs.schedulers.outsideAngular).pipe(O(e=>e.filter(e=>t.indexOf(e.type)>-1)),cg(t=>t.length>0),this.afs.keepUnstableUntilFirst):m_(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(kg((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=__(t);return v_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return y_(this.query,this.afs.schedulers.outsideAngular).pipe(O(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return M(this.query.get(t)).pipe(kv(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new w_(this.ref.doc(t),this.afs)}}class w_{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=I_(n,e);return new b_(r,i,this.afs)}snapshotChanges(){return g_(this.ref,this.afs.schedulers.outsideAngular).pipe(O(t=>({payload:t,type:"value"}))).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return this.snapshotChanges().pipe(O(t=>t.payload.data()))}get(t){return M(this.ref.get(t)).pipe(kv(this.afs.schedulers.insideAngular))}}class C_{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?m_(this.query,this.afs.schedulers.outsideAngular).pipe(O(e=>e.filter(e=>t.indexOf(e.type)>-1)),cg(t=>t.length>0),this.afs.keepUnstableUntilFirst):m_(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(kg((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=__(t);return v_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return y_(this.query,this.afs.schedulers.outsideAngular).pipe(O(t=>t.payload.docs.map(t=>t.data())),this.afs.keepUnstableUntilFirst)}get(t){return M(this.query.get(t)).pipe(kv(this.afs.schedulers.insideAngular))}}const E_=n("xsWp"),S_=new Vt("angularfire2.enableFirestorePersistence"),T_=new Vt("angularfire2.firestore.persistenceSettings"),O_=new Vt("angularfire2.firestore.settings");function I_(t,e=(t=>t)){return{query:e(t),ref:t}}let x_=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new o_(o),this.keepUnstableUntilFirst=s_(this.schedulers),this.firestore=o.runOutsideAngular(()=>{const n=h_(t,o,e);"registerFirestore"in E_&&E_.registerFirestore(e_.a);const i=n.firestore();return r&&i.settings(r),i}),this.persistenceEnabled$=n&&!al(i)?o.runOutsideAngular(()=>{try{return M(this.firestore.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(t){return Yp(!1)}}):Yp(!1)}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=I_(n,e),o=this.schedulers.ngZone.run(()=>r);return new b_(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new C_(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new w_(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(Xt(u_),Xt(c_,8),Xt(S_,8),Xt(O_,8),Xt(ju),Xt($u),Xt(T_,8))},t.\u0275prov=ft({factory:function(){return new t(Xt(u_),Xt(c_,8),Xt(S_,8),Xt(O_,8),Xt(ju),Xt($u),Xt(T_,8))},token:t,providedIn:"any"}),t})();function A_(t,e){if(1&t){const t=Qs();Hs(0,"div",9),$s("click",(function(){ln(t);const e=Zs().$implicit;return Zs().removeToastr(e)})),_a(1,"\xd7 "),zs()}}function k_(t,e){if(1&t&&(Hs(0,"div"),_a(1),zs()),2&t){const t=Zs().$implicit,e=Zs();Ea("to-title ",t.config.titleClass||e.titleClass,""),gi(1),ba(t.title)}}function P_(t,e){if(1&t&&Ws(0,"span",10),2&t){const t=Zs().$implicit,e=Zs();Ea("to-message ",t.config.messageClass||e.messageClass,""),qs("innerHTML",e.sanitizer.bypassSecurityTrustHtml(t.message),$r)}}function N_(t,e){if(1&t&&(Hs(0,"span"),_a(1),zs()),2&t){const t=Zs().$implicit,e=Zs();Ea("to-message ",t.config.messageClass||e.messageClass,""),gi(1),ba(t.message)}}function R_(t,e){if(1&t){const t=Qs();Hs(0,"div",3),$s("@inOut.done",(function(e){return ln(t),Zs().onAnimationEnd(e)}))("click",(function(){ln(t);const n=e.$implicit;return Zs().clicked(n)})),Ls(1,A_,2,0,"div",4),Ls(2,k_,2,4,"div",5),Hs(3,"div",6),Ls(4,P_,1,4,"span",7),Ls(5,N_,2,4,"span",8),zs(),zs()}if(2&t){const t=e.$implicit,n=Zs();Ea("toastr toastr-",t.type,""),qs("@inOut",t.config.animate||n.animate),gi(1),qs("ngIf",t.config.showCloseButton),gi(1),qs("ngIf",t.title),gi(1),qs("ngSwitch",t.config.enableHTML),gi(1),qs("ngSwitchCase",!0)}}let j_=(()=>{class t{constructor(){this.position="top-right",this.maxShown=5,this.newestOnTop=!1,this.animate="slideFromLeft",this.toastTimeout=5e3,this.enableHTML=!1,this.dismiss="auto",this.messageClass="toastr-message",this.titleClass="toastr-title",this.showCloseButton=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class D_{constructor(t,e,n,r){this.type=t,this.message=e,this.title=n,this.data=r,this.config={position:"",animate:"slideFromLeft",dismiss:"auto",enableHTML:!1,titleClass:"",messageClass:"",toastTimeout:3e3,showCloseButton:!1}}dismiss(){this.toastrManager.dismissToastr(this)}}const M_=Hl("inOut",[Gl("fade",Ql({opacity:1})),Kl("void => fade",[Ql({opacity:1}),zl("0.4s ease-in")]),Kl("fade => void",[zl("0.4s 0.1s ease-out",Ql({opacity:0}))]),Gl("slideFromLeft",Ql({opacity:1,transform:"translateX(0)"})),Kl("void => slideFromLeft",[Ql({opacity:0,transform:"translateX(-100%)"}),zl("0.4s ease-in")]),Kl("slideFromLeft => void",[zl("0.4s 0.1s ease-out",Ql({opacity:0,transform:"translateX(100%)"}))]),Gl("slideFromRight",Ql({opacity:1,transform:"translateX(0)"})),Kl("void => slideFromRight",[Ql({opacity:0,transform:"translateX(100%)"}),zl("0.4s ease-in")]),Kl("slideFromRight => void",[zl("0.4s 0.1s ease-out",Ql({opacity:0,transform:"translateX(-100%)"}))]),Gl("slideFromTop",Ql({opacity:1,transform:"translateY(0)"})),Kl("void => slideFromTop",[Ql({opacity:0,transform:"translateY(-100%)"}),zl("0.4s ease-in")]),Kl("slideFromTop => void",[zl("0.4s 0.1s ease-out",Ql({opacity:0,transform:"translateY(100%)"}))]),Gl("slideFromBottom",Ql({opacity:1,transform:"translateY(0)"})),Kl("void => slideFromBottom",[Ql({opacity:0,transform:"translateY(100%)"}),zl("0.4s ease-in")]),Kl("slideFromBottom => void",[zl("0.4s 0.1s ease-out",Ql({opacity:0,transform:"translateY(-100%)"}))])]);let F_=(()=>{class t{constructor(t,e,n,r){this.sanitizer=t,this.cdr=e,this._zone=n,this.toastrs=[],this._fresh=!0,this._onEnter=new E,this._onExit=new E,Object.assign(this,r)}onEnter(){return this._onEnter.asObservable()}onExit(){return this._onExit.asObservable()}addToastr(t){if(this.position.indexOf("top")>0){if(this.newestOnTop?this.toastrs.unshift(t):this.toastrs.push(t),this.toastrs.length>this.maxShown){const t=this.toastrs.length-this.maxShown;this.newestOnTop?this.toastrs.splice(this.maxShown):this.toastrs.splice(0,t)}}else this.toastrs.unshift(t),this.toastrs.length>this.maxShown&&this.toastrs.splice(this.maxShown);null===this.animate&&this._fresh&&(this._fresh=!1,this._onEnter.next(),this._onEnter.complete()),this.cdr.detectChanges()}removeToastr(t){t.timeoutId&&(clearTimeout(t.timeoutId),t.timeoutId=null),this.toastrs=this.toastrs.filter(e=>e.id!==t.id)}removeAllToasts(){this.toastrs.forEach(t=>{clearTimeout(t.timeoutId),t.timeoutId=null}),this.toastrs=[]}clicked(t){this.onToastClicked&&this.onToastClicked(t)}anyToast(){return this.toastrs.length>0}findToast(t){for(let e of this.toastrs)if(e.id===t)return e;return null}onAnimationEnd(t){"void"!==t.toState||this.anyToast()?this._fresh&&"void"===t.fromState&&(this._fresh=!1,this._zone.run(()=>{this._onEnter.next(),this._onEnter.complete()})):this._ngExit()}_ngExit(){this._zone.onMicrotaskEmpty.subscribe(()=>{this._onExit.next(),this._onExit.complete()})}ngOnDestroy(){this._ngExit()}}return t.\u0275fac=function(e){return new(e||t)(Vs(Ml),Vs(ko),Vs($u),Vs(j_))},t.\u0275cmp=ge({type:t,selectors:[["app-toastr"]],decls:3,vars:4,consts:[["id","toastr-container"],["toastrContainer",""],[3,"class","click",4,"ngFor","ngForOf"],[3,"click"],["class","toastr-close-button",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],[3,"ngSwitch"],[3,"class","innerHTML",4,"ngSwitchCase"],[3,"class",4,"ngSwitchDefault"],[1,"toastr-close-button",3,"click"],[3,"innerHTML"]],template:function(t,e){1&t&&(Hs(0,"div",0,1),Ls(2,R_,6,8,"div",2),zs()),2&t&&(la(ae,ca,e.position,!0),gi(2),qs("ngForOf",e.toastrs))},directives:[Yc,Zc,nl,rl,il],styles:[".to-title[_ngcontent-%COMP%]{font-weight:700;font-size:16px;margin-bottom:8px;color:#fff}.to-message[_ngcontent-%COMP%]{word-wrap:break-word;font-size:14px;line-height:20px;display:block;color:#fff;background-color:transparent}.to-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .to-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff}.to-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ccc;text-decoration:none}.toastr-close-button[_ngcontent-%COMP%]{position:relative;right:-5px;top:-15px;float:right;font-size:25px;color:#fff;-webkit-text-shadow:0 1px 0 #fff;text-shadow:0 1px 0 #fff;opacity:.8}.toastr-close-button[_ngcontent-%COMP%]:focus, .toastr-close-button[_ngcontent-%COMP%]:hover{color:#000;text-decoration:none;cursor:pointer;opacity:.4}button.toastr-close-button[_ngcontent-%COMP%]{padding:0;cursor:pointer;background:0 0;border:0;-webkit-appearance:none}.top-center[_ngcontent-%COMP%]{top:0;right:0;width:100%}.bottom-center[_ngcontent-%COMP%]{bottom:0;right:0;width:100%}.top-full-width[_ngcontent-%COMP%]{top:0;right:0;width:100%}.bottom-full-width[_ngcontent-%COMP%]{bottom:0;right:0;width:100%}.top-left[_ngcontent-%COMP%]{top:12px;left:12px}.top-right[_ngcontent-%COMP%]{top:12px;right:12px}.bottom-right[_ngcontent-%COMP%]{right:12px;bottom:12px}.bottom-left[_ngcontent-%COMP%]{bottom:12px;left:12px}#toastr-container[_ngcontent-%COMP%]{position:fixed;z-index:99999}#toastr-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin:10px 0 6px;padding:15px 15px 15px 60px;width:345px;border-radius:3px;background-position:15px;background-repeat:no-repeat;box-shadow:0 0 12px #999;color:#fff;opacity:1}#toastr-container[_ngcontent-%COMP%] > div.toastr-custom[_ngcontent-%COMP%]{padding:15px;color:#030303}#toastr-container[_ngcontent-%COMP%] > div.toastr-custom[_ngcontent-%COMP%]   .toastr-close-button[_ngcontent-%COMP%]{color:#999!important}#toastr-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #000;opacity:1;cursor:pointer}#toastr-container[_ngcontent-%COMP%] > .toastr-info[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGwSURBVEhLtZa9SgNBEMc9sUxxRcoUKSzSWIhXpFMhhYWFhaBg4yPYiWCXZxBLERsLRS3EQkEfwCKdjWJAwSKCgoKCcudv4O5YLrt7EzgXhiU3/4+b2ckmwVjJSpKkQ6wAi4gwhT+z3wRBcEz0yjSseUTrcRyfsHsXmD0AmbHOC9Ii8VImnuXBPglHpQ5wwSVM7sNnTG7Za4JwDdCjxyAiH3nyA2mtaTJufiDZ5dCaqlItILh1NHatfN5skvjx9Z38m69CgzuXmZgVrPIGE763Jx9qKsRozWYw6xOHdER+nn2KkO+Bb+UV5CBN6WC6QtBgbRVozrahAbmm6HtUsgtPC19tFdxXZYBOfkbmFJ1VaHA1VAHjd0pp70oTZzvR+EVrx2Ygfdsq6eu55BHYR8hlcki+n+kERUFG8BrA0BwjeAv2M8WLQBtcy+SD6fNsmnB3AlBLrgTtVW1c2QN4bVWLATaIS60J2Du5y1TiJgjSBvFVZgTmwCU+dAZFoPxGEEs8nyHC9Bwe2GvEJv2WXZb0vjdyFT4Cxk3e/kIqlOGoVLwwPevpYHT+00T+hWwXDf4AJAOUqWcDhbwAAAAASUVORK5CYII=)!important}#toastr-container[_ngcontent-%COMP%] > .toastr-error[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHOSURBVEhLrZa/SgNBEMZzh0WKCClSCKaIYOED+AAKeQQLG8HWztLCImBrYadgIdY+gIKNYkBFSwu7CAoqCgkkoGBI/E28PdbLZmeDLgzZzcx83/zZ2SSXC1j9fr+I1Hq93g2yxH4iwM1vkoBWAdxCmpzTxfkN2RcyZNaHFIkSo10+8kgxkXIURV5HGxTmFuc75B2RfQkpxHG8aAgaAFa0tAHqYFfQ7Iwe2yhODk8+J4C7yAoRTWI3w/4klGRgR4lO7Rpn9+gvMyWp+uxFh8+H+ARlgN1nJuJuQAYvNkEnwGFck18Er4q3egEc/oO+mhLdKgRyhdNFiacC0rlOCbhNVz4H9FnAYgDBvU3QIioZlJFLJtsoHYRDfiZoUyIxqCtRpVlANq0EU4dApjrtgezPFad5S19Wgjkc0hNVnuF4HjVA6C7QrSIbylB+oZe3aHgBsqlNqKYH48jXyJKMuAbiyVJ8KzaB3eRc0pg9VwQ4niFryI68qiOi3AbjwdsfnAtk0bCjTLJKr6mrD9g8iq/S/B81hguOMlQTnVyG40wAcjnmgsCNESDrjme7wfftP4P7SP4N3CJZdvzoNyGq2c/HWOXJGsvVg+RA/k2MC/wN6I2YA2Pt8GkAAAAASUVORK5CYII=)!important}#toastr-container[_ngcontent-%COMP%] > .toastr-success[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADsSURBVEhLY2AYBfQMgf///3P8+/evAIgvA/FsIF+BavYDDWMBGroaSMMBiE8VC7AZDrIFaMFnii3AZTjUgsUUWUDA8OdAH6iQbQEhw4HyGsPEcKBXBIC4ARhex4G4BsjmweU1soIFaGg/WtoFZRIZdEvIMhxkCCjXIVsATV6gFGACs4Rsw0EGgIIH3QJYJgHSARQZDrWAB+jawzgs+Q2UO49D7jnRSRGoEFRILcdmEMWGI0cm0JJ2QpYA1RDvcmzJEWhABhD/pqrL0S0CWuABKgnRki9lLseS7g2AlqwHWQSKH4oKLrILpRGhEQCw2LiRUIa4lwAAAABJRU5ErkJggg==)!important}#toastr-container[_ngcontent-%COMP%] > .toastr-warning[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGYSURBVEhL5ZSvTsNQFMbXZGICMYGYmJhAQIJAICYQPAACiSDB8AiICQQJT4CqQEwgJvYASAQCiZiYmJhAIBATCARJy+9rTsldd8sKu1M0+dLb057v6/lbq/2rK0mS/TRNj9cWNAKPYIJII7gIxCcQ51cvqID+GIEX8ASG4B1bK5gIZFeQfoJdEXOfgX4QAQg7kH2A65yQ87lyxb27sggkAzAuFhbbg1K2kgCkB1bVwyIR9m2L7PRPIhDUIXgGtyKw575yz3lTNs6X4JXnjV+LKM/m3MydnTbtOKIjtz6VhCBq4vSm3ncdrD2lk0VgUXSVKjVDJXJzijW1RQdsU7F77He8u68koNZTz8Oz5yGa6J3H3lZ0xYgXBK2QymlWWA+RWnYhskLBv2vmE+hBMCtbA7KX5drWyRT/2JsqZ2IvfB9Y4bWDNMFbJRFmC9E74SoS0CqulwjkC0+5bpcV1CZ8NMej4pjy0U+doDQsGyo1hzVJttIjhQ7GnBtRFN1UarUlH8F3xict+HY07rEzoUGPlWcjRFRr4/gChZgc3ZL2d8oAAAAASUVORK5CYII=)!important}#toastr-container.bottom-center[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], #toastr-container.top-center[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:300px;margin:10px auto}#toastr-container.bottom-full-width[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], #toastr-container.top-full-width[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:96%;margin:10px auto}.toastr[_ngcontent-%COMP%]{background-color:#fff}.toastr-success[_ngcontent-%COMP%]{background-color:#51a351}.toastr-error[_ngcontent-%COMP%]{background-color:#d9534f}.toastr-info[_ngcontent-%COMP%]{background-color:#7460ee}.toastr-warning[_ngcontent-%COMP%]{background-color:#f89406}.toastr-progress[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;height:4px;background-color:#000;opacity:.4}@media all and (max-width:240px){#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:8px 8px 8px 50px;width:11em}#toastr-container[_ngcontent-%COMP%]   .toastr-close-button[_ngcontent-%COMP%]{right:-.2em;top:-.2em}}@media all and (min-width:241px) and (max-width:480px){#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:8px 8px 8px 50px;width:18em}#toastr-container[_ngcontent-%COMP%]   .toastr-close-button[_ngcontent-%COMP%]{right:-.2em;top:-.2em}}@media all and (min-width:481px) and (max-width:768px){#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:15px 15px 15px 50px;width:25em}}"],data:{animation:[M_]}}),t})(),L_=(()=>{class t{constructor(t,e,n,r,i){this._applicationRef=t,this._componentFactoryResolver=e,this._injector=n,this.ngZone=r,this.options=i,this.toastrContainers=[],this.index=0,this.toastClicked=new E}createToastrComponent(t,e=[]){const n=this._componentFactoryResolver.resolveComponentFactory(t),r=ws.resolve(e),i=ws.fromResolvedProviders(r,this._injector);let o=document.createElement("div");o.id="toastr-node-"+Math.floor(200*Math.random()),document.querySelector("body").appendChild(o);const s=n.create(i,[],o);return this.attachToApplication(s),s}attachToApplication(t){this._applicationRef.attachView(t.hostView)}detachFromApplication(t){this._applicationRef.detachView(t.hostView)}isToastrContainerExist(t){return this.toastrContainers.length>0&&this.toastrContainers.findIndex(e=>e.position===t)>-1}getToastrComponentRef(t){if(this.toastrContainers.length>0){const e=this.toastrContainers.find(e=>e.position===t);return e?e.ref:null}return null}createTimeout(t){let e;return this.ngZone.runOutsideAngular(()=>{e=setTimeout(()=>this.ngZone.run(()=>this.clearToast(t)),t.config.toastTimeout)}),e.toString()}setupToast(t,e){t.id=++this.index,e&&e.hasOwnProperty("toastTimeout")&&(e.dismiss="auto");const n=Object.assign({},this.options,e||{});Object.keys(t.config).forEach(e=>{n.hasOwnProperty(e)&&(t.config[e]=n[e])}),"auto"===t.config.dismiss&&(t.timeoutId=this.createTimeout(t)),t.toastrManager=this;const r=t.config.position;return this.isToastrContainerExist(r)&&this.getToastrComponentRef(r).instance.addToastr(t),t}clearToast(t){const e=t.config.position;this.isToastrContainerExist(e)&&this.getToastrComponentRef(e).instance.removeToastr(t)}clearAllToasts(){this.toastrContainers.length>0&&this.toastrContainers.forEach(t=>{console.log(t);const e=t.ref;t.ref.instance.removeAllToasts(),this.dispose(e)})}dispose(t){if(t){const e=this.toastrContainers.findIndex(e=>e.position===t.instance.position);e>-1&&this.toastrContainers.splice(e,1),this.detachFromApplication(t)}}_onToastClicked(t){this.toastClicked.next(t),"controlled"!==t.config.dismiss&&this.clearToast(t)}dismissToastr(t){this.clearToast(t)}dismissAllToastr(){this.clearAllToasts()}onClickToast(){return this.toastClicked.asObservable()}showToastr(t,e){const n=Object.assign({},this.options,e);return new Promise((r,i)=>{if(!this.isToastrContainerExist(n.position)){let t=this.createToastrComponent(F_,[{provide:j_,useValue:n}]);t.instance.onToastClicked=t=>{this._onToastClicked(t)},t.instance.onExit().subscribe(()=>{this.dispose(t)}),this.toastrContainers.push({position:n.position,ref:t})}r(this.setupToast(t,e))})}errorToastr(t,e,n){const r=new D_("error",t,e,n&&n.data?n.data:null);return this.showToastr(r,n),r}infoToastr(t,e,n){const r=new D_("info",t,e,n&&n.data?n.data:null);return this.showToastr(r,n),r}successToastr(t,e,n){const r=new D_("success",t,e,n&&n.data?n.data:null);return this.showToastr(r,n),r}warningToastr(t,e,n){const r=new D_("warning",t,e,n&&n.data?n.data:null);return this.showToastr(r,n),r}customToastr(t,e,n){const r=new D_("custom",t,e,n&&n.data?n.data:null);return this.showToastr(r,n),r}}return t.\u0275fac=function(e){return new(e||t)(Xt(pc),Xt(Ba),Xt(es),Xt($u),Xt(j_))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),U_=(()=>{class t{static forRoot(){return{ngModule:t,providers:[L_,j_]}}}return t.\u0275mod=_e({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[[sl]]}),t})();class V_{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new q_(t,this.compare,this.keySelector))}}class q_ extends p{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class B_{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new H_(t,this.observables,this.project))}}class H_ extends Zp{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(tg(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class z_{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new W_(t,this.predicate))}}class W_ extends p{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var Q_=n("6Uf2");function G_(t){return null==t}function K_(t){return"function"==typeof t.set}function $_(t,e){return K_(e)?e:t.ref(e)}function Y_(t,e){if("string"==typeof t)return e.stringCase();if(K_(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function X_(t,e,n="on",r=zv){return new v(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(O(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),J())}function Z_(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function J_(t,e){const{payload:n,prevKey:r,key:i}=e,o=Z_(t,i),s=function(t,e){if(G_(e))return 0;{const n=Z_(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function tb(t){return(G_(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function eb(t,e,n){return function(t,e,n){return X_(t,"value","once",n).pipe(Eg(r=>{const i=[Yp(r)];return e.forEach(e=>i.push(X_(t,e,"on",n))),W(...i).pipe(kg(J_,[]))}),t=>t.lift(new V_(void 0,void 0)))}(t,e=tb(e),n)}function nb(t,e,n){return W(...(e=tb(e)).map(e=>X_(t,e,"on",n)))}function rb(t,e){return function(n,r){return Y_(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function ib(t,e){return function(){return X_(t,"value","on",e)}}const ob=new Vt("angularfire2.realtimeDatabaseURL");let sb=(()=>{class t{constructor(t,e,n,r,i){this.schedulers=new o_(i),this.keepUnstableUntilFirst=s_(this.schedulers),this.database=i.runOutsideAngular(()=>{const r=h_(t,i,e);return Q_.a&&Object(Q_.a)(e_.a),r.database(n||void 0)})}list(t,e){const n=$_(this.database,t);let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:rb(r,"update"),set:rb(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?Y_(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>eb(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>nb(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return X_(t,"value","on",e).pipe(O(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new B_(t,n))}}(e),O(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new z_(r))),O(t=>t.actions));var r}(t,nb(t,e).pipe(kg((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:r=>eb(t,r,n).pipe(O(t=>t.map(t=>t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=$_(this.database,t);return r=this,{query:n=e,snapshotChanges:()=>ib(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>ib(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,O(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.database.ref().push().key}}return t.\u0275fac=function(e){return new(e||t)(Xt(u_),Xt(c_,8),Xt(ob,8),Xt(ju),Xt($u))},t.\u0275prov=ft({factory:function(){return new t(Xt(u_),Xt(c_,8),Xt(ob,8),Xt(ju),Xt($u))},token:t,providedIn:"any"}),t})(),ab=(()=>{class t{}return t.\u0275mod=_e({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},providers:[sb]}),t})();var ub=n("mAIw"),cb=n("qOnz"),lb=n("/6Yf"),hb="firebasestorage.googleapis.com",fb=function(t){function e(n,r){var i=t.call(this,yb(n),"Firebase Storage: "+r+" ("+yb(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(ub.c)(e,t),e.prototype.codeEquals=function(t){return yb(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(cb.c),db="canceled",pb="invalid-argument",gb="unsupported-environment";function yb(t){return"storage/"+t}function mb(){return new fb("unknown","An unknown error occurred, please check the error payload for server response.")}function vb(){return new fb(db,"User canceled the upload/download.")}function _b(){return new fb("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function bb(t){return new fb(pb,t)}function wb(){return new fb("app-deleted","The Firebase app was deleted.")}function Cb(t){return new fb("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Eb(t,e){return new fb("invalid-format","String does not match format '"+t+"': "+e)}function Sb(t){throw new fb("internal-error","Internal error: "+t)}var Tb={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ob=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function Ib(t,e){switch(t){case Tb.RAW:return new Ob(xb(e));case Tb.BASE64:case Tb.BASE64URL:return new Ob(Ab(t,e));case Tb.DATA_URL:return new Ob((n=new kb(e)).base64?Ab(Tb.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw Eb(Tb.DATA_URL,"Malformed data URL.")}return xb(e)}(n.rest),new kb(e).contentType)}var n;throw mb()}function xb(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Ab(t,e){switch(t){case Tb.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Eb(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Tb.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Eb(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(c){throw Eb(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var kb=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Eb(Tb.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),Pb={STATE_CHANGED:"state_changed"},Nb="running",Rb="pausing",jb="paused",Db="success",Mb="canceling",Fb="canceled",Lb="error",Ub={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Vb(t){switch(t){case Nb:case Rb:case Mb:return Ub.RUNNING;case jb:return Ub.PAUSED;case Db:return Ub.SUCCESS;case Fb:return Ub.CANCELED;case Lb:default:return Ub.ERROR}}var qb=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Bb=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=qb.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=qb.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=qb.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Sb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Sb("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Sb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Sb("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Hb=function(){function t(){}return t.prototype.createXhrIo=function(){return new Bb},t}();function zb(t){return"string"==typeof t||t instanceof String}function Wb(t){return Qb()&&t instanceof Blob}function Qb(){return"undefined"!=typeof Blob}function Gb(t,e,n,r){if(r<e)throw new fb(pb,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new fb(pb,"Invalid value for '"+t+"'. Expected "+n+" or less.")}function Kb(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function $b(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Kb();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Qb())return new Blob(t);throw new fb(gb,"This browser doesn't seem to support creating Blobs")}var Yb=function(){function t(t,e){var n=0,r="";Wb(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Wb(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Qb()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t($b.apply(null,r))}var i=e.map((function(t){return zb(t)?Ib(Tb.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),Xb=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw new fb("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=hb.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),n=new t(l[c.indices.bucket],h),c.postModify(n);break}}if(null==n)throw function(t){return new fb("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function Zb(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function Jb(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function tw(t){return"https://"+hb+"/v0"+t}function ew(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function nw(t,e){return e}var rw=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||nw}}(),iw=null;function ow(){if(iw)return iw;var t=[];t.push(new rw("bucket")),t.push(new rw("generation")),t.push(new rw("metageneration")),t.push(new rw("name","fullPath",!0));var e=new rw("name");e.xform=function(t,e){return function(t){return!zb(t)||t.length<2?t:Jb(t)}(e)},t.push(e);var n=new rw("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new rw("timeCreated")),t.push(new rw("updated")),t.push(new rw("md5Hash",null,!0)),t.push(new rw("cacheControl",null,!0)),t.push(new rw("contentDisposition",null,!0)),t.push(new rw("contentEncoding",null,!0)),t.push(new rw("contentLanguage",null,!0)),t.push(new rw("contentType",null,!0)),t.push(new rw("metadata","customMetadata",!0)),iw=t}function sw(t,e,n){var r=Zb(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Xb(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function aw(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var uw=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function cw(t){if(!t)throw mb()}function lw(t,e){return function(n,r){var i=sw(t,r,e);return cw(null!==i),i}}function hw(t){return function(e,n){var r;return(r=401===e.getStatus()?new fb("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new fb("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new fb("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function fw(t){var e=hw(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new fb("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function dw(t,e,n){var r=tw(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new uw(r,"GET",lw(t,n),i);return o.errorHandler=fw(e),o}function pw(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var gw=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function yw(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){cw(!1)}return cw(!!n&&-1!==(e||["active"]).indexOf(n)),n}var mw=262144,vw=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}(),_w=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function bw(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var ww=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=ow(),this._resumable=this._shouldDoResumable(this._blob),this._state=Nb,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(db)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(Lb))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(db)?r.completeTransitions_():(r._error=t,r._transition(Lb))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){this._state===Nb&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage.getAuthToken().then((function(n){switch(e._state){case Nb:t(n);break;case Mb:e._transition(Fb);break;case Rb:e._transition(jb)}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=pw(e,r,i),a={name:s.fullPath},u=tw(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=aw(s,n),h=new uw(u,"POST",(function(t){var e;yw(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){cw(!1)}return cw(zb(e)),e}),t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=hw(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=new uw(n,"POST",(function(t){var e=yw(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){cw(!1)}n||cw(!1);var i=Number(n);return cw(!isNaN(i)),new gw(i,r.size(),"final"===e)}),t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=hw(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=mw*this._chunkMultiplier,n=new gw(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new gw(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new fb("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw _b();var p=new uw(n,"POST",(function(t,n){var i,s=yw(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?lw(e,o)(t,n):null,new gw(a,c,"final"===s,i)}),e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=hw(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(a){return t._error=a,void t._transition(Lb)}var s=t._ref.storage.makeRequest(o,i);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition(Db)):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){mw*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=dw(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition(Db)}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=pw(e,r,i),c=aw(u,n),l=Yb.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw _b();var h={name:u.fullPath},f=tw(o),d=t.maxUploadRetryTime,p=new uw(f,"POST",lw(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=hw(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition(Db)}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case Mb:case Rb:this._state=t,void 0!==this._request&&this._request.cancel();break;case Nb:var e=this._state===jb;this._state=t,e&&(this._notifyObservers(),this._start());break;case jb:this._state=t,this._notifyObservers();break;case Fb:this._error=vb(),this._state=t,this._notifyObservers();break;case Lb:case Db:this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case Rb:this._transition(jb);break;case Mb:this._transition(Fb);break;case Nb:this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Vb(this._state);return new _w(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new vw(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Vb(this._state)){case Ub.SUCCESS:bw(this._resolve.bind(null,this.snapshot))();break;case Ub.CANCELED:case Ub.ERROR:bw(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Vb(this._state)){case Ub.RUNNING:case Ub.PAUSED:t.next&&bw(t.next.bind(t,this.snapshot))();break;case Ub.SUCCESS:t.complete&&bw(t.complete.bind(t))();break;case Ub.CANCELED:case Ub.ERROR:t.error&&bw(t.error.bind(t,this._error))();break;default:t.error&&bw(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t=this._state===jb||this._state===Rb;return t&&this._transition(Nb),t},t.prototype.pause=function(){var t=this._state===Nb;return t&&this._transition(Rb),t},t.prototype.cancel=function(){var t=this._state===Nb||this._state===Rb;return t&&this._transition(Mb),t},t}(),Cw=function(){function t(t,e){this._service=t,this._location=e instanceof Xb?e:Xb.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype.newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Xb(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Jb(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Xb(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Cb(t)},t}();function Ew(t,e){return Object(ub.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ub.d)(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Gb("options.maxResults",1,1e3,e.maxResults),[4,t.storage.getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=tw(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new uw(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=Zb(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new Xb(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t.makeStorageReference(new Xb(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return cw(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=hw(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage.makeRequest(i,n).getPromise()]}}))}))}function Sw(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Xb(t._location.bucket,n);return new Cw(t.storage,r)}var Tw=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Ow=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new Tw(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Tw(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Tw(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Tw(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Iw=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new xw(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new xw(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),xw=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(Sw(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Ow(function(t,e,n){return void 0===n&&(n=null),t._throwIfRoot("uploadBytesResumable"),new ww(t,new Yb(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){return void 0===e&&(e=Tb.RAW),this._throwIfRoot("putString"),new Ow(function(t,e,n,r){void 0===n&&(n=Tb.RAW),t._throwIfRoot("putString");var i=Ib(n,e),o=Object(ub.a)({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new ww(t,new Yb(i.data,!0),o)}(this._delegate,t,e,n),this)},t.prototype.listAll=function(){var t,e,n=this;return(t=this._delegate,e={prefixes:[],items:[]},function t(e,n,r){return Object(ub.b)(this,void 0,void 0,(function(){var i,o,s;return Object(ub.d)(this,(function(a){switch(a.label){case 0:return[4,Ew(e,{pageToken:r})];case 1:return i=a.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(s=n.items).push.apply(s,i.items),null==i.nextPageToken?[3,3]:[4,t(e,n,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))).then((function(t){return new Iw(t,n.storage)}))},t.prototype.list=function(t){var e=this;return Ew(this._delegate,t).then((function(t){return new Iw(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return Object(ub.b)(this,void 0,void 0,(function(){var e,n;return Object(ub.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=dw(t.storage,t._location,ow()),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Object(ub.b)(this,void 0,void 0,(function(){var n,r;return Object(ub.d)(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage.getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=tw(e.fullServerUrl()),o=aw(n,r),s=t.maxOperationRetryTime,a=new uw(i,"PATCH",lw(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=fw(e),a}(t.storage,t._location,e,ow()),[2,t.storage.makeRequest(r,n).getPromise()]}}))}))}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(ub.b)(this,void 0,void 0,(function(){var e,n;return Object(ub.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=tw(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new uw(r,"GET",function(t,e){return function(n,r){var i=sw(t,r,e);return cw(null!==i),function(t,e){var n=Zb(e);if(null===n)return null;if(!zb(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.fullPath;return tw("/b/"+i(t.bucket)+"/o/"+i(n))+ew({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=fw(e),o}(t.storage,t._location,ow()),[2,t.storage.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new fb("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(ub.b)(this,void 0,void 0,(function(){var e,n;return Object(ub.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=tw(e.fullServerUrl()),r=new uw(n,"DELETE",(function(t,e){}),t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=fw(e),r}(t.storage,t._location),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Cb(t)},t}(),Aw=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),kw=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(u){o(u)}else null!==s?((r=mb()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?wb():vb():new fb("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Pw(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new Pw(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===qb.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Pw(s,n))}else{var a=n.getErrorCode()===qb.ABORT;e(!1,new Pw(!1,null,a))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(ub.g)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(ub.g)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout((function(){s=!0,p(!0)}),r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Pw=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function Nw(t){return/^[A-Za-z]+:\/\//.test(t)}function Rw(t,e){if(e&&Nw(e)){if(t instanceof jw)return new Cw(t,e);throw bb("To use ref(service, url), the first argument must be a Storage instance.")}return function t(e,n){if(e instanceof jw){var r=e;if(null==r._bucket)throw new fb("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var i=new Cw(r,r._bucket);return null!=n?t(i,n):i}if(void 0!==n){if(n.includes(".."))throw bb('`path` param cannot contain ".."');return Sw(e,n)}return e}(t,e)}var jw=function(){function t(t,e,n,r){var i,o;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Xb.makeFromBucketSpec(r):null==(o=null==(i=this.app.options)?void 0:i.storageBucket)?null:Xb.makeFromBucketSpec(o)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Gb("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Gb("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype.getAuthToken=function(){return Object(ub.b)(this,void 0,void 0,(function(){var t,e;return Object(ub.d)(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype.makeStorageReference=function(t){return new Cw(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new Aw(wb());var r=function(t,e,n,r){var i=ew(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==e_.a?e_.a.SDK_VERSION:"AppManager")}(s),new kw(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}(),Dw=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Nw(t))throw bb("ref() expected a child path but got a URL, use refFromURL instead.");return new xw(Rw(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Nw(t))throw bb("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Xb.makeFromUrl(t)}catch(e){throw bb("refFromUrl() expected a valid full URL but got an invalid one.")}return new xw(Rw(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function Mw(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new Dw(n,new jw(n,r,new Hb,e))}function Fw(t){var e={TaskState:Ub,TaskEvent:Pb,StringFormat:Tb,Storage:jw,Reference:xw};t.INTERNAL.registerComponent(new lb.a("storage",Mw,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.2")}function Lw(t){const e=function(t){return new v(e=>{const n=t=>e.next(t);return t.on("state_changed",n,t=>e.error(t),()=>{n(t.snapshot),e.complete()}),()=>t.cancel()})}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(O(t=>t.bytesTransferred/t.totalBytes*100))}}function Uw(t,e,n){return{getDownloadURL:()=>Yp(void 0).pipe(kv(e.outsideAngular),Eg(()=>t.getDownloadURL()),n),getMetadata:()=>Yp(void 0).pipe(kv(e.outsideAngular),Eg(()=>t.getMetadata()),n),delete:()=>M(t.delete()),child:r=>Uw(t.child(r),e,n),updateMetadata:e=>M(t.updateMetadata(e)),put:(e,n)=>Lw(t.put(e,n)),putString:(e,n,r)=>Lw(t.putString(e,n,r)),listAll:()=>M(t.listAll())}}Fw(e_.a);const Vw=new Vt("angularfire2.storageBucket");let qw=(()=>{class t{constructor(t,e,n,r,i){this.schedulers=new o_(i),this.keepUnstableUntilFirst=s_(this.schedulers),this.storage=i.runOutsideAngular(()=>{const r=h_(t,i,e);return Fw&&Fw(e_.a),r.storage(n||void 0)})}ref(t){return Uw(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return Uw(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Xt(u_),Xt(c_,8),Xt(Vw,8),Xt(ju),Xt($u))},t.\u0275prov=ft({factory:function(){return new t(Xt(u_),Xt(c_,8),Xt(Vw,8),Xt(ju),Xt($u))},token:t,providedIn:"any"}),t})(),Bw=(()=>{class t{constructor(t,e,n,r,i,o){this.afAuth=t,this.firestore=e,this.router=n,this.toastr=r,this.db=i,this.storage=o,this.basePath="/usrsImages",this.basePathchats="/chatsImages"}register(t,e,n){return xv(this,void 0,void 0,(function*(){return this.afAuth.createUserWithEmailAndPassword(t,e).then(r=>{this.sendEmailVerification(),this.Add_InfoUser(t,e,n),this.toastr.successToastr("User Created")})}))}sendEmailVerification(){return xv(this,void 0,void 0,(function*(){yield(yield this.afAuth.currentUser).sendEmailVerification()}))}Add_InfoUser(t,e,n){var r={mail:t,password:e,name:n,url:null,type:"client"};return this.firestore.collection("Users").add(r)}VerificationLogIn(){this.afAuth.authState.subscribe(t=>{t?(this.user=t,localStorage.setItem("user",JSON.stringify(this.user)),localStorage.setItem("UserLogMail",this.user.email)):localStorage.setItem("user",null)})}login(t,e){return xv(this,void 0,void 0,(function*(){yield this.afAuth.signInWithEmailAndPassword(t,e).then(t=>{this.VerificationLogIn(),this.IsLoggedIn(),this.toastr.successToastr("You Log"),localStorage.setItem("mail",JSON.stringify(t.user.email)),setTimeout(()=>{this.router.navigate(["chatroom"])},500)}).catch(t=>{this.toastr.warningToastr("E-MAIL OR PASSWORD NOT CORRECT")})}))}IsLoggedIn(){return null!=localStorage.getItem("user")}log_out(){return xv(this,void 0,void 0,(function*(){yield this.afAuth.signOut(),localStorage.removeItem("user"),localStorage.removeItem("mail"),localStorage.removeItem("UserLogMail"),localStorage.removeItem("iduser"),localStorage.removeItem("Nameuser"),localStorage.removeItem("ProfilePhotoUser"),localStorage.removeItem("UserPassword"),localStorage.removeItem("typeuser"),this.IsLoggedIn(),console.log(this.IsLoggedIn()),this.toastr.successToastr("LogOut"),setTimeout(()=>{localStorage.getItem("foo")?localStorage.removeItem("foo"):(localStorage.setItem("foo","no reload"),location.reload())},500),this.router.navigate([""])}))}sendPasswordResetEmail(t){return xv(this,void 0,void 0,(function*(){return yield this.afAuth.sendPasswordResetEmail(t).then(t=>{this.toastr.successToastr("Check Massage Send To Your E-Mail")})}))}get_Users(){return this.firestore.collection("Users").snapshotChanges()}update_profilePhoto(t){this.firestore.collection("Users").doc(t).update({url:this.AddUrl}),this.toastr.successToastr("Changed"),setTimeout(()=>{localStorage.getItem("foo")?localStorage.removeItem("foo"):(localStorage.setItem("foo","no reload"),location.reload())},1e3)}Add_Img_user(t){const e=`${this.basePath}/${t.file.name}`,n=this.storage.ref(e),r=this.storage.upload(e,t.file);return r.snapshotChanges().pipe(Bg(()=>{n.getDownloadURL().subscribe(e=>{this.AddUrl=e,t.url=e,t.name=t.file.name,this.saveFileData(t),this.update_profilePhoto(localStorage.getItem("iduser"))})})).subscribe(),r.percentageChanges()}saveFileData(t){this.db.list(this.basePath).push(t)}delete_Img(t){this.deleteFileDatabase(t.key).then(()=>{this.deleteFileStorage(t.name)}).catch(t=>this.toastr.warningToastr("TRY IN ANOTHER TIME"))}deleteFileDatabase(t){return this.db.list(this.basePath).remove(t)}deleteFileStorage(t){this.storage.ref(this.basePath).child(t).delete()}get_Img(t){return this.db.list(this.basePath,e=>e.limitToLast(t))}update_UserName(t,e){this.firestore.collection("Users").doc(e).update({name:t}),this.toastr.successToastr("Changed"),setTimeout(()=>{localStorage.getItem("foo")?localStorage.removeItem("foo"):(localStorage.setItem("foo","no reload"),location.reload())},1e3)}get_chats(){return this.firestore.collection("chats").snapshotChanges()}Add_chats(t,e){var n={chat:t,urlimg:localStorage.getItem("ProfilePhotoUser"),date:new Date,mail:localStorage.getItem("mail"),username:localStorage.getItem("Nameuser"),img:e};return this.firestore.collection("chats").add(n)}Add_Img_chats(t,e){var n=Math.floor(1e9*Math.random()+1);const r=`${this.basePathchats+n}/${t.file.name}`,i=this.storage.ref(r),o=this.storage.upload(r,t.file);return o.snapshotChanges().pipe(Bg(()=>{i.getDownloadURL().subscribe(n=>{this.AddUrlchat=n,t.url=n,t.name=t.file.name,this.saveFileDatachats(t),this.Add_chats(e,n)})})).subscribe(),o.percentageChanges()}saveFileDatachats(t){this.db.list(this.basePathchats).push(t)}getFileUploads(t){return this.db.list(this.basePathchats,t=>t.limitToLast(1e3))}update_photochatsuser(t,e){this.firestore.collection("chats").doc(e).update({urlimg:t})}Delete_message(t){this.firestore.doc("chats/"+t).delete()}}return t.\u0275fac=function(e){return new(e||t)(Xt(p_),Xt(x_),Xt(uv),Xt(L_),Xt(sb),Xt(qw))},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Hw=(()=>{class t{constructor(t,e){this.auth=t,this.router=e,console.log(this.auth.IsLoggedIn())}canActivate(t,e){return 1==this.auth.IsLoggedIn()||(this.router.navigate([""]),!1)}}return t.\u0275fac=function(e){return new(e||t)(Xt(Bw),Xt(uv))},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function zw(t,e){1&t&&(Hs(0,"div"),_a(1," UserName is required"),zs())}function Ww(t,e){if(1&t&&(Hs(0,"div",49),Ls(1,zw,2,0,"div",50),zs()),2&t){const t=Zs();gi(1),qs("ngIf",t.f.UserName.errors.required)}}function Qw(t,e){1&t&&(Hs(0,"div"),_a(1,"Email is required"),zs())}function Gw(t,e){1&t&&(Hs(0,"div"),_a(1,"Email must be a valid email address"),zs())}function Kw(t,e){if(1&t&&(Hs(0,"div",49),Ls(1,Qw,2,0,"div",50),Ls(2,Gw,2,0,"div",50),zs()),2&t){const t=Zs();gi(1),qs("ngIf",t.f.email.errors.required),gi(1),qs("ngIf",t.f.email.errors.email)}}function $w(t,e){1&t&&(Hs(0,"div"),_a(1,"Password is required"),zs())}function Yw(t,e){1&t&&(Hs(0,"div"),_a(1,"Password must be at least 6 characters"),zs())}function Xw(t,e){if(1&t&&(Hs(0,"div",49),Ls(1,$w,2,0,"div",50),Ls(2,Yw,2,0,"div",50),zs()),2&t){const t=Zs();gi(1),qs("ngIf",t.f.password.errors.required),gi(1),qs("ngIf",t.f.password.errors.minlength)}}function Zw(t,e){1&t&&(Hs(0,"div"),_a(1,"Confirm Password is required"),zs())}function Jw(t,e){1&t&&(Hs(0,"div"),_a(1,"Passwords must match"),zs())}function tC(t,e){if(1&t&&(Hs(0,"div",49),Ls(1,Zw,2,0,"div",50),Ls(2,Jw,2,0,"div",50),zs()),2&t){const t=Zs();gi(1),qs("ngIf",t.f.confirmPassword.errors.required),gi(1),qs("ngIf",t.f.confirmPassword.errors.mustMatch)}}function eC(t,e){1&t&&(Hs(0,"div"),_a(1," Required E-mail "),zs())}function nC(t,e){1&t&&(Hs(0,"div"),_a(1," Please Provide A Valid Email Address "),zs())}function rC(t,e){if(1&t&&(Hs(0,"div",51),Ls(1,eC,2,0,"div",50),Ls(2,nC,2,0,"div",50),zs()),2&t){Zs();const t=Us(85);gi(1),qs("ngIf",t.errors.required),gi(1),qs("ngIf",null==t.errors?null:t.errors.email)}}const iC=function(t){return{"is-invalid":t}};let oC=(()=>{class t{constructor(t,e,n){this.toastr=t,this.authService=e,this.formBuilder=n,this.submitted=!1,this.registerForm=this.formBuilder.group({UserName:["",Hd.required],email:["",[Hd.required,Hd.email]],password:["",[Hd.required,Hd.minLength(6)]],confirmPassword:["",Hd.required]},{})}ngOnInit(){console.log(this.authService.IsLoggedIn())}get f(){return this.registerForm.controls}onSubmit(){this.submitted=!0,this.registerForm.invalid||(this.signin(),setTimeout(()=>{this.SignInpassword=null,this.RePassword=null,this.UserName=null,this.SignInMail=null},1e3),document.getElementById("reset").click())}onReset(){this.submitted=!1,this.registerForm.reset()}MustMatch(t,e){return n=>{const r=n.controls[e];r.errors&&!r.errors.mustMatch||r.setErrors(n.controls[t].value!==r.value?{mustMatch:!0}:null)}}signin(){this.SignInpassword==this.RePassword?this.authService.register(this.SignInMail,this.SignInpassword,this.UserName).then(()=>{}).catch((function(t){alert(t)})):this.toastr.errorToastr("the two password not equal")}LogIn(){this.authService.login(this.email,this.pass)}send_Password_ResetEmail(){this.authService.sendPasswordResetEmail(this.EmailResetPassword).catch(t=>{t.code&&this.toastr.warningToastr(t.message)}),setTimeout(()=>{this.EmailResetPassword=null},1e3)}}return t.\u0275fac=function(e){return new(e||t)(Vs(L_),Vs(Bw),Vs(Gp))},t.\u0275cmp=ge({type:t,selectors:[["app-auth"]],decls:92,vars:26,consts:[[1,"bigdiv"],[1,"divcover"],[1,"container"],["action","/action_page.php"],[1,"row"],[2,"text-align","center","color","white","font-family","Andale Mono","width","100%","margin-top","8%"],[1,"col-12"],["type","text","name","username","placeholder","E-Mail","required","",2,"margin-bottom","4%","margin-top","6%","width","80%","margin-left","10%","font-size","23px","text-align","center",3,"ngModel","ngModelChange"],["type","password","name","password","placeholder","Password",2,"margin-bottom","6%","width","80%","margin-left","10%","font-size","23px","text-align","center",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btnlog",2,"width","60%","margin-left","20%",3,"click"],[1,"bottom-container"],[1,"col"],["data-toggle","modal","data-target","#Signin",1,"btn",2,"color","white"],["href","#","data-toggle","modal","data-target","#ConfirmEmail",1,"btn",2,"color","white"],[1,"copyright"],[1,"row","rowfooter"],[1,"chatRoom"],[1,"created"],[3,"formGroup","ngSubmit"],["id","Signin","role","dialog",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-body",2,"overflow","visible"],[1,"ContactUs"],[1,"DarkFrame"],[1,"text-center"],[1,"fa","fa-user-o","fa-3x","text-center"],[1,"form-row"],[1,"form-group","col-12"],["placeholder","UserName","type","text","formControlName","UserName",1,"form-control","text-center","inputcontact",3,"ngModel","ngClass","ngModelChange"],["class","invalid-feedback",4,"ngIf"],[1,"form-group"],["placeholder","Email","type","text","formControlName","email",1,"form-control","text-center","inputcontact",3,"ngModel","ngClass","ngModelChange"],["placeholder","Password","type","password","formControlName","password",1,"form-control","text-center","inputcontact",3,"ngModel","ngClass","ngModelChange"],["placeholder","Confirm Password","type","password","formControlName","confirmPassword",1,"form-control","text-center","inputcontact",3,"ngModel","ngClass","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal","id","reset","type","reset",1,"btn","btn-default","col-6",3,"click"],["type","submit",1,"btn","btn-default","BtnAddcreate","col-6"],["ConfirmEmail","ngForm"],["id","ConfirmEmail","role","dialog",1,"modal","fade"],[1,"modal-body"],["role","form-inline"],["name","mail","type","text","email","true","placeholder","E-mail","required","",1,"form-control","inputcontact",3,"ngModel","ngModelChange"],["mailConfirm","ngModel"],["class","alert alert-danger",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-default","col-6"],["type","submit","data-dismiss","modal",1,"btn","btn-default","BtnAddcreate","col-6",3,"disabled","click"],[1,"invalid-feedback"],[4,"ngIf"],[1,"alert","alert-danger"]],template:function(t,e){if(1&t&&(Hs(0,"div",0),Hs(1,"div",1),Hs(2,"div",2),Hs(3,"form",3),Hs(4,"div",4),Hs(5,"h1",5),_a(6,"Login To Chat Room"),zs(),Hs(7,"div",6),Hs(8,"input",7),$s("ngModelChange",(function(t){return e.email=t})),zs(),Hs(9,"input",8),$s("ngModelChange",(function(t){return e.pass=t})),zs(),Hs(10,"button",9),$s("click",(function(){return e.LogIn()})),_a(11,"LogIn"),zs(),zs(),zs(),zs(),zs(),Hs(12,"div",10),Hs(13,"div",4),Hs(14,"div",11),Hs(15,"a",12),_a(16,"Sign up"),zs(),zs(),Hs(17,"div",11),Hs(18,"a",13),_a(19,"Forgot password?"),zs(),zs(),zs(),zs(),Hs(20,"div",14),Hs(21,"div",2),Hs(22,"div",15),Hs(23,"div"),_a(24,"Copyright \xa9 2020 "),Hs(25,"span",16),_a(26,"Chat Room"),zs(),_a(27," .inc "),zs(),Hs(28,"div",17),_a(29,"Created By : "),Hs(30,"span",16),_a(31,"Mohamed Magdy"),zs(),zs(),zs(),zs(),zs(),zs(),zs(),Hs(32,"form",18),$s("ngSubmit",(function(){return e.onSubmit()})),Hs(33,"div",2),Hs(34,"div",19),Hs(35,"div",20),Hs(36,"div",21),Hs(37,"div",22),Hs(38,"h3"),_a(39,"SignIn"),zs(),Hs(40,"button",23),_a(41,"\xd7"),zs(),zs(),Hs(42,"div",24),Hs(43,"section",25),Hs(44,"div",26),Hs(45,"div",2),Hs(46,"div",27),Ws(47,"i",28),zs(),Hs(48,"div",29),Hs(49,"div",30),Hs(50,"input",31),$s("ngModelChange",(function(t){return e.UserName=t})),zs(),Ls(51,Ww,2,1,"div",32),zs(),zs(),Hs(52,"div",33),Hs(53,"input",34),$s("ngModelChange",(function(t){return e.SignInMail=t})),zs(),Ls(54,Kw,3,2,"div",32),zs(),Hs(55,"div",33),Hs(56,"input",35),$s("ngModelChange",(function(t){return e.SignInpassword=t})),zs(),Ls(57,Xw,3,2,"div",32),zs(),Hs(58,"div",33),Hs(59,"input",36),$s("ngModelChange",(function(t){return e.RePassword=t})),zs(),Ls(60,tC,3,2,"div",32),zs(),zs(),zs(),zs(),zs(),Hs(61,"div",37),Hs(62,"button",38),$s("click",(function(){return e.onReset()})),_a(63,"Close"),zs(),Hs(64,"button",39),_a(65,"Create"),zs(),zs(),zs(),zs(),zs(),zs(),zs(),Hs(66,"form",null,40),Hs(68,"div",2),Hs(69,"div",41),Hs(70,"div",20),Hs(71,"div",21),Hs(72,"div",22),Hs(73,"h3"),_a(74,"Forget Password"),zs(),Hs(75,"button",23),_a(76,"\xd7"),zs(),zs(),Hs(77,"div",42),Hs(78,"section",25),Hs(79,"div",26),Hs(80,"div",2),Hs(81,"form",43),Hs(82,"div",2),Hs(83,"div",4),Hs(84,"input",44,45),$s("ngModelChange",(function(t){return e.EmailResetPassword=t})),zs(),Ls(86,rC,3,2,"div",46),zs(),zs(),zs(),zs(),zs(),zs(),zs(),Hs(87,"div",37),Hs(88,"button",47),_a(89,"Close"),zs(),Hs(90,"button",48),$s("click",(function(){return e.send_Password_ResetEmail()})),_a(91,"Confirm"),zs(),zs(),zs(),zs(),zs(),zs(),zs()),2&t){const t=Us(85);gi(8),qs("ngModel",e.email),gi(1),qs("ngModel",e.pass),gi(23),qs("formGroup",e.registerForm),gi(18),qs("ngModel",e.UserName)("ngClass",Ou(18,iC,e.submitted&&e.f.UserName.errors)),gi(1),qs("ngIf",e.submitted&&e.f.UserName.errors),gi(2),qs("ngModel",e.SignInMail)("ngClass",Ou(20,iC,e.submitted&&e.f.email.errors)),gi(1),qs("ngIf",e.submitted&&e.f.email.errors),gi(2),qs("ngModel",e.SignInpassword)("ngClass",Ou(22,iC,e.submitted&&e.f.password.errors)),gi(1),qs("ngIf",e.submitted&&e.f.password.errors),gi(2),qs("ngModel",e.RePassword)("ngClass",Ou(24,iC,e.submitted&&e.f.confirmPassword.errors)),gi(1),qs("ngIf",e.submitted&&e.f.confirmPassword.errors),gi(24),qs("ngModel",e.EmailResetPassword),gi(2),qs("ngIf",t.invalid&&(t.dirty||t.touched)),gi(4),qs("disabled",t.invalid)}},directives:[Mp,Fd,Np,kd,Hp,Md,Dp,Up,qp,Kc,Zc,Wp],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box;overflow:hidden}.bigdiv[_ngcontent-%COMP%]{background:url(1.5f4905251c982be3fb50.jpg) 50%;background-size:100% 100%;height:108%;margin:-8px}.h1[_ngcontent-%COMP%]{font-size:45px}.divcover[_ngcontent-%COMP%]{background:rgba(0,0,0,.5)}.divcover[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:relative;border-radius:5px;padding:20px 0 30px}.btn[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{width:100%;padding:12px;border:none;border-radius:4px;margin:5px 0;opacity:.85;display:inline-block;font-size:17px;line-height:20px;text-decoration:none}.btn[_ngcontent-%COMP%]:hover, input[_ngcontent-%COMP%]:hover{opacity:1}.btn[_ngcontent-%COMP%]:focus{outline:0;box-shadow:none}.btnlog[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]{background-color:#55acee;color:#fff;cursor:pointer}.btnlog[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:hover{background-color:#55acee}.col[_ngcontent-%COMP%]{float:left;width:50%;padding:0 50px;margin:6px auto auto}.row[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.vl[_ngcontent-%COMP%]{left:50%;transform:translate(-50%);border:2px solid #ddd;height:175px}.inner[_ngcontent-%COMP%], .vl[_ngcontent-%COMP%]{position:absolute}.inner[_ngcontent-%COMP%]{top:50%;transform:translate(-50%,-50%);background-color:#f1f1f1;border:1px solid #ccc;border-radius:50%;padding:8px 10px}.hide-md-lg[_ngcontent-%COMP%]{display:none}.bottom-container[_ngcontent-%COMP%]{text-align:center;background-color:#666;border-radius:0 0 4px 4px;margin-top:8%}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#55acee}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding-bottom:20px}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-bottom:20px}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .fa-user-o[_ngcontent-%COMP%]{color:#55acee;margin-bottom:25px}.inputcontact[_ngcontent-%COMP%]{outline:0;box-shadow:0 0 0 .2rem rgba(213,228,245,.25)}.BtnAddcreate[_ngcontent-%COMP%]{background:#55acee;color:#fff}.copyright[_ngcontent-%COMP%]{background:#222;color:#fff;min-width:101%;height:47px;padding-top:10px;bottom:0;position:fixed}.copyright[_ngcontent-%COMP%]   .chatRoom[_ngcontent-%COMP%]{color:#55acee!important}.created[_ngcontent-%COMP%]{margin-left:450px}.rowfooter[_ngcontent-%COMP%]{margin-left:100px;margin-top:-17px}@media screen and (max-width:1000px){.created[_ngcontent-%COMP%]{margin-left:14px}.rowfooter[_ngcontent-%COMP%]{margin-left:100px;margin-top:-23px;font-size:13px}.col[_ngcontent-%COMP%]{width:100%;margin-bottom:0}.vl[_ngcontent-%COMP%]{display:none}.hide-md-lg[_ngcontent-%COMP%]{display:block;text-align:center}.h1[_ngcontent-%COMP%]{font-size:35px!important}}']}),t})();class sC{constructor(t){this.file=t}}function aC(t,e){1&t&&Ws(0,"img",42),2&t&&Js("src",Zs(2).UserUrl,Yr)}function uC(t,e){1&t&&Ws(0,"img",43)}function cC(t,e){if(1&t){const t=Qs();Hs(0,"nav",33),Hs(1,"div",34),Hs(2,"div",6),Hs(3,"button",35),$s("click",(function(){return ln(t),Zs().GetImage()})),Ls(4,aC,1,1,"img",36),Ls(5,uC,1,0,"img",37),Hs(6,"div",38),_a(7,"Change"),zs(),zs(),Hs(8,"h2",39),_a(9),zs(),zs(),zs(),Hs(10,"div",40),Hs(11,"button",41),$s("click",(function(){return ln(t),Zs().logout()})),_a(12,"LogOut"),zs(),zs(),zs()}if(2&t){const t=Zs();gi(4),qs("ngIf",null!=t.UserUrl),gi(1),qs("ngIf",null==t.UserUrl),gi(4),ba(t.Username)}}function lC(t,e){1&t&&Ws(0,"img",54)}function hC(t,e){1&t&&Ws(0,"img",55),2&t&&Js("src",Zs(3).UserUrl,Yr)}function fC(t,e){if(1&t&&(Hs(0,"div"),Ws(1,"img",56),Hs(2,"a",57),_a(3," open "),zs(),zs()),2&t){const t=Zs(2).$implicit;gi(1),Js("src",t.img,Yr),gi(1),Js("href",t.img,Yr)}}function dC(t,e){if(1&t){const t=Qs();Hs(0,"div",47),Ls(1,lC,1,0,"img",48),Ls(2,hC,1,1,"img",49),Hs(3,"div",50),Hs(4,"p",51),_a(5),zs(),Ls(6,fC,4,2,"div",24),zs(),Hs(7,"span",52),_a(8),Hs(9,"i",53),$s("click",(function(){ln(t);const e=Zs().$implicit;return Zs().idmessage(e.id)})),zs(),zs(),zs()}if(2&t){const t=Zs().$implicit;gi(1),qs("ngIf",null==t.urlimg||"null"==t.urlimg),gi(1),qs("ngIf",null!=t.urlimg&&"null"!=t.urlimg),gi(3),ba(t.chat),gi(1),qs("ngIf",null!=t.img&&"null"!=t.img),gi(2),Ca("",t.date.num,"",t.date.char," ")}}function pC(t,e){1&t&&Ws(0,"img",63)}function gC(t,e){1&t&&Ws(0,"img",64),2&t&&Js("src",Zs(2).$implicit.urlimg,Yr)}function yC(t,e){if(1&t&&(Hs(0,"div"),Ws(1,"img",65),Hs(2,"a",66),_a(3," open"),zs(),zs()),2&t){const t=Zs(2).$implicit;gi(1),Js("src",t.img,Yr),gi(1),Js("href",t.img,Yr)}}function mC(t,e){if(1&t&&(Hs(0,"div",58),Ls(1,pC,1,0,"img",59),Ls(2,gC,1,1,"img",60),Hs(3,"p",61),_a(4),zs(),Ls(5,yC,4,2,"div",24),Hs(6,"span",62),_a(7),zs(),zs()),2&t){const t=Zs().$implicit;gi(1),qs("ngIf",null==t.urlimg||"null"==t.urlimg),gi(1),qs("ngIf",null!=t.urlimg&&"null"!=t.urlimg),gi(2),ba(t.chat),gi(1),qs("ngIf",null!=t.img&&"null"!=t.img),gi(2),Ca("",t.date.num,"",t.date.char,"")}}function vC(t,e){if(1&t&&(Hs(0,"div"),Hs(1,"div",44),Ls(2,dC,10,6,"div",45),zs(),Ls(3,mC,8,6,"div",46),zs()),2&t){const t=e.$implicit,n=Zs();gi(2),qs("ngIf",t.mail==n.maillog),gi(1),qs("ngIf",t.mail!=n.maillog)}}const _C=function(t){return{width:t}};function bC(t,e){if(1&t&&(Hs(0,"div",67),Hs(1,"div",68),_a(2),zs(),zs()),2&t){const t=Zs();gi(1),qs("ngStyle",Ou(3,_C,t.percentage+"%")),Ms("aria-valuenow",t.percentage),gi(1),wa(" ",t.percentage,"%")}}function wC(t,e){1&t&&(Hs(0,"div"),Ws(1,"i",69),Hs(2,"span"),_a(3,"Loading..."),zs(),zs())}function CC(t,e){if(1&t&&(Hs(0,"div",67),Hs(1,"div",68),_a(2),zs(),zs()),2&t){const t=Zs();gi(1),qs("ngStyle",Ou(3,_C,t.percentage+"%")),Ms("aria-valuenow",t.percentage),gi(1),wa(" ",t.percentage,"%")}}function EC(t,e){1&t&&(Hs(0,"div"),Ws(1,"i",69),Hs(2,"span"),_a(3,"Loading..."),zs(),zs())}const SC=[{path:"",component:oC},{path:"chatroom",component:(()=>{class t{constructor(t,e,n){this.authService=t,this.toastr=e,this.router=n,this.load=!0,this.chat=null,this.img=null,this.dataChats=[],this.dateshow={num:0,char:""}}ngOnInit(){this.checklog=this.authService.IsLoggedIn(),this.maillog=JSON.stringify(localStorage.getItem("UserLogMail")),null!=localStorage.getItem("user")&&"null"!=localStorage.getItem("user")||this.router.navigate([""]),this.GetUsers(),this.Getchats(),this.getimge(),setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)},1e3)}logout(){this.authService.log_out()}GetUsers(){this.authService.get_Users().subscribe(t=>{this.DataUsers=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data()));for(let e=0;e<this.DataUsers.length;e++)this.DataUsers[e].mail==localStorage.getItem("UserLogMail")&&(this.Username=this.DataUsers[e].name,this.UserUrl=this.DataUsers[e].url,this.mail=this.DataUsers[e].mail,localStorage.setItem("iduser",this.DataUsers[e].id),localStorage.setItem("Nameuser",this.DataUsers[e].name),localStorage.setItem("ProfilePhotoUser",this.DataUsers[e].url),localStorage.setItem("UserPassword",this.DataUsers[e].password),localStorage.setItem("typeuser",this.DataUsers[e].type))},t=>{this.toastr.errorToastr(t.message)})}DeleteProfileImg(){if(console.log(this.fileUploads),console.log(localStorage.getItem("ProfilePhotoUser")),"null"!=localStorage.getItem("ProfilePhotoUser")){console.log("3");for(let t=0;t<this.fileUploads.length;t++)console.log(this.fileUploads[t].url),this.fileUploads[t].url==localStorage.getItem("ProfilePhotoUser")&&(console.log(this.fileUploads[t]),this.DeleteImg(this.fileUploads[t]))}else console.log("3"),this.AddProfileImg()}DeleteImg(t){this.authService.delete_Img(t),this.AddProfileImg(),console.log("3")}SelectImg(t){this.selectedFiles=t.target.files,console.log("2")}AddProfileImg(){const t=this.selectedFiles.item(0);this.selectedFiles=void 0,this.currentFileUpload=new sC(t),this.authService.Add_Img_user(this.currentFileUpload).subscribe(t=>{this.percentage=Math.round(t),100==this.percentage&&(console.log("4"),setTimeout(()=>{document.getElementById("closemodel").click()},3e3))},t=>{console.log(t)})}GetImage(){this.authService.get_Img(100).snapshotChanges().pipe(O(t=>t.map(t=>Object.assign({key:t.payload.key},t.payload.val())))).subscribe(t=>{this.fileUploads=t,console.log(t)}),console.log("1")}updateUserName(){this.authService.update_UserName(this.ChangeUserName,localStorage.getItem("iduser"))}addchat(){this.authService.Add_chats(this.chat,this.img).then(()=>{this.chat=null,setTimeout(()=>{this.Getchats()},1e3),window.scrollTo(0,document.body.scrollHeight)}).catch((function(t){alert(t)}))}Getchats(){this.authService.get_chats().subscribe(t=>{this.dataChats=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())),this.dataChats.sort((t,e)=>e.date-t.date),this.dataChats.reverse();for(let u=0;u<this.dataChats.length;u++){this.dataChats[u].mail==JSON.stringify(localStorage.getItem("UserLogMail"))&&this.authService.update_photochatsuser(this.UserUrl,this.dataChats[u].id),this.dateget=this.dataChats[u].date.toDate();var e=(new Date).getTime()-this.dateget.getTime();if(e/1e3>1){var n=e/1e3;if(this.dateshow.num=n,this.dateshow.char="s",n/60>1){var r=n/60;if(this.dateshow.num=r,this.dateshow.char="m",r/60>1){var i=r/60;if(this.dateshow.num=i,this.dateshow.char="h",i/24>1){var o=i/24;if(this.dateshow.num=o,this.dateshow.char="d",o/7>1){var s=o/7;if(this.dateshow.num=s,this.dateshow.char="w",s/4>1){var a=s/4;this.dateshow.num=a,this.dateshow.char="month",a/12>1&&(this.dateshow.num=a/12,this.dateshow.char="y")}}}}}}this.dateshow.num=Math.floor(this.dateshow.num),this.dataChats[u].date={num:this.dateshow.num,char:this.dateshow.char}}},t=>{this.toastr.errorToastr(t.message)})}AddImgchats(){const t=this.selectedFiles.item(0);this.selectedFiles=void 0,this.currentFileUpload=new sC(t),this.authService.Add_Img_chats(this.currentFileUpload,this.chat).subscribe(t=>{this.percentage=Math.round(t),100==t&&(console.log("4"),setTimeout(()=>{this.load=!1},15e3),setTimeout(()=>{document.getElementById("closemodel2").click(),this.Getchats(),this.chat=null,window.scrollTo(0,document.body.scrollHeight)},1e3))},t=>{console.log(t)})}getimge(){this.authService.getFileUploads(6).snapshotChanges().pipe(O(t=>t.map(t=>Object.assign({key:t.payload.key},t.payload.val())))).subscribe(t=>{this.fileUploadschats=t})}deleteMessage(){this.authService.Delete_message(this.idmessagee),this.Getchats()}idmessage(t){this.idmessagee=t}}return t.\u0275fac=function(e){return new(e||t)(Vs(Bw),Vs(L_),Vs(uv))},t.\u0275cmp=ge({type:t,selectors:[["app-chatroom"]],decls:81,vars:10,consts:[["class","navbar  navbaredite navbar-light bg-light",4,"ngIf"],[1,"editetop"],[1,"boxchat"],[4,"ngFor","ngForOf"],[1,"editebottom"],[1,"container",2,"position","fixed","bottom","-10px","padding-left","65px","height","100px","padding-top","25px","width","100%","max-width","100%","background","#55ACEE!important"],[1,"row"],[1,"col-9","textareaedite",2,"height","75px","margin-top","-12px",3,"ngModel","ngModelChange"],["aria-hidden","true",1,"fa","fa-paper-plane",2,"margin-left","2%",3,"click"],["aria-hidden","false","data-toggle","modal","data-target","#addphoto",1,"fa","fa-paperclip",2,"margin-left","2%"],["id","ChangeProfilePhoto","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",2,"padding-top","90px"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"btn","btn-default"],["type","file",3,"change"],["class","progress",4,"ngIf"],[1,"modal-footer"],["type","button","id","closemodel","data-dismiss","modal",1,"btn","btn-secondary"],[1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"],["id","ChangeUserName","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",2,"padding-top","90px"],["type","text","placeholder","New UserName",1,"form-control",3,"ngModel","ngModelChange"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","addphoto","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",2,"padding-top","90px"],["type","button","id","closemodel2","data-dismiss","modal",1,"btn","btn-secondary"],["id","deletemessage","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",2,"padding-top","90px"],["type","button","data-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"navbar","navbaredite","navbar-light","bg-light"],[1,"col-10","userpicnav"],["aria-hidden","true","data-toggle","modal","data-target","#ChangeProfilePhoto",1,"BtnChange",3,"click"],["class","imglog","alt","",3,"src",4,"ngIf"],["class","imglog","src","../../assets/loguser.png",4,"ngIf"],[1,"imghover"],["data-toggle","modal","data-target","#ChangeUserName",1,"username",2,"color","white","margin-top","4px","margin-left","1%"],[1,"col-1"],["type","submit",1,"btn","btnlog","btn-outline-danger","my-2","my-sm-0",2,"color","#fff","background-color","#dc3545","border-color","#dc3545",3,"click"],["alt","",1,"imglog",3,"src"],["src","../../assets/loguser.png",1,"imglog"],[2,"width","100%","text-align","right"],["class","container darker editbeauty","style","text-align: right;position: relative;;",4,"ngIf"],["class","container  editbeauty",4,"ngIf"],[1,"container","darker","editbeauty",2,"text-align","right","position","relative"],["style","width: 50px;height: 50px;float: right;margin: auto;","src","../../assets/loguser.png",4,"ngIf"],["style","width: 50px;height: 50px;float: right;margin: auto;",3,"src",4,"ngIf"],[2,"display","inline-block"],[1,"lead",2,"float","left","margin-right","55px"],[1,"time-right",2,"position","absolute","bottom","5%","left","5%"],["data-toggle","modal","data-target","#deletemessage","deletemessage","","aria-hidden","true",1,"fa","fa-trash-o",2,"color","white",3,"click"],["src","../../assets/loguser.png",2,"width","50px","height","50px","float","right","margin","auto"],[2,"width","50px","height","50px","float","right","margin","auto",3,"src"],["alt","",2,"width","150px","height","150px","max-width","150px","border-radius","5%","margin-right","72px","margin-bottom","10%",3,"src"],[1,"openfile",2,"padding-right","44px","margin-left","-222px","margin-top","46px",3,"href"],[1,"container","editbeauty"],["class"," right","style","width: 50px;height: 50px;float: left;margin: auto;","src","../../assets/loguser.png",4,"ngIf"],["class"," right","style","width: 50px;height: 50px;float: left;margin: auto;",3,"src",4,"ngIf"],[1,"lead",2,"margin-left","60px","margin-top","40px"],[1,"time-left"],["src","../../assets/loguser.png",1,"right",2,"width","50px","height","50px","float","left","margin","auto"],[1,"right",2,"width","50px","height","50px","float","left","margin","auto",3,"src"],["alt","",2,"width","150px","height","150px","max-width","150px","border-radius","5%",3,"src"],[1,"openfile",3,"href"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info","progress-bar-striped",3,"ngStyle"],[1,"fa","fa-spinner","fa-pulse","fa-2x","fa-fw"]],template:function(t,e){1&t&&(Ls(0,cC,13,3,"nav",0),Ws(1,"div",1),Hs(2,"div",2),Ls(3,vC,4,2,"div",3),zs(),Hs(4,"div",4),_a(5,"x"),zs(),Hs(6,"div",5),Hs(7,"div",6),Hs(8,"textarea",7),$s("ngModelChange",(function(t){return e.chat=t})),zs(),Hs(9,"i",8),$s("click",(function(){return e.addchat()})),zs(),Ws(10,"i",9),zs(),zs(),Hs(11,"div",10),Hs(12,"div",11),Hs(13,"div",12),Hs(14,"div",13),Hs(15,"h5",14),_a(16,"Change Profile Photo"),zs(),Hs(17,"button",15),Hs(18,"span",16),_a(19,"\xd7"),zs(),zs(),zs(),Hs(20,"div",17),Hs(21,"label",18),Hs(22,"input",19),$s("change",(function(t){return e.SelectImg(t)})),zs(),zs(),Ls(23,bC,3,5,"div",20),zs(),Hs(24,"div",21),Hs(25,"button",22),_a(26,"Close"),zs(),Hs(27,"button",23),$s("click",(function(){return e.DeleteProfileImg()})),_a(28,"Upload"),zs(),Ls(29,wC,4,0,"div",24),zs(),zs(),zs(),zs(),Hs(30,"div",25),Hs(31,"div",11),Hs(32,"div",12),Hs(33,"div",13),Hs(34,"h5",14),_a(35,"Change UserName"),zs(),Hs(36,"button",15),Hs(37,"span",16),_a(38,"\xd7"),zs(),zs(),zs(),Hs(39,"div",17),Hs(40,"input",26),$s("ngModelChange",(function(t){return e.ChangeUserName=t})),zs(),zs(),Hs(41,"div",21),Hs(42,"button",27),_a(43,"Close"),zs(),Hs(44,"button",28),$s("click",(function(){return e.updateUserName()})),_a(45,"Save"),zs(),zs(),zs(),zs(),zs(),Hs(46,"div",29),Hs(47,"div",11),Hs(48,"div",12),Hs(49,"div",13),Hs(50,"h5",14),_a(51,"Change Profile Photo"),zs(),Hs(52,"button",15),Hs(53,"span",16),_a(54,"\xd7"),zs(),zs(),zs(),Hs(55,"div",17),Hs(56,"label",18),Hs(57,"input",19),$s("change",(function(t){return e.SelectImg(t)})),zs(),zs(),Ls(58,CC,3,5,"div",20),zs(),Hs(59,"div",21),Hs(60,"button",30),_a(61,"Close"),zs(),Hs(62,"button",23),$s("click",(function(){return e.AddImgchats()})),_a(63,"Upload"),zs(),Ls(64,EC,4,0,"div",24),zs(),zs(),zs(),zs(),Hs(65,"div",31),Hs(66,"div",11),Hs(67,"div",12),Hs(68,"div",13),Hs(69,"h5",14),_a(70,"Delete Message"),zs(),Hs(71,"button",15),Hs(72,"span",16),_a(73,"\xd7"),zs(),zs(),zs(),Hs(74,"div",17),_a(75," Are You Sure You Want Delete Message "),zs(),Hs(76,"div",21),Hs(77,"button",27),_a(78,"Close"),zs(),Hs(79,"button",32),$s("click",(function(){return e.deleteMessage()})),_a(80,"Delete"),zs(),zs(),zs(),zs(),zs()),2&t&&(qs("ngIf",1==e.checklog),gi(3),qs("ngForOf",e.dataChats),gi(5),qs("ngModel",e.chat),gi(15),qs("ngIf",e.currentFileUpload),gi(4),qs("disabled",!e.selectedFiles),gi(2),qs("ngIf",100==e.percentage&&1==e.load),gi(11),qs("ngModel",e.ChangeUserName),gi(18),qs("ngIf",e.currentFileUpload),gi(4),qs("disabled",!e.selectedFiles),gi(2),qs("ngIf",100==e.percentage&&1==e.load))},directives:[Zc,Yc,kd,Md,Dp,ol],styles:['.container[_ngcontent-%COMP%]{border:2px solid #dedede;background-color:rgba(114,186,241,.9098039215686274);border-radius:5px;padding:10px;margin:10px 0;width:auto;max-width:auto;color:#fff}.fa-paper-plane[_ngcontent-%COMP%], .fa-paperclip[_ngcontent-%COMP%]{font-size:60px;filter:drop-shadow(2px 4px 6px white);color:#fff}.fa-paper-plane[_ngcontent-%COMP%]:hover, .fa-paperclip[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.textareaedite[_ngcontent-%COMP%]{width:500px;border-radius:20px;outline:none;padding:10px;font-family:Sniglet,cursive;font-size:2em;color:#676767;transition:border .5s;-webkit-transition:border .5s;-moz-transition:border .5s;-o-transition:border .5s;border:3px solid #98d4f3;box-sizing:border-box;height:100px;resize:none;overflow:auto}.darker[_ngcontent-%COMP%]{border-color:#ccc;background-color:rgba(11,116,195,.8196078431372549)}.container[_ngcontent-%COMP%]:after{content:"";clear:both;display:table}.container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left;max-width:60px;width:100%}.container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   img.right[_ngcontent-%COMP%]{margin-right:20px;border-radius:50%;background-size:100% 100%}.container[_ngcontent-%COMP%]   img.right[_ngcontent-%COMP%]{float:right;margin-left:20px}.time-right[_ngcontent-%COMP%]{float:right;color:#aaa}.time-left[_ngcontent-%COMP%]{float:left;color:#dcd4d4}.navbaredite[_ngcontent-%COMP%]{background-color:#55acee!important;height:75px;position:fixed;width:100%;top:0;z-index:999999}.imglog[_ngcontent-%COMP%]{width:55px;height:55px;border-radius:60%;background-size:100% 100%;filter:drop-shadow(2px 4px 6px black)}.imglog[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.BtnChange[_ngcontent-%COMP%]{background-color:var(--maincolor);outline:none;border:none}.BtnChange[_ngcontent-%COMP%]:focus{border:#fff!important}.imghover[_ngcontent-%COMP%]{width:55px;height:55px;margin-top:-55px;border-radius:50%;position:fixed;background:rgba(0,0,0,.5);color:#fff;font-family:-webkit-pictograph;padding-left:0;padding-top:17px;opacity:0}.imghover[_ngcontent-%COMP%]:hover{opacity:1}.username[_ngcontent-%COMP%]{filter:drop-shadow(2px 4px 6px black)}.username[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.editebottom[_ngcontent-%COMP%], .editetop[_ngcontent-%COMP%]{margin-top:6%}.openfile[_ngcontent-%COMP%]{width:150px;height:150px;max-width:150px;border-radius:5%;background-size:100% 100%;position:absolute;background:rgba(0,0,0,.5);color:#fff;font-family:-webkit-pictograph;margin-left:-170px;font-size:30px;opacity:0;padding-left:42px;padding-top:48px}.openfile[_ngcontent-%COMP%]:hover{opacity:1}.boxchat[_ngcontent-%COMP%]{width:100%;padding:10px;box-sizing:border-box}.boxchat[_ngcontent-%COMP%]   .editbeauty[_ngcontent-%COMP%]{display:inline-block;padding:5px 20px;border-radius:15px;cursor:default;transition:all .12s;width:auto}@media screen and (max-width:650px){.editetop[_ngcontent-%COMP%]{margin-top:31%}.editebottom[_ngcontent-%COMP%]{margin-top:28%}h2[_ngcontent-%COMP%]{font-size:1.1rem!important}.imglog[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:60%}.btnlog[_ngcontent-%COMP%]{margin-left:-53px}.userpicnav[_ngcontent-%COMP%]{margin-left:-15px}.fa-paper-plane[_ngcontent-%COMP%], .fa-paperclip[_ngcontent-%COMP%]{font-size:40px}.textareaedite[_ngcontent-%COMP%]{margin-left:-34px}}']}),t})(),canActivate:[Hw]}];let TC=(()=>{class t{}return t.\u0275mod=_e({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[[_v.forRoot(SC)],_v]}),t})(),OC=(()=>{class t{constructor(){this.title="simplechat"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=ge({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&Ws(0,"router-outlet")},directives:[cv],styles:["body[_ngcontent-%COMP%]{background:#000}"]}),t})(),IC=(()=>{class t{}return t.\u0275mod=_e({type:t,bootstrap:[OC]}),t.\u0275inj=dt({factory:function(e){return new(e||t)},providers:[{provide:Fc,useClass:qc}],imports:[[Vl,TC,U_.forRoot(),Kp,d_.initializeApp(Sc),ab,Ed,$p]]}),t})();Ll().bootstrapModule(IC).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);